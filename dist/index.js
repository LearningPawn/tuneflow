"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var qi="1.13.2",pi=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},tn=Array.prototype,jn=Object.prototype,di=typeof Symbol<"u"?Symbol.prototype:null,iu=tn.push,ge=tn.slice,le=jn.toString,su=jn.hasOwnProperty,zi=typeof ArrayBuffer<"u",ou=typeof DataView<"u",au=Array.isArray,gi=Object.keys,mi=Object.create,Ii=zi&&ArrayBuffer.isView,uu=isNaN,cu=isFinite,Ki=!{toString:null}.propertyIsEnumerable("toString"),vi=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],lu=Math.pow(2,53)-1;function L(t,e){return e=e==null?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var s=Array(e+1);for(i=0;i<e;i++)s[i]=arguments[i];return s[e]=r,t.apply(this,s)}}function Ft(t){var e=typeof t;return e==="function"||e==="object"&&!!t}function fu(t){return t===null}function Gi(t){return t===void 0}function Ji(t){return t===!0||t===!1||le.call(t)==="[object Boolean]"}function hu(t){return!!(t&&t.nodeType===1)}function O(t){var e="[object "+t+"]";return function(n){return le.call(n)===e}}const Yn=O("String"),Wi=O("Number"),pu=O("Date"),du=O("RegExp"),gu=O("Error"),ji=O("Symbol"),Yi=O("ArrayBuffer");var Qi=O("Function"),mu=pi.document&&pi.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof mu!="function"&&(Qi=function(t){return typeof t=="function"||!1});const F=Qi,Xi=O("Object");var Zi=ou&&Xi(new DataView(new ArrayBuffer(8))),Qn=typeof Map<"u"&&Xi(new Map),Iu=O("DataView");function vu(t){return t!=null&&F(t.getInt8)&&Yi(t.buffer)}const qe=Zi?vu:Iu,Ut=au||O("Array");function It(t,e){return t!=null&&su.call(t,e)}var On=O("Arguments");(function(){On(arguments)||(On=function(t){return It(t,"callee")})})();const Xn=On;function Tu(t){return!ji(t)&&cu(t)&&!isNaN(parseFloat(t))}function ts(t){return Wi(t)&&uu(t)}function es(t){return function(){return t}}function ns(t){return function(e){var n=t(e);return typeof n=="number"&&n>=0&&n<=lu}}function rs(t){return function(e){return e?.[t]}}const ze=rs("byteLength"),yu=ns(ze);var bu=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function wu(t){return Ii?Ii(t)&&!qe(t):yu(t)&&bu.test(le.call(t))}const is=zi?wu:es(!1),H=rs("length");function ku(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,t.push(i)}}}function ss(t,e){e=ku(e);var n=vi.length,r=t.constructor,i=F(r)&&r.prototype||jn,s="constructor";for(It(t,s)&&!e.contains(s)&&e.push(s);n--;)s=vi[n],s in t&&t[s]!==i[s]&&!e.contains(s)&&e.push(s)}function S(t){if(!Ft(t))return[];if(gi)return gi(t);var e=[];for(var n in t)It(t,n)&&e.push(n);return Ki&&ss(t,e),e}function Su(t){if(t==null)return!0;var e=H(t);return typeof e=="number"&&(Ut(t)||Yn(t)||Xn(t))?e===0:H(S(t))===0}function os(t,e){var n=S(e),r=n.length;if(t==null)return!r;for(var i=Object(t),s=0;s<r;s++){var o=n[s];if(e[o]!==i[o]||!(o in i))return!1}return!0}function T(t){if(t instanceof T)return t;if(!(this instanceof T))return new T(t);this._wrapped=t}T.VERSION=qi;T.prototype.value=function(){return this._wrapped};T.prototype.valueOf=T.prototype.toJSON=T.prototype.value;T.prototype.toString=function(){return String(this._wrapped)};function Ti(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,ze(t))}var yi="[object DataView]";function Mn(t,e,n,r){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var i=typeof t;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:as(t,e,n,r)}function as(t,e,n,r){t instanceof T&&(t=t._wrapped),e instanceof T&&(e=e._wrapped);var i=le.call(t);if(i!==le.call(e))return!1;if(Zi&&i=="[object Object]"&&qe(t)){if(!qe(e))return!1;i=yi}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return di.valueOf.call(t)===di.valueOf.call(e);case"[object ArrayBuffer]":case yi:return as(Ti(t),Ti(e),n,r)}var s=i==="[object Array]";if(!s&&is(t)){var o=ze(t);if(o!==ze(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;s=!0}if(!s){if(typeof t!="object"||typeof e!="object")return!1;var a=t.constructor,l=e.constructor;if(a!==l&&!(F(a)&&a instanceof a&&F(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),s){if(c=t.length,c!==e.length)return!1;for(;c--;)if(!Mn(t[c],e[c],n,r))return!1}else{var p=S(t),h;if(c=p.length,S(e).length!==c)return!1;for(;c--;)if(h=p[c],!(It(e,h)&&Mn(t[h],e[h],n,r)))return!1}return n.pop(),r.pop(),!0}function _u(t,e){return Mn(t,e)}function me(t){if(!Ft(t))return[];var e=[];for(var n in t)e.push(n);return Ki&&ss(t,e),e}function Zn(t){var e=H(t);return function(n){if(n==null)return!1;var r=me(n);if(H(r))return!1;for(var i=0;i<e;i++)if(!F(n[t[i]]))return!1;return t!==ls||!F(n[tr])}}var tr="forEach",us="has",er=["clear","delete"],cs=["get",us,"set"],Cu=er.concat(tr,cs),ls=er.concat(cs),xu=["add"].concat(er,tr,us);const Eu=Qn?Zn(Cu):O("Map"),Nu=Qn?Zn(ls):O("WeakMap"),Pu=Qn?Zn(xu):O("Set"),Au=O("WeakSet");function Yt(t){for(var e=S(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function Ou(t){for(var e=S(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function fs(t){for(var e={},n=S(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function Vn(t){var e=[];for(var n in t)F(t[n])&&e.push(n);return e.sort()}function nr(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||n==null)return n;for(var i=1;i<r;i++)for(var s=arguments[i],o=t(s),a=o.length,l=0;l<a;l++){var c=o[l];(!e||n[c]===void 0)&&(n[c]=s[c])}return n}}const hs=nr(me),Ke=nr(S),ps=nr(me,!0);function Mu(){return function(){}}function ds(t){if(!Ft(t))return{};if(mi)return mi(t);var e=Mu();e.prototype=t;var n=new e;return e.prototype=null,n}function Vu(t,e){var n=ds(t);return e&&Ke(n,e),n}function Ru(t){return Ft(t)?Ut(t)?t.slice():hs({},t):t}function Fu(t,e){return e(t),t}function gs(t){return Ut(t)?t:[t]}T.toPath=gs;function Ie(t){return T.toPath(t)}function rr(t,e){for(var n=e.length,r=0;r<n;r++){if(t==null)return;t=t[e[r]]}return n?t:void 0}function ms(t,e,n){var r=rr(t,Ie(e));return Gi(r)?n:r}function Uu(t,e){e=Ie(e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(!It(t,i))return!1;t=t[i]}return!!n}function ir(t){return t}function fe(t){return t=Ke({},t),function(e){return os(e,t)}}function sr(t){return t=Ie(t),function(e){return rr(e,t)}}function ve(t,e,n){if(e===void 0)return t;switch(n??3){case 1:return function(r){return t.call(e,r)};case 3:return function(r,i,s){return t.call(e,r,i,s)};case 4:return function(r,i,s,o){return t.call(e,r,i,s,o)}}return function(){return t.apply(e,arguments)}}function Is(t,e,n){return t==null?ir:F(t)?ve(t,e,n):Ft(t)&&!Ut(t)?fe(t):sr(t)}function or(t,e){return Is(t,e,1/0)}T.iteratee=or;function z(t,e,n){return T.iteratee!==or?T.iteratee(t,e):Is(t,e,n)}function Bu(t,e,n){e=z(e,n);for(var r=S(t),i=r.length,s={},o=0;o<i;o++){var a=r[o];s[a]=e(t[a],a,t)}return s}function vs(){}function Du(t){return t==null?vs:function(e){return ms(t,e)}}function $u(t,e,n){var r=Array(Math.max(0,t));e=ve(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function Rn(t,e){return e==null&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}const he=Date.now||function(){return new Date().getTime()};function Ts(t){var e=function(s){return t[s]},n="(?:"+S(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(s){return s=s==null?"":""+s,r.test(s)?s.replace(i,e):s}}const ys={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Lu=Ts(ys),Hu=fs(ys),qu=Ts(Hu),zu=T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var kn=/(.)^/,Ku={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Gu=/\\|'|\r|\n|\u2028|\u2029/g;function Ju(t){return"\\"+Ku[t]}var Wu=/^\s*(\w|\$)+\s*$/;function ju(t,e,n){!e&&n&&(e=n),e=ps({},e,T.templateSettings);var r=RegExp([(e.escape||kn).source,(e.interpolate||kn).source,(e.evaluate||kn).source].join("|")+"|$","g"),i=0,s="__p+='";t.replace(r,function(c,p,h,g,v){return s+=t.slice(i,v).replace(Gu,Ju),i=v+c.length,p?s+=`'+
((__t=(`+p+`))==null?'':_.escape(__t))+
'`:h?s+=`'+
((__t=(`+h+`))==null?'':__t)+
'`:g&&(s+=`';
`+g+`
__p+='`),c}),s+=`';
`;var o=e.variable;if(o){if(!Wu.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var a;try{a=new Function(o,"_",s)}catch(c){throw c.source=s,c}var l=function(c){return a.call(this,c,T)};return l.source="function("+o+`){
`+s+"}",l}function Yu(t,e,n){e=Ie(e);var r=e.length;if(!r)return F(n)?n.call(t):n;for(var i=0;i<r;i++){var s=t?.[e[i]];s===void 0&&(s=n,i=r),t=F(s)?s.call(t):s}return t}var Qu=0;function Xu(t){var e=++Qu+"";return t?t+e:e}function Zu(t){var e=T(t);return e._chain=!0,e}function bs(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var s=ds(t.prototype),o=t.apply(s,i);return Ft(o)?o:s}var Qt=L(function(t,e){var n=Qt.placeholder,r=function(){for(var i=0,s=e.length,o=Array(s),a=0;a<s;a++)o[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)o.push(arguments[i++]);return bs(t,r,this,this,o)};return r});Qt.placeholder=T;const ws=L(function(t,e,n){if(!F(t))throw new TypeError("Bind must be called on a function");var r=L(function(i){return bs(t,r,e,this,n.concat(i))});return r}),Y=ns(H);function Bt(t,e,n,r){if(r=r||[],!e&&e!==0)e=1/0;else if(e<=0)return r.concat(t);for(var i=r.length,s=0,o=H(t);s<o;s++){var a=t[s];if(Y(a)&&(Ut(a)||Xn(a)))if(e>1)Bt(a,e-1,n,r),i=r.length;else for(var l=0,c=a.length;l<c;)r[i++]=a[l++];else n||(r[i++]=a)}return r}const tc=L(function(t,e){e=Bt(e,!1,!1);var n=e.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=ws(t[r],t)}return t});function ec(t,e){var n=function(r){var i=n.cache,s=""+(e?e.apply(this,arguments):r);return It(i,s)||(i[s]=t.apply(this,arguments)),i[s]};return n.cache={},n}const ks=L(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),nc=Qt(ks,T,1);function rc(t,e,n){var r,i,s,o,a=0;n||(n={});var l=function(){a=n.leading===!1?0:he(),r=null,o=t.apply(i,s),r||(i=s=null)},c=function(){var p=he();!a&&n.leading===!1&&(a=p);var h=e-(p-a);return i=this,s=arguments,h<=0||h>e?(r&&(clearTimeout(r),r=null),a=p,o=t.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(l,h)),o};return c.cancel=function(){clearTimeout(r),a=0,r=i=s=null},c}function ic(t,e,n){var r,i,s,o,a,l=function(){var p=he()-i;e>p?r=setTimeout(l,e-p):(r=null,n||(o=t.apply(a,s)),r||(s=a=null))},c=L(function(p){return a=this,s=p,i=he(),r||(r=setTimeout(l,e),n&&(o=t.apply(a,s))),o});return c.cancel=function(){clearTimeout(r),r=s=a=null},c}function sc(t,e){return Qt(e,t)}function ar(t){return function(){return!t.apply(this,arguments)}}function oc(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function ac(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Ss(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const uc=Qt(Ss,2);function _s(t,e,n){e=z(e,n);for(var r=S(t),i,s=0,o=r.length;s<o;s++)if(i=r[s],e(t[i],i,t))return i}function Cs(t){return function(e,n,r){n=z(n,r);for(var i=H(e),s=t>0?0:i-1;s>=0&&s<i;s+=t)if(n(e[s],s,e))return s;return-1}}const Wt=Cs(1),xs=Cs(-1);function Es(t,e,n,r){n=z(n,r,1);for(var i=n(e),s=0,o=H(t);s<o;){var a=Math.floor((s+o)/2);n(t[a])<i?s=a+1:o=a}return s}function Ns(t,e,n){return function(r,i,s){var o=0,a=H(r);if(typeof s=="number")t>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=e(ge.call(r,o,a),ts),s>=0?s+o:-1;for(s=t>0?o:a-1;s>=0&&s<a;s+=t)if(r[s]===i)return s;return-1}}const Ps=Ns(1,Wt,Es),cc=Ns(-1,xs);function Ge(t,e,n){var r=Y(t)?Wt:_s,i=r(t,e,n);if(i!==void 0&&i!==-1)return t[i]}function lc(t,e){return Ge(t,fe(e))}function ut(t,e,n){e=ve(e,n);var r,i;if(Y(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var s=S(t);for(r=0,i=s.length;r<i;r++)e(t[s[r]],s[r],t)}return t}function Vt(t,e,n){e=z(e,n);for(var r=!Y(t)&&S(t),i=(r||t).length,s=Array(i),o=0;o<i;o++){var a=r?r[o]:o;s[o]=e(t[a],a,t)}return s}function As(t){var e=function(n,r,i,s){var o=!Y(n)&&S(n),a=(o||n).length,l=t>0?0:a-1;for(s||(i=n[o?o[l]:l],l+=t);l>=0&&l<a;l+=t){var c=o?o[l]:l;i=r(i,n[c],c,n)}return i};return function(n,r,i,s){var o=arguments.length>=3;return e(n,ve(r,s,4),i,o)}}const Sn=As(1),bi=As(-1);function jt(t,e,n){var r=[];return e=z(e,n),ut(t,function(i,s,o){e(i,s,o)&&r.push(i)}),r}function fc(t,e,n){return jt(t,ar(z(e)),n)}function wi(t,e,n){e=z(e,n);for(var r=!Y(t)&&S(t),i=(r||t).length,s=0;s<i;s++){var o=r?r[s]:s;if(!e(t[o],o,t))return!1}return!0}function ki(t,e,n){e=z(e,n);for(var r=!Y(t)&&S(t),i=(r||t).length,s=0;s<i;s++){var o=r?r[s]:s;if(e(t[o],o,t))return!0}return!1}function ot(t,e,n,r){return Y(t)||(t=Yt(t)),(typeof n!="number"||r)&&(n=0),Ps(t,e,n)>=0}const hc=L(function(t,e,n){var r,i;return F(e)?i=e:(e=Ie(e),r=e.slice(0,-1),e=e[e.length-1]),Vt(t,function(s){var o=i;if(!o){if(r&&r.length&&(s=rr(s,r)),s==null)return;o=s[e]}return o==null?o:o.apply(s,n)})});function ur(t,e){return Vt(t,sr(e))}function pc(t,e){return jt(t,fe(e))}function Os(t,e,n){var r=-1/0,i=-1/0,s,o;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=Y(t)?t:Yt(t);for(var a=0,l=t.length;a<l;a++)s=t[a],s!=null&&s>r&&(r=s)}else e=z(e,n),ut(t,function(c,p,h){o=e(c,p,h),(o>i||o===-1/0&&r===-1/0)&&(r=c,i=o)});return r}function dc(t,e,n){var r=1/0,i=1/0,s,o;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=Y(t)?t:Yt(t);for(var a=0,l=t.length;a<l;a++)s=t[a],s!=null&&s<r&&(r=s)}else e=z(e,n),ut(t,function(c,p,h){o=e(c,p,h),(o<i||o===1/0&&r===1/0)&&(r=c,i=o)});return r}var gc=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ms(t){return t?Ut(t)?ge.call(t):Yn(t)?t.match(gc):Y(t)?Vt(t,ir):Yt(t):[]}function Vs(t,e,n){if(e==null||n)return Y(t)||(t=Yt(t)),t[Rn(t.length-1)];var r=Ms(t),i=H(r);e=Math.max(Math.min(e,i),0);for(var s=i-1,o=0;o<e;o++){var a=Rn(o,s),l=r[o];r[o]=r[a],r[a]=l}return r.slice(0,e)}function mc(t){return Vs(t,1/0)}function Ic(t,e,n){var r=0;return e=z(e,n),ur(Vt(t,function(i,s,o){return{value:i,index:r++,criteria:e(i,s,o)}}).sort(function(i,s){var o=i.criteria,a=s.criteria;if(o!==a){if(o>a||o===void 0)return 1;if(o<a||a===void 0)return-1}return i.index-s.index}),"value")}function en(t,e){return function(n,r,i){var s=e?[[],[]]:{};return r=z(r,i),ut(n,function(o,a){var l=r(o,a,n);t(s,o,l)}),s}}const vc=en(function(t,e,n){It(t,n)?t[n].push(e):t[n]=[e]}),Tc=en(function(t,e,n){t[n]=e}),yc=en(function(t,e,n){It(t,n)?t[n]++:t[n]=1}),bc=en(function(t,e,n){t[n?0:1].push(e)},!0);function wc(t){return t==null?0:Y(t)?t.length:S(t).length}function kc(t,e,n){return e in n}const Rs=L(function(t,e){var n={},r=e[0];if(t==null)return n;F(r)?(e.length>1&&(r=ve(r,e[1])),e=me(t)):(r=kc,e=Bt(e,!1,!1),t=Object(t));for(var i=0,s=e.length;i<s;i++){var o=e[i],a=t[o];r(a,o,t)&&(n[o]=a)}return n}),Sc=L(function(t,e){var n=e[0],r;return F(n)?(n=ar(n),e.length>1&&(r=e[1])):(e=Vt(Bt(e,!1,!1),String),n=function(i,s){return!ot(e,s)}),Rs(t,n,r)});function Fs(t,e,n){return ge.call(t,0,Math.max(0,t.length-(e==null||n?1:e)))}function _n(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[0]:Fs(t,t.length-e)}function Le(t,e,n){return ge.call(t,e==null||n?1:e)}function _c(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[t.length-1]:Le(t,Math.max(0,t.length-e))}function Cc(t){return jt(t,Boolean)}function xc(t,e){return Bt(t,e,!1)}const Us=L(function(t,e){return e=Bt(e,!0,!0),jt(t,function(n){return!ot(e,n)})}),Ec=L(function(t,e){return Us(t,e)});function Fn(t,e,n,r){Ji(e)||(r=n,n=e,e=!1),n!=null&&(n=z(n,r));for(var i=[],s=[],o=0,a=H(t);o<a;o++){var l=t[o],c=n?n(l,o,t):l;e&&!n?((!o||s!==c)&&i.push(l),s=c):n?ot(s,c)||(s.push(c),i.push(l)):ot(i,l)||i.push(l)}return i}const Nc=L(function(t){return Fn(Bt(t,!0,!0))});function Pc(t){for(var e=[],n=arguments.length,r=0,i=H(t);r<i;r++){var s=t[r];if(!ot(e,s)){var o;for(o=1;o<n&&ot(arguments[o],s);o++);o===n&&e.push(s)}}return e}function Un(t){for(var e=t&&Os(t,H).length||0,n=Array(e),r=0;r<e;r++)n[r]=ur(t,r);return n}const Ac=L(Un);function Oc(t,e){for(var n={},r=0,i=H(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function Mc(t,e,n){e==null&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),s=0;s<r;s++,t+=n)i[s]=t;return i}function Vc(t,e){if(e==null||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(ge.call(t,r,r+=e));return n}function cr(t,e){return t._chain?T(e).chain():e}function Bs(t){return ut(Vn(t),function(e){var n=T[e]=t[e];T.prototype[e]=function(){var r=[this._wrapped];return iu.apply(r,arguments),cr(this,n.apply(T,r))}}),T}ut(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=tn[t];T.prototype[t]=function(){var n=this._wrapped;return n!=null&&(e.apply(n,arguments),(t==="shift"||t==="splice")&&n.length===0&&delete n[0]),cr(this,n)}});ut(["concat","join","slice"],function(t){var e=tn[t];T.prototype[t]=function(){var n=this._wrapped;return n!=null&&(n=e.apply(n,arguments)),cr(this,n)}});const Rc=Object.freeze(Object.defineProperty({__proto__:null,VERSION:qi,restArguments:L,isObject:Ft,isNull:fu,isUndefined:Gi,isBoolean:Ji,isElement:hu,isString:Yn,isNumber:Wi,isDate:pu,isRegExp:du,isError:gu,isSymbol:ji,isArrayBuffer:Yi,isDataView:qe,isArray:Ut,isFunction:F,isArguments:Xn,isFinite:Tu,isNaN:ts,isTypedArray:is,isEmpty:Su,isMatch:os,isEqual:_u,isMap:Eu,isWeakMap:Nu,isSet:Pu,isWeakSet:Au,keys:S,allKeys:me,values:Yt,pairs:Ou,invert:fs,functions:Vn,methods:Vn,extend:hs,extendOwn:Ke,assign:Ke,defaults:ps,create:Vu,clone:Ru,tap:Fu,get:ms,has:Uu,mapObject:Bu,identity:ir,constant:es,noop:vs,toPath:gs,property:sr,propertyOf:Du,matcher:fe,matches:fe,times:$u,random:Rn,now:he,escape:Lu,unescape:qu,templateSettings:zu,template:ju,result:Yu,uniqueId:Xu,chain:Zu,iteratee:or,partial:Qt,bind:ws,bindAll:tc,memoize:ec,delay:ks,defer:nc,throttle:rc,debounce:ic,wrap:sc,negate:ar,compose:oc,after:ac,before:Ss,once:uc,findKey:_s,findIndex:Wt,findLastIndex:xs,sortedIndex:Es,indexOf:Ps,lastIndexOf:cc,find:Ge,detect:Ge,findWhere:lc,each:ut,forEach:ut,map:Vt,collect:Vt,reduce:Sn,foldl:Sn,inject:Sn,reduceRight:bi,foldr:bi,filter:jt,select:jt,reject:fc,every:wi,all:wi,some:ki,any:ki,contains:ot,includes:ot,include:ot,invoke:hc,pluck:ur,where:pc,max:Os,min:dc,shuffle:mc,sample:Vs,sortBy:Ic,groupBy:vc,indexBy:Tc,countBy:yc,partition:bc,toArray:Ms,size:wc,pick:Rs,omit:Sc,first:_n,head:_n,take:_n,initial:Fs,last:_c,rest:Le,tail:Le,drop:Le,compact:Cc,flatten:xc,without:Ec,uniq:Fn,unique:Fn,union:Nc,intersection:Pc,difference:Us,unzip:Un,transpose:Un,zip:Ac,object:Oc,range:Mc,chunk:Vc,mixin:Bs,default:T},Symbol.toStringTag,{value:"Module"}));var E=Bs(Rc);E._=E;let nn=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");class lr{instanceIdInternal=lr.generatePluginIdInternal();enabledInternal=!0;paramsResultInternal={};generatedTrackIdsInternal=[];isRollbackable=!1;songCacheInternal;progress=null;isExecuting=!1;static providerId(){throw new Error("providerId() should be overwritten.")}static pluginId(){throw new Error("pluginId() should be overwritten.")}static providerDisplayName(){throw new Error("providerDisplayName() should be overwritten.")}static pluginDisplayName(){throw new Error("pluginDisplayName() should be overwritten.")}static pluginDescription(){return null}static allowReset(){return!0}async init(e,n){}params(){return{}}songAccess(){return{}}allowManualApplyAdjust(){return!1}async run(e,n,r){}static async create(e,n){const r=new this;return r.resetInternal(),await r.init(e,n),r}get instanceId(){return this.instanceIdInternal}getParam(e,n){return e[n]}hasAllParamsSet(){for(const e of S(this.params()))if(!this.isParamProvided(e))return!1;return!0}isParamProvided(e){if(this.params()[e].optional)return!0;const n=this.paramsResultInternal[e];if(n==null)return!1;const i=this.params()[e].widget.type;switch(i){case A.Input:case A.Pitch:case A.Slider:case A.TrackSelector:case A.Select:case A.SelectList:case A.Switch:case A.InputNumber:case A.FileSelector:return!0;case A.MultiTrackSelector:return n.length>0;case A.TrackPitchSelector:return n.track!==void 0&&n.track!==null&&n.pitch!==void 0&&n.pitch!==null;case A.InstrumentSelector:return n.program!==void 0&&n.program!==null&&n.isDrum!==void 0&&n.isDrum!==null;case A.MultiSourceAudioSelector:return n!=null&&n.audioInfo!==void 0&&n.audioInfo!==null;case A.None:return n!=null;default:throw new Error(`Param nullness check needs to be implemented for widget type ${i}. Either use default nullness check or define custom logic.`)}}static id(){return`${this.providerId()}^_^${this.pluginId()}`}static getPrefixedArtifactId(e){return`${this.id()}.${e}`}setProgress(e){this.progress=e}getProgress(){return this.progress}getIsExecuting(){return this.isExecuting}setParamsInternal(e){this.paramsResultInternal=e,this.maybeSyncEnabledWithParamsReadiness()}getParamsInternal(){return this.paramsResultInternal}resetParamsInternal(){for(const e of S(this.params())){const n=this.params()[e];this.paramsResultInternal[e]=n.defaultValue}this.maybeSyncEnabledWithParamsReadiness()}resetInternal(){this.resetParamsInternal(),this.allowManualApplyAdjust()&&(this.enabledInternal=!1)}setEnabledInternal(e){this.enabledInternal=e}maybeSyncEnabledWithParamsReadiness(){this.allowManualApplyAdjust()&&!this.hasAllParamsSet()&&this.setEnabledInternal(!1)}static generatePluginIdInternal(){return nn(10)}}class Fc{plugins=[];threwErrorInLastRun=!1;maxNumPluginsToKeep=50;originalSong;cloneSongFnInternal;readApisInternal;activePluginIndex=-1;addAsOrReplaceActivePlugin(e){let n;return this.activePluginIndex<=-1?n=0:this.plugins[this.activePluginIndex].isRollbackable?n=this.activePluginIndex+1:n=this.activePluginIndex,this.plugins.length>0&&this.plugins.splice(n,this.plugins.length-n),this.addPluginAt(e,n),this.getPluginIndexByPluginInstanceId(e.instanceId)}getPlugins(){return this.plugins}resetCache(){for(const e of this.plugins)delete e.songCacheInternal}setOriginalSong(e){this.originalSong=e}hasOriginalSong(){return!!this.originalSong}async run(e=0){if(!this.originalSong)return this.threwErrorInLastRun=!0,null;e=Math.max(0,e),this.setActivePluginIndex(e),this.threwErrorInLastRun=!1;const n=this.getIndexOfLatestPluginWithCacheBeforeIndex(e),r=await this.cloneCachedSongAtPluginIndex(n);for(let i=e;i<this.plugins.length;i+=1)delete this.plugins[i].songCacheInternal;for(let i=0;i<this.plugins.length;i+=1)this.plugins[i].isRollbackable=i<=n;for(let i=n>=0?n+1:0;i<this.plugins.length;i+=1){const s=this.plugins[i];if(!s.enabledInternal||!s.hasAllParamsSet())return r;r.setPluginContextInternal(s);try{s.isExecuting=!0,s.setProgress(null),await s.run(r,s.getParamsInternal(),this.readApisInternal),r.clearPluginContextInternal(),s.isExecuting=!1}catch{this.threwErrorInLastRun=!0,r.clearPluginContextInternal(),s.isExecuting=!1;const a=this.getIndexOfLatestPluginWithCacheBeforeIndex(i);return a>=0?await this.cloneSong(this.plugins[a].songCacheInternal):await this.cloneSong(this.originalSong)}s.songCacheInternal=await this.cloneSong(r),s.isRollbackable=!0}return r}restoreCachedPlugin(e){return this.setActivePluginIndex(e),this.cloneCachedSongAtPluginIndex(e)}async cloneSong(e){if(!this.cloneSongFnInternal)throw new Error("Pipeline is not provided with a clone song function.");return this.cloneSongFnInternal(e)}getActivePluginIndex(){return this.activePluginIndex}setActivePluginIndex(e){this.activePluginIndex=e}async cloneCachedSongAtPluginIndex(e){if(e>=0)return await this.cloneSong(this.plugins[e].songCacheInternal);if(!this.originalSong)throw new Error("Original song is not avaiable to clone.");return await this.cloneSong(this.originalSong)}reset(){this.plugins.splice(0,this.plugins.length),this.originalSong=void 0,this.activePluginIndex=-1,this.threwErrorInLastRun=!1}isPluginFunctioning(e){return!!e.songCacheInternal}getPluginIndexByPluginInstanceId(e){return Wt(this.plugins,n=>n.instanceId===e)}getThrewErrorInLastRun(){return this.threwErrorInLastRun}getPluginCache(e){return e.songCacheInternal}setMaxNumPluginsToKeep(e){this.maxNumPluginsToKeep=e,this.maintainPluginListSize()}getIndexOfLatestPluginWithCacheBeforeIndex(e){for(let n=e-1;n>=0;n-=1)if(this.getPluginCache(this.plugins[n]))return n;return-1}maintainPluginListSize(){for(;this.plugins.length>this.maxNumPluginsToKeep&&this.plugins.length>0;)this.plugins.shift()}addPluginAt(e,n){this.plugins.splice(n,0,e),this.maintainPluginListSize()}}var X=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uc(t,e,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l>=0?(s=o,i=o-1):r=o+1}return s}function Bc(t,e,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l>0?(s=o,i=o-1):r=o+1}return s}function Dc(t,e,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l<0?(s=o,r=o+1):i=o-1}return s}function $c(t,e,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l<=0?(s=o,r=o+1):i=o-1}return s}function Lc(t,e,n,r,i){for(;r<=i;){var s=r+i>>>1,o=t[s],a=n!==void 0?n(o,e):o-e;if(a===0)return s;a<=0?r=s+1:i=s-1}return-1}function ee(t,e,n,r,i,s){return typeof n=="function"?s(t,e,n,r===void 0?0:r|0,i===void 0?t.length-1:i|0):s(t,e,void 0,n===void 0?0:n|0,r===void 0?t.length-1:r|0)}var x={ge:function(t,e,n,r,i){return ee(t,e,n,r,i,Uc)},gt:function(t,e,n,r,i){return ee(t,e,n,r,i,Bc)},lt:function(t,e,n,r,i){return ee(t,e,n,r,i,Dc)},le:function(t,e,n,r,i){return ee(t,e,n,r,i,$c)},eq:function(t,e,n,r,i){return ee(t,e,n,r,i,Lc)}},Bn={exports:{}};(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",p="[object Function]",h="[object GeneratorFunction]",g="[object Map]",v="[object Number]",I="[object Object]",b="[object Promise]",K="[object RegExp]",N="[object Set]",k="[object String]",ke="[object Symbol]",Xt="[object WeakMap]",Or="[object ArrayBuffer]",Se="[object DataView]",Mr="[object Float32Array]",Vr="[object Float64Array]",Rr="[object Int8Array]",Fr="[object Int16Array]",Ur="[object Int32Array]",Br="[object Uint8Array]",Dr="[object Uint8ClampedArray]",$r="[object Uint16Array]",Lr="[object Uint32Array]",Vo=/[\\^$.*+?()[\]{}|]/g,Ro=/\w*$/,Fo=/^\[object .+?Constructor\]$/,Uo=/^(?:0|[1-9]\d*)$/,w={};w[s]=w[o]=w[Or]=w[Se]=w[a]=w[l]=w[Mr]=w[Vr]=w[Rr]=w[Fr]=w[Ur]=w[g]=w[v]=w[I]=w[K]=w[N]=w[k]=w[ke]=w[Br]=w[Dr]=w[$r]=w[Lr]=!0,w[c]=w[p]=w[Xt]=!1;var Bo=typeof X=="object"&&X&&X.Object===Object&&X,Do=typeof self=="object"&&self&&self.Object===Object&&self,nt=Bo||Do||Function("return this")(),Hr=e&&!e.nodeType&&e,qr=Hr&&!0&&t&&!t.nodeType&&t,$o=qr&&qr.exports===Hr;function Lo(u,f){return u.set(f[0],f[1]),u}function Ho(u,f){return u.add(f),u}function qo(u,f){for(var d=-1,m=u?u.length:0;++d<m&&f(u[d],d,u)!==!1;);return u}function zo(u,f){for(var d=-1,m=f.length,C=u.length;++d<m;)u[C+d]=f[d];return u}function zr(u,f,d,m){var C=-1,M=u?u.length:0;for(m&&M&&(d=u[++C]);++C<M;)d=f(d,u[C],C,u);return d}function Ko(u,f){for(var d=-1,m=Array(u);++d<u;)m[d]=f(d);return m}function Go(u,f){return u?.[f]}function Kr(u){var f=!1;if(u!=null&&typeof u.toString!="function")try{f=!!(u+"")}catch{}return f}function Gr(u){var f=-1,d=Array(u.size);return u.forEach(function(m,C){d[++f]=[C,m]}),d}function hn(u,f){return function(d){return u(f(d))}}function Jr(u){var f=-1,d=Array(u.size);return u.forEach(function(m){d[++f]=m}),d}var Jo=Array.prototype,Wo=Function.prototype,_e=Object.prototype,pn=nt["__core-js_shared__"],Wr=function(){var u=/[^.]+$/.exec(pn&&pn.keys&&pn.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),jr=Wo.toString,lt=_e.hasOwnProperty,Ce=_e.toString,jo=RegExp("^"+jr.call(lt).replace(Vo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yr=$o?nt.Buffer:void 0,Qr=nt.Symbol,Xr=nt.Uint8Array,Yo=hn(Object.getPrototypeOf,Object),Qo=Object.create,Xo=_e.propertyIsEnumerable,Zo=Jo.splice,Zr=Object.getOwnPropertySymbols,ta=Yr?Yr.isBuffer:void 0,ea=hn(Object.keys,Object),dn=Lt(nt,"DataView"),Zt=Lt(nt,"Map"),gn=Lt(nt,"Promise"),mn=Lt(nt,"Set"),In=Lt(nt,"WeakMap"),te=Lt(Object,"create"),na=yt(dn),ra=yt(Zt),ia=yt(gn),sa=yt(mn),oa=yt(In),ti=Qr?Qr.prototype:void 0,ei=ti?ti.valueOf:void 0;function vt(u){var f=-1,d=u?u.length:0;for(this.clear();++f<d;){var m=u[f];this.set(m[0],m[1])}}function aa(){this.__data__=te?te(null):{}}function ua(u){return this.has(u)&&delete this.__data__[u]}function ca(u){var f=this.__data__;if(te){var d=f[u];return d===r?void 0:d}return lt.call(f,u)?f[u]:void 0}function la(u){var f=this.__data__;return te?f[u]!==void 0:lt.call(f,u)}function fa(u,f){var d=this.__data__;return d[u]=te&&f===void 0?r:f,this}vt.prototype.clear=aa,vt.prototype.delete=ua,vt.prototype.get=ca,vt.prototype.has=la,vt.prototype.set=fa;function rt(u){var f=-1,d=u?u.length:0;for(this.clear();++f<d;){var m=u[f];this.set(m[0],m[1])}}function ha(){this.__data__=[]}function pa(u){var f=this.__data__,d=xe(f,u);if(d<0)return!1;var m=f.length-1;return d==m?f.pop():Zo.call(f,d,1),!0}function da(u){var f=this.__data__,d=xe(f,u);return d<0?void 0:f[d][1]}function ga(u){return xe(this.__data__,u)>-1}function ma(u,f){var d=this.__data__,m=xe(d,u);return m<0?d.push([u,f]):d[m][1]=f,this}rt.prototype.clear=ha,rt.prototype.delete=pa,rt.prototype.get=da,rt.prototype.has=ga,rt.prototype.set=ma;function Dt(u){var f=-1,d=u?u.length:0;for(this.clear();++f<d;){var m=u[f];this.set(m[0],m[1])}}function Ia(){this.__data__={hash:new vt,map:new(Zt||rt),string:new vt}}function va(u){return Ee(this,u).delete(u)}function Ta(u){return Ee(this,u).get(u)}function ya(u){return Ee(this,u).has(u)}function ba(u,f){return Ee(this,u).set(u,f),this}Dt.prototype.clear=Ia,Dt.prototype.delete=va,Dt.prototype.get=Ta,Dt.prototype.has=ya,Dt.prototype.set=ba;function $t(u){this.__data__=new rt(u)}function wa(){this.__data__=new rt}function ka(u){return this.__data__.delete(u)}function Sa(u){return this.__data__.get(u)}function _a(u){return this.__data__.has(u)}function Ca(u,f){var d=this.__data__;if(d instanceof rt){var m=d.__data__;if(!Zt||m.length<n-1)return m.push([u,f]),this;d=this.__data__=new Dt(m)}return d.set(u,f),this}$t.prototype.clear=wa,$t.prototype.delete=ka,$t.prototype.get=Sa,$t.prototype.has=_a,$t.prototype.set=Ca;function xa(u,f){var d=yn(u)||Qa(u)?Ko(u.length,String):[],m=d.length,C=!!m;for(var M in u)(f||lt.call(u,M))&&!(C&&(M=="length"||Ja(M,m)))&&d.push(M);return d}function ni(u,f,d){var m=u[f];(!(lt.call(u,f)&&oi(m,d))||d===void 0&&!(f in u))&&(u[f]=d)}function xe(u,f){for(var d=u.length;d--;)if(oi(u[d][0],f))return d;return-1}function Ea(u,f){return u&&ri(f,bn(f),u)}function vn(u,f,d,m,C,M,Q){var D;if(m&&(D=M?m(u,C,M,Q):m(u)),D!==void 0)return D;if(!Ne(u))return u;var ci=yn(u);if(ci){if(D=za(u),!f)return La(u,D)}else{var Ht=Tt(u),li=Ht==p||Ht==h;if(Za(u))return Va(u,f);if(Ht==I||Ht==s||li&&!M){if(Kr(u))return M?u:{};if(D=Ka(li?{}:u),!f)return Ha(u,Ea(D,u))}else{if(!w[Ht])return M?u:{};D=Ga(u,Ht,vn,f)}}Q||(Q=new $t);var fi=Q.get(u);if(fi)return fi;if(Q.set(u,D),!ci)var hi=d?qa(u):bn(u);return qo(hi||u,function(wn,Pe){hi&&(Pe=wn,wn=u[Pe]),ni(D,Pe,vn(wn,f,d,m,Pe,u,Q))}),D}function Na(u){return Ne(u)?Qo(u):{}}function Pa(u,f,d){var m=f(u);return yn(u)?m:zo(m,d(u))}function Aa(u){return Ce.call(u)}function Oa(u){if(!Ne(u)||ja(u))return!1;var f=ui(u)||Kr(u)?jo:Fo;return f.test(yt(u))}function Ma(u){if(!si(u))return ea(u);var f=[];for(var d in Object(u))lt.call(u,d)&&d!="constructor"&&f.push(d);return f}function Va(u,f){if(f)return u.slice();var d=new u.constructor(u.length);return u.copy(d),d}function Tn(u){var f=new u.constructor(u.byteLength);return new Xr(f).set(new Xr(u)),f}function Ra(u,f){var d=f?Tn(u.buffer):u.buffer;return new u.constructor(d,u.byteOffset,u.byteLength)}function Fa(u,f,d){var m=f?d(Gr(u),!0):Gr(u);return zr(m,Lo,new u.constructor)}function Ua(u){var f=new u.constructor(u.source,Ro.exec(u));return f.lastIndex=u.lastIndex,f}function Ba(u,f,d){var m=f?d(Jr(u),!0):Jr(u);return zr(m,Ho,new u.constructor)}function Da(u){return ei?Object(ei.call(u)):{}}function $a(u,f){var d=f?Tn(u.buffer):u.buffer;return new u.constructor(d,u.byteOffset,u.length)}function La(u,f){var d=-1,m=u.length;for(f||(f=Array(m));++d<m;)f[d]=u[d];return f}function ri(u,f,d,m){d||(d={});for(var C=-1,M=f.length;++C<M;){var Q=f[C],D=m?m(d[Q],u[Q],Q,d,u):void 0;ni(d,Q,D===void 0?u[Q]:D)}return d}function Ha(u,f){return ri(u,ii(u),f)}function qa(u){return Pa(u,bn,ii)}function Ee(u,f){var d=u.__data__;return Wa(f)?d[typeof f=="string"?"string":"hash"]:d.map}function Lt(u,f){var d=Go(u,f);return Oa(d)?d:void 0}var ii=Zr?hn(Zr,Object):nu,Tt=Aa;(dn&&Tt(new dn(new ArrayBuffer(1)))!=Se||Zt&&Tt(new Zt)!=g||gn&&Tt(gn.resolve())!=b||mn&&Tt(new mn)!=N||In&&Tt(new In)!=Xt)&&(Tt=function(u){var f=Ce.call(u),d=f==I?u.constructor:void 0,m=d?yt(d):void 0;if(m)switch(m){case na:return Se;case ra:return g;case ia:return b;case sa:return N;case oa:return Xt}return f});function za(u){var f=u.length,d=u.constructor(f);return f&&typeof u[0]=="string"&&lt.call(u,"index")&&(d.index=u.index,d.input=u.input),d}function Ka(u){return typeof u.constructor=="function"&&!si(u)?Na(Yo(u)):{}}function Ga(u,f,d,m){var C=u.constructor;switch(f){case Or:return Tn(u);case a:case l:return new C(+u);case Se:return Ra(u,m);case Mr:case Vr:case Rr:case Fr:case Ur:case Br:case Dr:case $r:case Lr:return $a(u,m);case g:return Fa(u,m,d);case v:case k:return new C(u);case K:return Ua(u);case N:return Ba(u,m,d);case ke:return Da(u)}}function Ja(u,f){return f=f??i,!!f&&(typeof u=="number"||Uo.test(u))&&u>-1&&u%1==0&&u<f}function Wa(u){var f=typeof u;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?u!=="__proto__":u===null}function ja(u){return!!Wr&&Wr in u}function si(u){var f=u&&u.constructor,d=typeof f=="function"&&f.prototype||_e;return u===d}function yt(u){if(u!=null){try{return jr.call(u)}catch{}try{return u+""}catch{}}return""}function Ya(u){return vn(u,!0,!0)}function oi(u,f){return u===f||u!==u&&f!==f}function Qa(u){return Xa(u)&&lt.call(u,"callee")&&(!Xo.call(u,"callee")||Ce.call(u)==s)}var yn=Array.isArray;function ai(u){return u!=null&&tu(u.length)&&!ui(u)}function Xa(u){return eu(u)&&ai(u)}var Za=ta||ru;function ui(u){var f=Ne(u)?Ce.call(u):"";return f==p||f==h}function tu(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=i}function Ne(u){var f=typeof u;return!!u&&(f=="object"||f=="function")}function eu(u){return!!u&&typeof u=="object"}function bn(u){return ai(u)?xa(u):Ma(u)}function nu(){return[]}function ru(){return!1}t.exports=Ya})(Bn,Bn.exports);const Si=Bn.exports;class re{ticks;bpm;time;constructor({ticks:e,bpm:n,time:r}){this.ticks=e,this.bpm=n,this.time=r}getTicks(){return this.ticks}getBpm(){return this.bpm}setBpmInternal(e){this.bpm=e}getTime(){return this.time}setTimeInternal(e){this.time=e}}class Dn{ticks;numerator;denominator;constructor({ticks:e,numerator:n,denominator:r}){this.ticks=e,this.numerator=n,this.denominator=r}getTicks(){return this.ticks}setTicks(e){this.ticks=e}getNumerator(){return this.numerator}setNumerator(e){this.numerator=e}getDenominator(){return this.denominator}setDenominator(e){this.denominator=e}}function Hc(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}process.env.NODE_ENV!=="production"&&Object.freeze({});process.env.NODE_ENV!=="production"&&Object.freeze([]);const Ds=Object.assign,qc=Object.prototype.hasOwnProperty,rn=(t,e)=>qc.call(t,e),dt=Array.isArray,se=t=>$s(t)==="[object Map]",zc=t=>typeof t=="string",fr=t=>typeof t=="symbol",sn=t=>t!==null&&typeof t=="object",Kc=Object.prototype.toString,$s=t=>Kc.call(t),Ls=t=>$s(t).slice(8,-1),hr=t=>zc(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Gc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},qh=Gc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Hs=(t,e)=>!Object.is(t,e),Jc=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})};let Wc;function jc(t,e=Wc){e&&e.active&&e.effects.push(t)}const $n=t=>{const e=new Set(t);return e.w=0,e.n=0,e},qs=t=>(t.w&gt)>0,zs=t=>(t.n&gt)>0,Yc=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=gt},Qc=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];qs(i)&&!zs(i)?i.delete(t):e[n++]=i,i.w&=~gt,i.n&=~gt}e.length=n}},Ln=new WeakMap;let ie=0,gt=1;const Hn=30;let j;const Et=Symbol(process.env.NODE_ENV!=="production"?"iterate":""),qn=Symbol(process.env.NODE_ENV!=="production"?"Map key iterate":"");class Xc{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,jc(this,r)}run(){if(!this.active)return this.fn();let e=j,n=Nt;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=j,j=this,Nt=!0,gt=1<<++ie,ie<=Hn?Yc(this):_i(this),this.fn()}finally{ie<=Hn&&Qc(this),gt=1<<--ie,j=this.parent,Nt=n,this.parent=void 0}}stop(){this.active&&(_i(this),this.onStop&&this.onStop(),this.active=!1)}}function _i(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Nt=!0;const Ks=[];function Gs(){Ks.push(Nt),Nt=!1}function Js(){const t=Ks.pop();Nt=t===void 0?!0:t}function Z(t,e,n){if(Nt&&j){let r=Ln.get(t);r||Ln.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=$n());const s=process.env.NODE_ENV!=="production"?{effect:j,target:t,type:e,key:n}:void 0;Zc(i,s)}}function Zc(t,e){let n=!1;ie<=Hn?zs(t)||(t.n|=gt,n=!qs(t)):n=!t.has(j),n&&(t.add(j),j.deps.push(t),process.env.NODE_ENV!=="production"&&j.onTrack&&j.onTrack(Object.assign({effect:j},e)))}function mt(t,e,n,r,i,s){const o=Ln.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&dt(t))o.forEach((c,p)=>{(p==="length"||p>=r)&&a.push(c)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":dt(t)?hr(n)&&a.push(o.get("length")):(a.push(o.get(Et)),se(t)&&a.push(o.get(qn)));break;case"delete":dt(t)||(a.push(o.get(Et)),se(t)&&a.push(o.get(qn)));break;case"set":se(t)&&a.push(o.get(Et));break}const l=process.env.NODE_ENV!=="production"?{target:t,type:e,key:n,newValue:r,oldValue:i,oldTarget:s}:void 0;if(a.length===1)a[0]&&(process.env.NODE_ENV!=="production"?Ae(a[0],l):Ae(a[0]));else{const c=[];for(const p of a)p&&c.push(...p);process.env.NODE_ENV!=="production"?Ae($n(c),l):Ae($n(c))}}function Ae(t,e){for(const n of dt(t)?t:[...t])(n!==j||n.allowRecurse)&&(process.env.NODE_ENV!=="production"&&n.onTrigger&&n.onTrigger(Ds({effect:n},e)),n.scheduler?n.scheduler():n.run())}const tl=Hc("__proto__,__v_isRef,__isVue"),Ws=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(fr)),el=pr(),nl=pr(!0),rl=pr(!0,!0),Ci=il();function il(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=y(this);for(let s=0,o=this.length;s<o;s++)Z(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(y)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Gs();const r=y(this)[e].apply(this,n);return Js(),r}}),t}function pr(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?Zs:Xs:e?yl:Qs).get(r))return r;const o=dt(r);if(!t&&o&&rn(Ci,i))return Reflect.get(Ci,i,s);const a=Reflect.get(r,i,s);return(fr(i)?Ws.has(i):tl(i))||(t||Z(r,"get",i),e)?a:R(a)?!o||!hr(i)?a.value:a:sn(a)?t?eo(a):to(a):a}}const sl=ol();function ol(t=!1){return function(n,r,i,s){let o=n[r];if(Rt(o)&&R(o)&&!R(i))return!1;if(!t&&!Rt(i)&&(no(i)||(i=y(i),o=y(o)),!dt(n)&&R(o)&&!R(i)))return o.value=i,!0;const a=dt(n)&&hr(r)?Number(r)<n.length:rn(n,r),l=Reflect.set(n,r,i,s);return n===y(s)&&(a?Hs(i,o)&&mt(n,"set",r,i,o):mt(n,"add",r,i)),l}}function al(t,e){const n=rn(t,e),r=t[e],i=Reflect.deleteProperty(t,e);return i&&n&&mt(t,"delete",e,void 0,r),i}function ul(t,e){const n=Reflect.has(t,e);return(!fr(e)||!Ws.has(e))&&Z(t,"has",e),n}function cl(t){return Z(t,"iterate",dt(t)?"length":Et),Reflect.ownKeys(t)}const ll={get:el,set:sl,deleteProperty:al,has:ul,ownKeys:cl},js={get:nl,set(t,e){return process.env.NODE_ENV,!0},deleteProperty(t,e){return process.env.NODE_ENV,!0}},fl=Ds({},js,{get:rl}),dr=t=>t,on=t=>Reflect.getPrototypeOf(t);function Oe(t,e,n=!1,r=!1){t=t.__v_raw;const i=y(t),s=y(e);e!==s&&!n&&Z(i,"get",e),!n&&Z(i,"get",s);const{has:o}=on(i),a=r?dr:n?vr:Ir;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function Me(t,e=!1){const n=this.__v_raw,r=y(n),i=y(t);return t!==i&&!e&&Z(r,"has",t),!e&&Z(r,"has",i),t===i?n.has(t):n.has(t)||n.has(i)}function Ve(t,e=!1){return t=t.__v_raw,!e&&Z(y(t),"iterate",Et),Reflect.get(t,"size",t)}function xi(t){t=y(t);const e=y(this);return on(e).has.call(e,t)||(e.add(t),mt(e,"add",t,t)),this}function Ei(t,e){e=y(e);const n=y(this),{has:r,get:i}=on(n);let s=r.call(n,t);s?process.env.NODE_ENV!=="production"&&Ys(n,r,t):(t=y(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Hs(e,o)&&mt(n,"set",t,e,o):mt(n,"add",t,e),this}function Ni(t){const e=y(this),{has:n,get:r}=on(e);let i=n.call(e,t);i?process.env.NODE_ENV!=="production"&&Ys(e,n,t):(t=y(t),i=n.call(e,t));const s=r?r.call(e,t):void 0,o=e.delete(t);return i&&mt(e,"delete",t,void 0,s),o}function Pi(){const t=y(this),e=t.size!==0,n=process.env.NODE_ENV!=="production"?se(t)?new Map(t):new Set(t):void 0,r=t.clear();return e&&mt(t,"clear",void 0,void 0,n),r}function Re(t,e){return function(r,i){const s=this,o=s.__v_raw,a=y(o),l=e?dr:t?vr:Ir;return!t&&Z(a,"iterate",Et),o.forEach((c,p)=>r.call(i,l(c),l(p),s))}}function Fe(t,e,n){return function(...r){const i=this.__v_raw,s=y(i),o=se(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),p=n?dr:e?vr:Ir;return!e&&Z(s,"iterate",l?qn:Et),{next(){const{value:h,done:g}=c.next();return g?{value:h,done:g}:{value:a?[p(h[0]),p(h[1])]:p(h),done:g}},[Symbol.iterator](){return this}}}}function ft(t){return function(...e){if(process.env.NODE_ENV!=="production"){const n=e[0]?`on key "${e[0]}" `:""}return t==="delete"?!1:this}}function hl(){const t={get(s){return Oe(this,s)},get size(){return Ve(this)},has:Me,add:xi,set:Ei,delete:Ni,clear:Pi,forEach:Re(!1,!1)},e={get(s){return Oe(this,s,!1,!0)},get size(){return Ve(this)},has:Me,add:xi,set:Ei,delete:Ni,clear:Pi,forEach:Re(!1,!0)},n={get(s){return Oe(this,s,!0)},get size(){return Ve(this,!0)},has(s){return Me.call(this,s,!0)},add:ft("add"),set:ft("set"),delete:ft("delete"),clear:ft("clear"),forEach:Re(!0,!1)},r={get(s){return Oe(this,s,!0,!0)},get size(){return Ve(this,!0)},has(s){return Me.call(this,s,!0)},add:ft("add"),set:ft("set"),delete:ft("delete"),clear:ft("clear"),forEach:Re(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Fe(s,!1,!1),n[s]=Fe(s,!0,!1),e[s]=Fe(s,!1,!0),r[s]=Fe(s,!0,!0)}),[t,n,e,r]}const[pl,dl,gl,ml]=hl();function gr(t,e){const n=e?t?ml:gl:t?dl:pl;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(rn(n,i)&&i in r?n:r,i,s)}const Il={get:gr(!1,!1)},vl={get:gr(!0,!1)},Tl={get:gr(!0,!0)};function Ys(t,e,n){const r=y(n);if(r!==n&&e.call(t,r)){const i=Ls(t)}}const Qs=new WeakMap,yl=new WeakMap,Xs=new WeakMap,Zs=new WeakMap;function bl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wl(t){return t.__v_skip||!Object.isExtensible(t)?0:bl(Ls(t))}function to(t){return Rt(t)?t:mr(t,!1,ll,Il,Qs)}function eo(t){return mr(t,!0,js,vl,Xs)}function Ue(t){return mr(t,!0,fl,Tl,Zs)}function mr(t,e,n,r,i){if(!sn(t))return process.env.NODE_ENV,t;if(t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=wl(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Pt(t){return Rt(t)?Pt(t.__v_raw):!!(t&&t.__v_isReactive)}function Rt(t){return!!(t&&t.__v_isReadonly)}function no(t){return!!(t&&t.__v_isShallow)}function Je(t){return Pt(t)||Rt(t)}function y(t){const e=t&&t.__v_raw;return e?y(e):t}function kl(t){return Jc(t,"__v_skip",!0),t}const Ir=t=>sn(t)?to(t):t,vr=t=>sn(t)?eo(t):t;function R(t){return!!(t&&t.__v_isRef===!0)}function Sl(t){return R(t)?t.value:t}const _l={get:(t,e,n)=>Sl(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return R(i)&&!R(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Cl(t){return Pt(t)?t:new Proxy(t,_l)}Promise.resolve();function Tr(t){if(q(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=et(r)?Nl(r):Tr(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(et(t))return t;if(at(t))return t}}const xl=/;(?![^(]*\))/g,El=/:(.+)/;function Nl(t){const e={};return t.split(xl).forEach(n=>{if(n){const r=n.split(El);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function yr(t){let e="";if(et(t))e=t;else if(q(t))for(let n=0;n<t.length;n++){const r=yr(t[n]);r&&(e+=r+" ")}else if(at(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const G=process.env.NODE_ENV!=="production"?Object.freeze({}):{};process.env.NODE_ENV!=="production"&&Object.freeze([]);const br=()=>{},Pl=/^on[^a-z]/,Al=t=>Pl.test(t),ct=Object.assign,Ol=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Ml=Object.prototype.hasOwnProperty,P=(t,e)=>Ml.call(t,e),q=Array.isArray,Vl=t=>wr(t)==="[object Map]",Rl=t=>wr(t)==="[object Set]",U=t=>typeof t=="function",et=t=>typeof t=="string",at=t=>t!==null&&typeof t=="object",Fl=t=>at(t)&&U(t.then)&&U(t.catch),Ul=Object.prototype.toString,wr=t=>Ul.call(t),Bl=t=>wr(t)==="[object Object]",Ai=(t,e)=>!Object.is(t,e);let Oi;const Dl=()=>Oi||(Oi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),At=[];function $l(t){At.push(t)}function Ll(){At.pop()}function $(t,...e){Gs();const n=At.length?At[At.length-1].component:null,r=n&&n.appContext.config.warnHandler,i=Hl();if(r)Ot(r,n,11,[t+e.join(""),n&&n.proxy,i.map(({vnode:s})=>`at <${yo(n,s.type)}>`).join(`
`),i]);else{const s=[`[Vue warn]: ${t}`,...e];i.length&&s.push(`
`,...ql(i))}Js()}function Hl(){let t=At[At.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const r=t.component&&t.component.parent;t=r&&r.vnode}return e}function ql(t){const e=[];return t.forEach((n,r)=>{e.push(...r===0?[]:[`
`],...zl(n))}),e}function zl({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",r=t.component?t.component.parent==null:!1,i=` at <${yo(t.component,t.type,r)}`,s=">"+n;return t.props?[i,...Kl(t.props),s]:[i+s]}function Kl(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(r=>{e.push(...ro(r,t[r]))}),n.length>3&&e.push(" ..."),e}function ro(t,e,n){return et(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:R(e)?(e=ro(t,y(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):U(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=y(e),n?e:[`${t}=`,e])}const io={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function Ot(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){so(s,e,n)}return i}function zn(t,e,n,r){if(U(t)){const s=Ot(t,e,n,r);return s&&Fl(s)&&s.catch(o=>{so(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(zn(t[s],e,n,r));return i}function so(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=process.env.NODE_ENV!=="production"?io[n]:n;for(;s;){const c=s.ec;if(c){for(let p=0;p<c.length;p++)if(c[p](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Ot(l,null,10,[t,o,a]);return}}Gl(t,n,i,r)}function Gl(t,e,n,r=!0){if(process.env.NODE_ENV!=="production"){const i=io[e];if(n&&$l(n),$(`Unhandled error${i?` during execution of ${i}`:""}`),n&&Ll(),r)throw t}}let We=!1,Kn=!1;const tt=[];let pt=0;const oe=[];let zt=null,wt=0;const ae=[];let it=null,kt=0;const oo=Promise.resolve();let kr=null,Gn=null;const Jl=100;function Wl(t){const e=kr||oo;return t?e.then(this?t.bind(this):t):e}function jl(t){let e=pt+1,n=tt.length;for(;e<n;){const r=e+n>>>1;pe(tt[r])<t?e=r+1:n=r}return e}function ao(t){(!tt.length||!tt.includes(t,We&&t.allowRecurse?pt+1:pt))&&t!==Gn&&(t.id==null?tt.push(t):tt.splice(jl(t.id),0,t),uo())}function uo(){!We&&!Kn&&(Kn=!0,kr=oo.then(ho))}function co(t,e,n,r){q(t)?n.push(...t):(!e||!e.includes(t,t.allowRecurse?r+1:r))&&n.push(t),uo()}function Yl(t){co(t,zt,oe,wt)}function lo(t){co(t,it,ae,kt)}function fo(t,e=null){if(oe.length){for(Gn=e,zt=[...new Set(oe)],oe.length=0,process.env.NODE_ENV!=="production"&&(t=t||new Map),wt=0;wt<zt.length;wt++)process.env.NODE_ENV!=="production"&&Sr(t,zt[wt])||zt[wt]();zt=null,wt=0,Gn=null,fo(t,e)}}function Ql(t){if(ae.length){const e=[...new Set(ae)];if(ae.length=0,it){it.push(...e);return}for(it=e,process.env.NODE_ENV!=="production"&&(t=t||new Map),it.sort((n,r)=>pe(n)-pe(r)),kt=0;kt<it.length;kt++)process.env.NODE_ENV!=="production"&&Sr(t,it[kt])||it[kt]();it=null,kt=0}}const pe=t=>t.id==null?1/0:t.id;function ho(t){Kn=!1,We=!0,process.env.NODE_ENV!=="production"&&(t=t||new Map),fo(t),tt.sort((n,r)=>pe(n)-pe(r));const e=process.env.NODE_ENV!=="production"?n=>Sr(t,n):br;try{for(pt=0;pt<tt.length;pt++){const n=tt[pt];if(n&&n.active!==!1){if(process.env.NODE_ENV!=="production"&&e(n))continue;Ot(n,null,14)}}}finally{pt=0,tt.length=0,Ql(t),We=!1,kr=null,(tt.length||oe.length||ae.length)&&ho(t)}}function Sr(t,e){if(!t.has(e))t.set(e,1);else{const n=t.get(e);if(n>Jl){const r=e.ownerInstance,i=r&&To(r.type);return $(`Maximum recursive updates exceeded${i?` in component <${i}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else t.set(e,n+1)}}const ne=new Set;process.env.NODE_ENV!=="production"&&(Dl().__VUE_HMR_RUNTIME__={createRecord:Cn(Xl),rerender:Cn(Zl),reload:Cn(tf)});const je=new Map;function Xl(t,e){return je.has(t)?!1:(je.set(t,{initialDef:ue(e),instances:new Set}),!0)}function ue(t){return bo(t)?t.__vccOpts:t}function Zl(t,e){const n=je.get(t);!n||(n.initialDef.render=e,[...n.instances].forEach(r=>{e&&(r.render=e,ue(r.type).render=e),r.renderCache=[],r.update()}))}function tf(t,e){const n=je.get(t);if(!n)return;e=ue(e),Mi(n.initialDef,e);const r=[...n.instances];for(const i of r){const s=ue(i.type);ne.has(s)||(s!==n.initialDef&&Mi(s,e),ne.add(s)),i.appContext.optionsCache.delete(i.type),i.ceReload?(ne.add(s),i.ceReload(e.styles),ne.delete(s)):i.parent?(ao(i.parent.update),i.parent.type.__asyncLoader&&i.parent.ceReload&&i.parent.ceReload(e.styles)):i.appContext.reload?i.appContext.reload():typeof window<"u"&&window.location.reload()}lo(()=>{for(const i of r)ne.delete(ue(i.type))})}function Mi(t,e){ct(t,e);for(const n in t)n!=="__file"&&!(n in e)&&delete t[n]}function Cn(t){return(e,n)=>{try{return t(e,n)}catch{}}}let Ct=null,ef=null;const nf=t=>t.__isSuspense;function rf(t,e){e&&e.pendingBranch?q(t)?e.effects.push(...t):e.effects.push(t):lo(t)}const Vi={};function sf(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=G){process.env.NODE_ENV!=="production"&&!e&&(n!==void 0&&$('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),r!==void 0&&$('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const a=k=>{$("Invalid watch source: ",k,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},l=Jt;let c,p=!1,h=!1;if(R(t)?(c=()=>t.value,p=no(t)):Pt(t)?(c=()=>t,r=!0):q(t)?(h=!0,p=t.some(Pt),c=()=>t.map(k=>{if(R(k))return k.value;if(Pt(k))return Kt(k);if(U(k))return Ot(k,l,2);process.env.NODE_ENV!=="production"&&a(k)})):U(t)?e?c=()=>Ot(t,l,2):c=()=>{if(!(l&&l.isUnmounted))return g&&g(),zn(t,l,3,[v])}:(c=br,process.env.NODE_ENV!=="production"&&a(t)),e&&r){const k=c;c=()=>Kt(k())}let g,v=k=>{g=N.onStop=()=>{Ot(k,l,4)}},I=h?[]:Vi;const b=()=>{if(!!N.active)if(e){const k=N.run();(r||p||(h?k.some((ke,Xt)=>Ai(ke,I[Xt])):Ai(k,I)))&&(g&&g(),zn(e,l,3,[k,I===Vi?void 0:I,v]),I=k)}else N.run()};b.allowRecurse=!!e;let K;i==="sync"?K=b:i==="post"?K=()=>Ui(b,l&&l.suspense):K=()=>{!l||l.isMounted?Yl(b):b()};const N=new Xc(c,K);return process.env.NODE_ENV!=="production"&&(N.onTrack=s,N.onTrigger=o),e?n?b():I=N.run():i==="post"?Ui(N.run.bind(N),l&&l.suspense):N.run(),()=>{N.stop(),l&&l.scope&&Ol(l.scope.effects,N)}}function of(t,e,n){const r=this.proxy,i=et(t)?t.includes(".")?af(r,t):()=>r[t]:t.bind(r,r);let s;U(e)?s=e:(s=e.handler,n=e);const o=Jt;Di(this);const a=sf(i,s.bind(r),n);return o?Di(o):_f(),a}function af(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Kt(t,e){if(!at(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),R(t))Kt(t.value,e);else if(q(t))for(let n=0;n<t.length;n++)Kt(t[n],e);else if(Rl(t)||Vl(t))t.forEach(n=>{Kt(n,e)});else if(Bl(t))for(const n in t)Kt(t[n],e);return t}let uf=!0;function cf(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>Ye(l,c,o,!0)),Ye(l,e,o)),s.set(e,l),l}function Ye(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Ye(t,s,n,!0),i&&i.forEach(o=>Ye(t,o,n,!0));for(const o in e)if(r&&o==="expose")process.env.NODE_ENV!=="production"&&$('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const a=lf[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const lf={data:Ri,props:St,emits:St,methods:St,computed:St,beforeCreate:V,created:V,beforeMount:V,mounted:V,beforeUpdate:V,updated:V,beforeDestroy:V,beforeUnmount:V,destroyed:V,unmounted:V,activated:V,deactivated:V,errorCaptured:V,serverPrefetch:V,components:St,directives:St,watch:hf,provide:Ri,inject:ff};function Ri(t,e){return e?t?function(){return ct(U(t)?t.call(this,this):t,U(e)?e.call(this,this):e)}:e:t}function ff(t,e){return St(Fi(t),Fi(e))}function Fi(t){if(q(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function V(t,e){return t?[...new Set([].concat(t,e))]:e}function St(t,e){return t?ct(ct(Object.create(null),t),e):e}function hf(t,e){if(!t)return e;if(!e)return t;const n=ct(Object.create(null),t);for(const r in e)n[r]=V(t[r],e[r]);return n}const Ui=rf,pf=t=>t.__isTeleport,df=Symbol(),po=Symbol(process.env.NODE_ENV!=="production"?"Fragment":void 0),gf=Symbol(process.env.NODE_ENV!=="production"?"Text":void 0),mf=Symbol(process.env.NODE_ENV!=="production"?"Comment":void 0);Symbol(process.env.NODE_ENV!=="production"?"Static":void 0);let Bi=null;function If(t){return t?t.__v_isVNode===!0:!1}const vf=(...t)=>Io(...t),go="__vInternal",mo=({key:t})=>t??null,He=({ref:t,ref_key:e,ref_for:n})=>t!=null?et(t)||R(t)||U(t)?{i:Ct,r:t,k:e,f:!!n}:t:null;function Tf(t,e=null,n=null,r=0,i=null,s=t===po?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&mo(e),ref:e&&He(e),scopeId:ef,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(_r(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=et(n)?8:16),process.env.NODE_ENV!=="production"&&l.key!==l.key&&$("VNode created with invalid key (NaN). VNode type:",l.type),!o&&Bi&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Bi.push(l),l}const yf=process.env.NODE_ENV!=="production"?vf:Io;function Io(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===df)&&(process.env.NODE_ENV!=="production"&&!t&&$(`Invalid vnode type when creating vnode: ${t}.`),t=mf),If(t)){const a=Qe(t,e,!0);return n&&_r(a,n),a}if(bo(t)&&(t=t.__vccOpts),e){e=bf(e);let{class:a,style:l}=e;a&&!et(a)&&(e.class=yr(a)),at(l)&&(Je(l)&&!q(l)&&(l=ct({},l)),e.style=Tr(l))}const o=et(t)?1:nf(t)?128:pf(t)?64:at(t)?4:U(t)?2:0;return process.env.NODE_ENV!=="production"&&o&4&&Je(t)&&(t=y(t),$("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,t)),Tf(t,e,n,r,i,o,s,!0)}function bf(t){return t?Je(t)||go in t?ct({},t):t:null}function Qe(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?kf(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&mo(a),ref:e&&e.ref?n&&i?q(i)?i.concat(He(e)):[i,He(e)]:He(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:process.env.NODE_ENV!=="production"&&s===-1&&q(o)?o.map(vo):o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==po?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qe(t.ssContent),ssFallback:t.ssFallback&&Qe(t.ssFallback),el:t.el,anchor:t.anchor}}function vo(t){const e=Qe(t);return q(t.children)&&(e.children=t.children.map(vo)),e}function wf(t=" ",e=0){return yf(gf,null,t,e)}function _r(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(q(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),_r(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(go in e)?e._ctx=Ct:i===3&&Ct&&(Ct.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else U(e)?(e={default:e,_ctx:Ct},n=32):(e=String(e),r&64?(n=16,e=[wf(e)]):n=8);t.children=e,t.shapeFlag|=n}function kf(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=yr([e.class,r.class]));else if(i==="style")e.style=Tr([e.style,r.style]);else if(Al(i)){const s=e[i],o=r[i];o&&s!==o&&!(q(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}const Jn=t=>t?Cf(t)?xf(t)||t.proxy:Jn(t.parent):null,Xe=ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>process.env.NODE_ENV!=="production"?Ue(t.props):t.props,$attrs:t=>process.env.NODE_ENV!=="production"?Ue(t.attrs):t.attrs,$slots:t=>process.env.NODE_ENV!=="production"?Ue(t.slots):t.slots,$refs:t=>process.env.NODE_ENV!=="production"?Ue(t.refs):t.refs,$parent:t=>Jn(t.parent),$root:t=>Jn(t.root),$emit:t=>t.emit,$options:t=>__VUE_OPTIONS_API__?cf(t):t.type,$forceUpdate:t=>()=>ao(t.update),$nextTick:t=>Wl.bind(t.proxy),$watch:t=>__VUE_OPTIONS_API__?of.bind(t):br}),Sf={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;if(process.env.NODE_ENV!=="production"&&e==="__isVue")return!0;if(process.env.NODE_ENV!=="production"&&r!==G&&r.__isScriptSetup&&P(r,e))return r[e];let c;if(e[0]!=="$"){const v=o[e];if(v!==void 0)switch(v){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(r!==G&&P(r,e))return o[e]=1,r[e];if(i!==G&&P(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&P(c,e))return o[e]=3,s[e];if(n!==G&&P(n,e))return o[e]=4,n[e];(!__VUE_OPTIONS_API__||uf)&&(o[e]=0)}}const p=Xe[e];let h,g;if(p)return e==="$attrs"&&(Z(t,"get",e),process.env.NODE_ENV!=="production"&&void 0),p(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==G&&P(n,e))return o[e]=4,n[e];if(g=l.config.globalProperties,P(g,e))return g[e];process.env.NODE_ENV!=="production"&&Ct&&(!et(e)||e.indexOf("__v")!==0)&&(i!==G&&(e[0]==="$"||e[0]==="_")&&P(i,e)?$(`Property ${JSON.stringify(e)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):t===Ct&&$(`Property ${JSON.stringify(e)} was accessed during render but is not defined on instance.`))},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return i!==G&&P(i,e)?(i[e]=n,!0):r!==G&&P(r,e)?(r[e]=n,!0):P(t.props,e)?(process.env.NODE_ENV!=="production"&&$(`Attempting to mutate prop "${e}". Props are readonly.`,t),!1):e[0]==="$"&&e.slice(1)in t?(process.env.NODE_ENV!=="production"&&$(`Attempting to mutate public property "${e}". Properties starting with $ are reserved and readonly.`,t),!1):(process.env.NODE_ENV!=="production"&&e in t.appContext.config.globalProperties?Object.defineProperty(s,e,{enumerable:!0,configurable:!0,value:n}):s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==G&&P(t,o)||e!==G&&P(e,o)||(a=s[0])&&P(a,o)||P(r,o)||P(Xe,o)||P(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?this.set(t,e,n.get(),null):n.value!=null&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};process.env.NODE_ENV!=="production"&&(Sf.ownKeys=t=>($("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(t)));let Jt=null;const Di=t=>{Jt=t,t.scope.on()},_f=()=>{Jt&&Jt.scope.off(),Jt=null};function Cf(t){return t.vnode.shapeFlag&4}function xf(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Cl(kl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Xe)return Xe[n](t)}}))}const Ef=/(?:^|[-_])(\w)/g,Nf=t=>t.replace(Ef,e=>e.toUpperCase()).replace(/[-_]/g,"");function To(t){return U(t)&&t.displayName||t.name}function yo(t,e,n=!1){let r=To(e);if(!r&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(r=i[1])}if(!r&&t&&t.parent){const i=s=>{for(const o in s)if(s[o]===e)return o};r=i(t.components||t.parent.type.components)||i(t.appContext.components)}return r?Nf(r):n?"App":"Anonymous"}function bo(t){return U(t)&&"__vccOpts"in t}Symbol(process.env.NODE_ENV!=="production"?"ssrContext":"");function xn(t){return!!(t&&t.__v_isShallow)}function Pf(){if(process.env.NODE_ENV==="production"||typeof window>"u")return;const t={style:"color:#3ba776"},e={style:"color:#0b1bc9"},n={style:"color:#b62e24"},r={style:"color:#9d288c"},i={header(h){return at(h)?h.__isVue?["div",t,"VueInstance"]:R(h)?["div",{},["span",t,p(h)],"<",a(h.value),">"]:Pt(h)?["div",{},["span",t,xn(h)?"ShallowReactive":"Reactive"],"<",a(h),`>${Rt(h)?" (readonly)":""}`]:Rt(h)?["div",{},["span",t,xn(h)?"ShallowReadonly":"Readonly"],"<",a(h),">"]:null:null},hasBody(h){return h&&h.__isVue},body(h){if(h&&h.__isVue)return["div",{},...s(h.$)]}};function s(h){const g=[];h.type.props&&h.props&&g.push(o("props",y(h.props))),h.setupState!==G&&g.push(o("setup",h.setupState)),h.data!==G&&g.push(o("data",y(h.data)));const v=l(h,"computed");v&&g.push(o("computed",v));const I=l(h,"inject");return I&&g.push(o("injected",I)),g.push(["div",{},["span",{style:r.style+";opacity:0.66"},"$ (internal): "],["object",{object:h}]]),g}function o(h,g){return g=ct({},g),Object.keys(g).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},h],["div",{style:"padding-left:1.25em"},...Object.keys(g).map(v=>["div",{},["span",r,v+": "],a(g[v],!1)])]]:["span",{}]}function a(h,g=!0){return typeof h=="number"?["span",e,h]:typeof h=="string"?["span",n,JSON.stringify(h)]:typeof h=="boolean"?["span",r,h]:at(h)?["object",{object:g?y(h):h}]:["span",n,String(h)]}function l(h,g){const v=h.type;if(U(v))return;const I={};for(const b in h.ctx)c(v,b,g)&&(I[b]=h.ctx[b]);return I}function c(h,g,v){const I=h[v];if(q(I)&&I.includes(g)||at(I)&&g in I||h.extends&&c(h.extends,g,v)||h.mixins&&h.mixins.some(b=>c(b,g,v)))return!0}function p(h){return xn(h)?"ShallowRef":h.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(i):window.devtoolsFormatters=[i]}function Af(){Pf()}process.env.NODE_ENV!=="production"&&Af();function Of(t){const e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=t%12;return e[n]}function Mf(t){const e=Math.floor(t/12)-2;return Of(t)+e.toString()}const Vf=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,Rf={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};function Ff(t){const e=Vf.exec(t);if(!e)return-1;const n=e[1],r=e[2];return Rf[n.toLowerCase()]+(parseInt(r,10)+2)*12}function Wn(t,e,n,r){return`${t} // ${e} // ${n} // ${r}`}function wo(t,e,n){return`${t} // ${e} // ${n}`}function Uf(t){const e=de(t);return wo(e.manufacturerName,e.pluginFormatName,e.name)}function de(t){const e=t.split(" // ");if(e.length<4)throw new Error("Invalid audio plugin tuneflow id.");return{name:e[2],manufacturerName:e[0],pluginFormatName:e[1],pluginVersion:e[3]}}function ko(t,e){return t===e}function So(t,e){const n=de(t),r=de(e);if(E.keys(n).length!==E.keys(r).length)return!1;for(const i of E.keys(n))if(i!=="pluginVersion"&&n[i]!==r[i])return!1;return!0}class Bf{tempoInfos=[];currentTempoIndex=0;ticksPerSecondAtTempoTick={};constructor(e,n){for(const r of e)this.tempoInfos.push({ticks:r.getTicks(),time:r.getTime()}),this.ticksPerSecondAtTempoTick[r.getTicks()]=r.getBpm()*n/60}secondsToTick(e){let n=this.tempoInfos[this.currentTempoIndex];for(;this.tempoInfos[this.currentTempoIndex+1]&&this.tempoInfos[this.currentTempoIndex+1].time<=e;)this.currentTempoIndex+=1,n=this.tempoInfos[this.currentTempoIndex];for(;n.time>e&&this.currentTempoIndex>0;)this.currentTempoIndex-=1,n=this.tempoInfos[this.currentTempoIndex];n.time>e&&(n=this.tempoInfos[0]);const r=e-n.time,i=this.ticksPerSecondAtTempoTick[n.ticks];return Math.round(n.ticks+r*i)}tickToSeconds(e){let n=this.tempoInfos[this.currentTempoIndex];for(;this.tempoInfos[this.currentTempoIndex+1]&&this.tempoInfos[this.currentTempoIndex+1].ticks<=e;)this.currentTempoIndex+=1,n=this.tempoInfos[this.currentTempoIndex];for(;n.ticks>e&&this.currentTempoIndex>0;)this.currentTempoIndex-=1,n=this.tempoInfos[this.currentTempoIndex];n.ticks>e&&(n=this.tempoInfos[0]);const r=e-n.ticks,i=this.ticksPerSecondAtTempoTick[n.ticks];return n.time+r/i}}function _o(t){return t>-100?Math.exp((t-6)*(1/20)):0}function Df(t){return t<=0?-100:20*Math.log10(t)}function $f(t){return t>0?20*Math.log(t)+6:-100}function Lf(t){return t>0?Math.pow(10,(20*Math.log(t)+6)*(1/20)):0}function Hf(t){return t>0?Math.exp((20*Math.log10(t)-6)*(1/20)):0}function qf(t,e,n,r,i){return(t-e)/(n-e)*(i-r)+r}function zf(t){return 440*Math.pow(2,(t-69)/12)}function Kf(t){return Je(t)||R(t)?y(t):t}var Co=(t=>(t[t.BassDrum2=35]="BassDrum2",t[t.BassDrum1=36]="BassDrum1",t[t.SideStick=37]="SideStick",t[t.SnareDrum1=38]="SnareDrum1",t[t.HandClap=39]="HandClap",t[t.SnareDrum2=40]="SnareDrum2",t[t.LowTom2=41]="LowTom2",t[t.ClosedHiHat=42]="ClosedHiHat",t[t.LowTom1=43]="LowTom1",t[t.PedalHiHat=44]="PedalHiHat",t[t.MidTom2=45]="MidTom2",t[t.OpenHiHat=46]="OpenHiHat",t[t.MidTom1=47]="MidTom1",t[t.HighTom2=48]="HighTom2",t[t.CrashCymbal1=49]="CrashCymbal1",t[t.HighTom1=50]="HighTom1",t[t.RideCymbal1=51]="RideCymbal1",t[t.ChineseCymbal=52]="ChineseCymbal",t[t.RideBell=53]="RideBell",t[t.Tambourine=54]="Tambourine",t[t.SplashCymbal=55]="SplashCymbal",t[t.Cowbell=56]="Cowbell",t[t.CrashCymbal2=57]="CrashCymbal2",t[t.VibraSlap=58]="VibraSlap",t[t.RideCymbal2=59]="RideCymbal2",t[t.HighBongo=60]="HighBongo",t[t.LowBongo=61]="LowBongo",t[t.MuteHighConga=62]="MuteHighConga",t[t.OpenHighConga=63]="OpenHighConga",t[t.LowConga=64]="LowConga",t[t.HighTimbale=65]="HighTimbale",t[t.LowTimbale=66]="LowTimbale",t[t.HighAgogo=67]="HighAgogo",t[t.LowAgogo=68]="LowAgogo",t[t.Cabasa=69]="Cabasa",t[t.Maracas=70]="Maracas",t[t.ShortWhistle=71]="ShortWhistle",t[t.LongWhistle=72]="LongWhistle",t[t.ShortGuiro=73]="ShortGuiro",t[t.LongGuiro=74]="LongGuiro",t[t.Claves=75]="Claves",t[t.HighWoodBlock=76]="HighWoodBlock",t[t.LowWoodBlock=77]="LowWoodBlock",t[t.MuteCuica=78]="MuteCuica",t[t.OpenCuica=79]="OpenCuica",t[t.MuteTriangle=80]="MuteTriangle",t[t.OpenTriangle=81]="OpenTriangle",t[t.Shaker=82]="Shaker",t))(Co||{});class Te{name;manufacturerName;pluginFormatName;pluginVersion;isEnabled=!0;localInstanceIdInternal;base64StatesInternal;constructor(e,n,r,i){this.name=e,this.manufacturerName=n,this.pluginFormatName=r,this.pluginVersion=i,this.localInstanceIdInternal=Te.generateAudioPluginInstanceIdInternal()}getTuneflowId(){return Wn(this.manufacturerName,this.pluginFormatName,this.name,this.pluginVersion)}clone(e){const n=e.createAudioPlugin(this.getTuneflowId());return n.setIsEnabled(this.isEnabled),n}matchesTfId(e){return ko(e,this.getTuneflowId())}matchesTfIdIgnoreVersion(e){return So(e,this.getTuneflowId())}getInstanceId(){return this.localInstanceIdInternal}toJSON(){return{name:this.name,manufacturerName:this.manufacturerName,pluginFormatName:this.pluginFormatName,pluginVersion:this.pluginVersion,isEnabled:this.isEnabled}}setIsEnabled(e){this.isEnabled=e}getIsEnabled(){return this.isEnabled}setBase64States(e){this.base64StatesInternal=e}getBase64States(){return this.base64StatesInternal}static generateAudioPluginInstanceIdInternal(){return nn(10)}static DEFAULT_SYNTH_TFID=Wn("TuneFlow","VST3","TFSynth","1.0.0")}class st{pitch;velocity;startTick;endTick;idInternal;clipInternal;constructor({pitch:e,velocity:n,startTick:r,endTick:i,id:s,clip:o}){this.pitch=e,this.velocity=n,this.startTick=r,this.endTick=i,this.idInternal=s,this.clipInternal=o}getPitch(){return this.pitch}setPitch(e){if(!st.isValidPitch(e))throw new Error(`Invalid pitch ${e}`);this.pitch=e}getVelocity(){return this.velocity}setVelocity(e){this.velocity=Math.max(Math.min(e,127),0)}getStartTick(){return this.startTick}getEndTick(){return this.endTick}setStartTick(e){this.startTick=e}setEndTick(e){this.endTick=e}equals(e){return this.startTick===e.getStartTick()&&this.endTick===e.getEndTick()&&this.pitch===e.getPitch()&&this.velocity===e.getVelocity()}deleteFromParent(){!this.clipInternal||this.clipInternal.deleteNote(this)}moveNote(e){if(e===0)return;const n=this.clipInternal;n&&n.deleteNote(this),this.startTick=Math.max(0,this.startTick+e),this.endTick=this.endTick+e,!!this.isRangeValid()&&n&&n.orderedInsertNote(n.getRawNotes(),this)}adjustLeft(e){if(e===0)return;const n=this.clipInternal;n&&n.deleteNote(this),this.startTick+=e,!!this.isRangeValid()&&n&&n.orderedInsertNote(n.getRawNotes(),this)}adjustLeftTo(e){this.adjustLeft(e-this.startTick)}adjustRight(e){this.endTick+=e,this.isRangeValid()||this.deleteFromParent()}adjustRightTo(e){this.adjustRight(e-this.endTick)}isRangeValid(){return st.isNoteRangeValid(this.startTick,this.endTick)}static isValidPitch(e){return e>=0&&e<=127&&Number.isInteger(e)}static isNoteRangeValid(e,n){return n>=0&&e<=n&&Number.isInteger(e)&&Number.isInteger(n)}static isNoteVelocityValid(e){return e>=0&&e<=127&&Number.isInteger(e)}getClip(){return this.clipInternal}adjustPitch(e){this.pitch=this.pitch+e,st.isValidPitch(this.pitch)||this.deleteFromParent()}getId(){return this.idInternal}}var Gt=(t=>(t[t.MIDI_CLIP=1]="MIDI_CLIP",t[t.AUDIO_CLIP=2]="AUDIO_CLIP",t))(Gt||{});class W{song;track;id;notes;clipStartTick=0;clipEndTick=0;nextNoteIdInternal=1;type;audioClipData;constructor({song:e,type:n,clipStartTick:r,id:i=W.generateClipIdInternal(),track:s=void 0,clipEndTick:o=void 0,audioClipData:a=void 0}){if(this.song=e,this.track=s,this.id=i,this.type=n,this.notes=[],n===2){if(!a)throw new Error("Audio clip data must be provided for audio clips.");this.audioClipData={audioFilePath:a.audioFilePath,startTick:a.startTick,duration:a.duration},r=E.isNumber(r)?Math.max(r,a.startTick):a.startTick;const l=this.getAudioEndTick();(!E.isNumber(o)||l<o)&&(o=l),this.clipStartTick=r,this.clipEndTick=o}else if(n===1){if(this.clipStartTick=r,!E.isNumber(o))throw new Error("clip end tick must be provided when creating MIDI clip.");this.clipEndTick=o}}getId(){return this.id}getType(){return this.type}getAudioClipData(){return this.audioClipData}setAudioFile(e,n,r){this.audioClipData?(this.audioClipData.audioFilePath=e,this.audioClipData.startTick=n,this.audioClipData.duration=r):this.audioClipData={audioFilePath:e,startTick:n,duration:r}}getNotes(){return W.getNotesInRange(this.notes,this.clipStartTick,this.clipEndTick)}getRawNotes(){return this.notes}getDuration(){return this.song.tickToSeconds(this.clipEndTick)-this.song.tickToSeconds(this.clipStartTick)}getAudioDuration(){if(!(this.type!==2||!this.audioClipData))return this.audioClipData.duration}getClipStartTick(){return this.clipStartTick}getClipEndTick(){return this.clipEndTick}getTrack(){return this.track}createNote({pitch:e,velocity:n,startTick:r,endTick:i,updateClipRange:s=!0,resolveClipConflict:o=!0}){if(this.type!==1||!st.isValidPitch(e)||!st.isNoteRangeValid(r,i)||!st.isNoteVelocityValid(n))return null;const a=new st({pitch:e,velocity:n,startTick:r,endTick:i,id:this.getNextNoteIdInternal()});return r<this.clipStartTick&&s&&this.adjustClipLeft(r,o),i>this.clipEndTick&&s&&this.adjustClipRight(i,o),this.orderedInsertNote(this.notes,a),a}getNoteIndexInternal(e){const n=x.lt(this.notes,e,(r,i)=>r.getStartTick()-i.getStartTick());for(let r=Math.max(0,n);r<this.notes.length;r+=1){const i=this.notes[r];if(i&&i===e)return r;if(i&&i.getStartTick()>e.getStartTick())break}return-1}deleteNote(e){const n=this.getNoteIndexInternal(e);n>=0&&this.deleteNoteAt(n)}deleteNoteAt(e){const n=this.notes[e];n&&(n.clipInternal=null,this.notes.splice(e,1))}orderedInsertNote(e,n){if(this.type!==1||n.getClip()===this)return;const r=x.ge(e,n,(i,s)=>i.getStartTick()-s.getStartTick());r<0?e.push(n):e.splice(r,0,n),n.clipInternal=this}adjustClipLeft(e,n=!0){e=Math.max(0,e),this.type===2&&this.audioClipData&&(e=Math.max(e,this.audioClipData.startTick)),e>this.clipEndTick?this.deleteFromParent(!0):(n&&this.track&&this.track.resolveClipConflictInternal(this.getId(),Math.min(this.clipStartTick,e),this.clipEndTick),this.clipStartTick=e)}adjustClipRight(e,n=!0){if(this.type===2){const r=this.getAudioEndTick();E.isNumber(r)&&(e=Math.min(e,r))}e<this.clipStartTick||e<0?this.deleteFromParent(!0):(n&&this.track&&this.track.resolveClipConflictInternal(this.getId(),this.clipStartTick,Math.max(this.clipEndTick,e)),this.clipEndTick=e)}moveClip(e,n){const r=Math.max(0,this.clipStartTick+e),i=this.clipEndTick+e;if(i<0){this.deleteFromParent(!0);return}if(this.track&&this.track.resolveClipConflictInternal(this.getId(),r,i),this.track){const a=this.track.getClipIndex(this);this.track.deleteClipAt(a,!1)}const s=this.clipStartTick,o=this.clipEndTick;if(this.type===1){this.clipStartTick=r,this.clipEndTick=i;for(const a of this.notes)a.setStartTick(a.getStartTick()+e),a.setEndTick(a.getEndTick()+e)}else if(this.type===2){if(!this.audioClipData)throw new Error("Cannot move audio clip without audio data");const a=this.song,l=a.tickToSeconds(this.audioClipData.startTick),c=a.tickToSeconds(s),h=a.tickToSeconds(o)-c,g=c-l,v=a.tickToSeconds(this.clipStartTick+e),I=v-g,b=v+h;if(this.clipStartTick=r,this.clipEndTick=a.secondsToTick(b),this.audioClipData.startTick=a.secondsToTick(I),this.clipEndTick<0){this.deleteFromParent(!0);return}}this.track&&(this.track.orderedInsertClipInternal(this),n&&this.track.getAutomation().moveAllPointsWithinRange(s,o,e,0))}moveClipTo(e,n){const r=e-this.getClipStartTick();this.moveClip(r,n)}deleteFromParent(e){this.track&&(this.track.deleteClip(this,e),this.track=void 0)}getNotesByIds(e){const n=new Set(e),r=[];for(const i of this.notes)n.has(i.getId())&&r.push(i);return r}getAudioEndTick(){if(this.type!==2||!this.audioClipData)return;const e=this.getAudioDuration();if(!E.isNumber(e))return;const n=this.song.tickToSeconds(this.audioClipData.startTick);return this.song.secondsToTick(n+e)}static getNotesInRange(e,n,r){return W.getNotesInRangeImpl(e,n,r,i=>({getStartTick:()=>i}),i=>i.getStartTick(),i=>i.getEndTick())}static getNotesInRangeImpl(e,n,r,i,s,o){let a=Math.max(0,x.lt(e,i(n),(c,p)=>s(c)-s(p)));for(;e[a]&&!W.isNoteInClip(s(e[a]),o(e[a]),n,r);)a+=1;if(a>=e.length)return[];let l=Math.min(e.length-1,x.gt(e,i(r),(c,p)=>s(c)-s(p)));for(;e[l]&&!W.isNoteInClip(s(e[l]),o(e[l]),n,r);)l-=1;return l<0?[]:l<a?[]:e.slice(a,l+1)}static isNoteInClip(e,n,r,i){return(e>=r||r===0&&e<=0)&&e<i&&n>e}static getNotePlayableRange(e,n,r,i){if(!W.isNoteInClip(e,n,r,i))return null;const s=Math.max(e,r),o=Math.min(n,i);return s>o?null:{startTick:s,endTick:o}}trimConflictPartInternal(e,n){const r=Math.max(e,this.getClipStartTick()),i=Math.min(n,this.getClipEndTick());if(!(r>i)&&!(r>this.getClipEndTick()||i<this.getClipStartTick())){if(i>=this.getClipEndTick()&&r<=this.getClipStartTick()){this.deleteFromParent(!0);return}if(i<this.getClipEndTick()&&r>this.getClipStartTick()){const s=i+1,o=this.getClipEndTick();if(this.adjustClipRight(r-1,!1),this.track){if(this.type===1){const a=this.track.createMIDIClip({clipStartTick:s,clipEndTick:o}),l=W.getNotesInRange(this.notes,s,o);for(const c of l)a.createNote({pitch:c.getPitch(),velocity:c.getVelocity(),startTick:c.getStartTick(),endTick:c.getEndTick(),updateClipRange:!1,resolveClipConflict:!1})}else if(this.type===2){const a=this.audioClipData;this.track.createAudioClip({clipStartTick:s,clipEndTick:o,audioClipData:{audioFilePath:a.audioFilePath,startTick:a.startTick,duration:a.duration}})}}return}r>this.getClipStartTick()&&r<=this.getClipEndTick()?this.adjustClipRight(r-1,!1):i<this.getClipEndTick()&&i>=this.getClipStartTick()&&this.adjustClipLeft(i+1,!1)}}getNextNoteIdInternal(){const e=this.nextNoteIdInternal;return this.nextNoteIdInternal>=2147483647?this.nextNoteIdInternal=1:this.nextNoteIdInternal+=1,e}static generateClipIdInternal(){return nn(10)}}var Ze=(t=>(t[t.UNDEFINED=0]="UNDEFINED",t[t.VOLUME=1]="VOLUME",t[t.PAN=2]="PAN",t[t.AUDIO_PLUGIN=3]="AUDIO_PLUGIN",t))(Ze||{});class J{type;pluginInstanceId;paramId;constructor(e,n,r){this.type=e,this.pluginInstanceId=n,this.paramId=r}getType(){return this.type}setType(e){this.type=e}getPluginInstanceId(){return this.pluginInstanceId}setPluginInstanceId(e){this.pluginInstanceId=e}getParamId(){return this.paramId}setParamId(e){this.paramId=e}equals(e){return J.areAutomationTargetsEqual(this.getType(),e.getType(),this.getPluginInstanceId(),e.getPluginInstanceId(),this.getParamId(),e.getParamId())}clone(){return new J(this.type,this.pluginInstanceId,this.paramId)}toTfAutomationTargetId(){return J.encodeAutomationTarget(this.type,this.pluginInstanceId,this.paramId)}static fromTfAutomationTargetId(e){return J.decodeAutomationTarget(e)}static encodeAutomationTarget(e,n,r){return e===3?`${e}^^${n}^^${r}`:`${e}`}static decodeAutomationTarget(e){const n=e.split("^^");if(n.length===0)throw new Error(`Invalid automation target id: ${e}`);const r=Number(n[0]);return n.length>2?new J(r,n[1],n[2]):new J(r)}static areAutomationTargetsEqual(e,n,r,i,s,o){return J.encodeAutomationTarget(e,r,s)===J.encodeAutomationTarget(n,i,o)}}class Mt{points=[];disabled=!1;nextPointIdInternal=1;getDisabled(){return this.disabled}setDisabled(e){this.disabled=e}getPoints(){return this.points}getPointsInRange(e,n){return Mt.getPointsInRangeImpl(this.points,e,n)}static getPointsInRangeImpl(e,n,r){const i=x.ge(e,{tick:n},(o,a)=>o.tick-a.tick),s=[];for(let o=i;o<e.length;o+=1){const a=e[o];if(a.tick>r)break;s.push(a)}return s}addPoint(e,n,r=!1){const i={tick:e,value:Math.max(0,Math.min(1,n)),id:this.getNextPointIdInternal()};return Mt.orderedInsertPointInternal(this.points,i,r),i}removePoints(e){const n=new Set(e);for(let r=this.points.length-1;r>=0;r-=1){const i=this.points[r];n.has(i.id)&&this.points.splice(r,1)}}removePointsInRange(e,n){const r=x.ge(this.points,{tick:e},(s,o)=>s.tick-o.tick);if(r>=this.points.length)return;let i=r;for(;i+1<this.points.length&&this.points[i+1].tick<=n;)i+=1;this.points.splice(r,i-r+1)}movePointsInRange(e,n,r,i,s=!0){const o=this.getPointsInRange(e,n);this.movePoints(o.map(a=>a.id),r,i,s)}moveAllPoints(e,n,r=!0){this.movePoints(this.points.map(i=>i.id),e,n,r)}movePoints(e,n,r,i=!0){if(e.length===0)return;const s=new Set(e);let o,a;const l=[];for(let c=0;c<this.points.length;c+=1){const p=this.points[c];!s.has(p.id)||(l.push(p),o===void 0&&(o=c),a=c)}if(!(o===void 0||a===void 0)){if(i){if(n<0){const c=Math.max(0,this.points[o].tick+n),p=x.gt(this.points,{tick:c},(h,g)=>h.tick-g.tick);p<o&&this.points.splice(p,o-p)}else if(n>0){const c=this.points[a].tick+n,p=x.lt(this.points,{tick:c},(h,g)=>h.tick-g.tick);p>a&&this.points.splice(a+1,p-a)}}for(const c of l)c.tick=Math.max(0,c.tick+n),c.value=Math.max(0,Math.min(1,c.value+r));Math.abs(n)>0&&this.points.sort((c,p)=>c.tick-p.tick)}}clone(){const e=new Mt;e.setDisabled(this.disabled);for(const n of this.points)e.addPoint(n.tick,n.value,!1);return e}getNextPointIdInternal(){const e=this.nextPointIdInternal;return this.nextPointIdInternal>=2147483647?this.nextPointIdInternal=1:this.nextPointIdInternal+=1,e}static orderedInsertPointInternal(e,n,r=!1){const i=x.ge(e,n,(s,o)=>s.tick-o.tick);for(;r&&e[i]&&e[i].tick===n.tick;)e.splice(i,1);e.splice(i,0,n)}}class an{targets=[];targetValues={};getAutomationTargets(){return this.targets}getAutomationTargetValues(){return this.targetValues}getOrCreateAutomationValueById(e){return this.targetValues[e]||(this.targetValues[e]=new Mt),this.targetValues[e]}getAutomationValueById(e){return this.targetValues[e]}getAutomationValueByTarget(e){const n=e.toTfAutomationTargetId();return this.getAutomationValueById(n)}addAutomation(e,n=0){E.isNumber(n)||(n=0),this.targets.splice(n,0,e);const r=e.toTfAutomationTargetId();this.getAutomationValueById(r)||(this.targetValues[r]=new Mt)}removeAutomation(e){for(let r=this.targets.length-1;r>=0;r-=1)this.targets[r].equals(e)&&this.targets.splice(r,1);const n=e.toTfAutomationTargetId();delete this.targetValues[n]}removeAutomationOfPlugin(e){for(let n=this.targets.length-1;n>=0;n-=1){const r=this.targets[n];r.getPluginInstanceId()===e&&this.removeAutomation(r)}for(const n of E.keys(this.targetValues)){const r=J.decodeAutomationTarget(n);r.getPluginInstanceId()===e&&this.removeAutomation(r)}}removeAllPointsWithinRange(e,n){for(const r of E.keys(this.targetValues))this.targetValues[r].removePointsInRange(e,n)}moveAllPointsWithinRange(e,n,r,i){for(const s of E.keys(this.targetValues))this.targetValues[s].movePointsInRange(e,n,r,i,!1)}clone(){const e=new an;for(const n of this.targets)e.addAutomation(n.clone());for(const n of E.keys(this.targetValues)){const r=this.targetValues[n];e.targetValues[n]=r.clone()}return e}}var _t=(t=>(t[t.MIDI_TRACK=1]="MIDI_TRACK",t[t.AUDIO_TRACK=2]="AUDIO_TRACK",t[t.MASTER_TRACK=3]="MASTER_TRACK",t))(_t||{});class xt{insturment;clips;suggestedInstruments;uuid;volume;solo;muted;rank;pan;samplerPlugin;audioPlugins=[];song;automation;type;constructor({type:e,song:n,uuid:r=xt.generateTrackIdInternal(),clips:i=[],instrument:s,suggestedInstruments:o=[],volume:a=_o(0),solo:l=!1,muted:c=!1,rank:p=0,pan:h=0}){this.song=n,this.type=e,s?this.insturment=s:e===1&&(this.insturment=new ce({program:0,isDrum:!1})),this.clips=[...i],this.suggestedInstruments=[...o],this.uuid=r,this.volume=a,this.solo=l,this.muted=c,this.rank=p,this.pan=h,this.automation=new an}getType(){return this.type}getSong(){return this.song}getInstrument(){return this.insturment}setInstrument({program:e,isDrum:n}){this.type===1&&(this.insturment=new ce({program:e,isDrum:n}))}getSuggestedInstruments(){return this.suggestedInstruments}createSuggestedInstrument({program:e,isDrum:n}){if(this.type!==1)return;const r=new ce({program:e,isDrum:n});return this.suggestedInstruments.push(r),r}clearSuggestedInstruments(){this.suggestedInstruments=[]}getId(){return this.uuid}setId(e){this.uuid=e}getVolume(){return this.volume}setVolume(e){this.volume=e}setPan(e){this.pan=e}getPan(){return this.pan}getSolo(){return this.solo}setSolo(e){this.solo=e,e&&this.muted&&(this.muted=!1)}getMuted(){return this.muted}setMuted(e){this.muted=e}getRank(){return this.rank}createAudioPlugin(e){const n=de(e);return new Te(n.name,n.manufacturerName,n.pluginFormatName,n.pluginVersion)}getSamplerPlugin(){return this.samplerPlugin}setSamplerPlugin(e,n=!0){if(this.type!==1)return;const r=!this.samplerPlugin&&!!e||!e&&!!this.samplerPlugin||!!e&&!!this.samplerPlugin&&!e.matchesTfId(this.samplerPlugin.getTuneflowId()),i=this.samplerPlugin;this.samplerPlugin=e,r&&i&&n&&this.automation.removeAutomationOfPlugin(i.getInstanceId())}getAudioPlugins(){return this.audioPlugins}addAudioPlugin(e){this.audioPlugins.push(e)}getTrackStartTick(){return!this.clips||this.clips.length===0?0:this.clips[0].getClipStartTick()}getTrackEndTick(){return!this.clips||this.clips.length===0?0:this.clips[this.clips.length-1].getClipEndTick()}getClipById(e){for(const n of this.clips)if(n.getId()===e)return n;return null}getClips(){return this.clips}getClipsOverlappingWith(e,n){const r=[],i=x.lt(this.clips,{getClipStartTick:()=>e},(s,o)=>s.getClipStartTick()-o.getClipStartTick());for(let s=Math.max(i,0);s<this.clips.length;s+=1){const o=this.clips[s];if(!(o.getClipEndTick()<e)){if(o.getClipStartTick()>n)break;r.push(o)}}return r}createMIDIClip({clipStartTick:e,clipEndTick:n=void 0,insertClip:r=!0}){if(!E.isNumber(e))throw new Error("clipStartTick must be specified when creating a clip.");const i=n??e+1;if(i<e)throw new Error(`clipEndTick must be greater or equal to clipStartTick, got clipStartTick: ${e}, clipEndTick: ${n}`);const s=new W({id:W.generateClipIdInternal(),type:Gt.MIDI_CLIP,song:this.song,track:void 0,clipStartTick:e,clipEndTick:i});return r&&this.insertClip(s),s}createAudioClip({clipStartTick:e,audioClipData:n,clipEndTick:r,insertClip:i=!0}){if(!E.isNumber(e))throw new Error("clipStartTick must be specified when creating a clip.");const s=new W({id:W.generateClipIdInternal(),type:Gt.AUDIO_CLIP,song:this.song,track:void 0,clipStartTick:e,clipEndTick:r,audioClipData:n});return i&&this.insertClip(s),s}insertClip(e){if(e.getTrack()!==this)e.getTrack()&&e.deleteFromParent(!1),e.track=this;else return;this.resolveClipConflictInternal(e.getId(),e.getClipStartTick(),e.getClipEndTick()),this.orderedInsertClipInternal(e)}cloneClip(e){if(e.getType()===Gt.MIDI_CLIP){const n=this.createMIDIClip({clipStartTick:e.getClipStartTick(),clipEndTick:e.getClipEndTick(),insertClip:!1});for(const r of e.getRawNotes())n.createNote({pitch:r.getPitch(),velocity:r.getVelocity(),startTick:r.getStartTick(),endTick:r.getEndTick(),updateClipRange:!1,resolveClipConflict:!1});return n}else{if(e.getType()===Gt.AUDIO_CLIP)return this.createAudioClip({clipStartTick:e.getClipStartTick(),clipEndTick:e.getClipEndTick(),audioClipData:e.getAudioClipData(),insertClip:!1});throw new Error(`Unsupported clip type ${e.getType()}`)}}getClipIndex(e){const n=x.le(this.clips,e,(r,i)=>r.getClipStartTick()-i.getClipStartTick());return this.clips.indexOf(e,n)}deleteClip(e,n){const r=this.getClipIndex(e);this.deleteClipAt(r,n)}deleteClipAt(e,n){if(!(e<0)){if(n){const r=this.clips[e];if(!r)return;this.automation.removeAllPointsWithinRange(r.getClipStartTick(),r.getClipEndTick())}this.clips.splice(e,1)}}deleteFromParent(){this.song.removeTrack(this.getId())}getAutomation(){return this.automation}setAutomation(e){this.automation=e.clone()}hasAnyAutomation(){return this.automation.getAutomationTargets().length>0&&!E.isEmpty(this.automation.getAutomationTargetValues())}static generateTrackIdInternal(){return nn()}resolveClipConflictInternal(e,n,r){const i=this.getClipsOverlappingWith(n,r);for(const s of i)s.getId()!==e&&s.trimConflictPartInternal(n,r)}orderedInsertClipInternal(e){const n=x.ge(this.clips,e,(r,i)=>r.getClipStartTick()-i.getClipStartTick());this.clips.splice(n,0,e)}}class ce{program;isDrum;constructor({program:e,isDrum:n}){this.program=e,this.isDrum=n}getProgram(){return this.program}getIsDrum(){return this.isDrum}clone(){return new ce({program:this.program,isDrum:this.isDrum})}}var un={},cn={};function Gf(t){var e=new B(t),n=e.readChunk();if(n.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+n.id+"'";for(var r=Jf(n.data),i=[],s=0;!e.eof()&&s<r.numTracks;s++){var o=e.readChunk();if(o.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+o.id+"'";var a=Wf(o.data);i.push(a)}return{header:r,tracks:i}}function Jf(t){var e=new B(t),n=e.readUInt16(),r=e.readUInt16(),i={format:n,numTracks:r},s=e.readUInt16();return s&32768?(i.framesPerSecond=256-(s>>8),i.ticksPerFrame=s&255):i.ticksPerBeat=s,i}function Wf(t){for(var e=new B(t),n=[];!e.eof();){var r=s();n.push(r)}return n;var i;function s(){var o={};o.deltaTime=e.readVarInt();var a=e.readUInt8();if((a&240)===240)if(a===255){o.meta=!0;var l=e.readUInt8(),c=e.readVarInt();switch(l){case 0:if(o.type="sequenceNumber",c!==2)throw"Expected length for sequenceNumber event is 2, got "+c;return o.number=e.readUInt16(),o;case 1:return o.type="text",o.text=e.readString(c),o;case 2:return o.type="copyrightNotice",o.text=e.readString(c),o;case 3:return o.type="trackName",o.text=e.readString(c),o;case 4:return o.type="instrumentName",o.text=e.readString(c),o;case 5:return o.type="lyrics",o.text=e.readString(c),o;case 6:return o.type="marker",o.text=e.readString(c),o;case 7:return o.type="cuePoint",o.text=e.readString(c),o;case 32:if(o.type="channelPrefix",c!=1)throw"Expected length for channelPrefix event is 1, got "+c;return o.channel=e.readUInt8(),o;case 33:if(o.type="portPrefix",c!=1)throw"Expected length for portPrefix event is 1, got "+c;return o.port=e.readUInt8(),o;case 47:if(o.type="endOfTrack",c!=0)throw"Expected length for endOfTrack event is 0, got "+c;return o;case 81:if(o.type="setTempo",c!=3)throw"Expected length for setTempo event is 3, got "+c;return o.microsecondsPerBeat=e.readUInt24(),o;case 84:if(o.type="smpteOffset",c!=5)throw"Expected length for smpteOffset event is 5, got "+c;var p=e.readUInt8(),h={0:24,32:25,64:29,96:30};return o.frameRate=h[p&96],o.hour=p&31,o.min=e.readUInt8(),o.sec=e.readUInt8(),o.frame=e.readUInt8(),o.subFrame=e.readUInt8(),o;case 88:if(o.type="timeSignature",c!=4)throw"Expected length for timeSignature event is 4, got "+c;return o.numerator=e.readUInt8(),o.denominator=1<<e.readUInt8(),o.metronome=e.readUInt8(),o.thirtyseconds=e.readUInt8(),o;case 89:if(o.type="keySignature",c!=2)throw"Expected length for keySignature event is 2, got "+c;return o.key=e.readInt8(),o.scale=e.readUInt8(),o;case 127:return o.type="sequencerSpecific",o.data=e.readBytes(c),o;default:return o.type="unknownMeta",o.data=e.readBytes(c),o.metatypeByte=l,o}}else if(a==240){o.type="sysEx";var c=e.readVarInt();return o.data=e.readBytes(c),o}else if(a==247){o.type="endSysEx";var c=e.readVarInt();return o.data=e.readBytes(c),o}else throw"Unrecognised MIDI event type byte: "+a;else{var g;if((a&128)===0){if(i===null)throw"Running status byte encountered before status byte";g=a,a=i,o.running=!0}else g=e.readUInt8(),i=a;var v=a>>4;switch(o.channel=a&15,v){case 8:return o.type="noteOff",o.noteNumber=g,o.velocity=e.readUInt8(),o;case 9:var I=e.readUInt8();return o.type=I===0?"noteOff":"noteOn",o.noteNumber=g,o.velocity=I,I===0&&(o.byte9=!0),o;case 10:return o.type="noteAftertouch",o.noteNumber=g,o.amount=e.readUInt8(),o;case 11:return o.type="controller",o.controllerType=g,o.value=e.readUInt8(),o;case 12:return o.type="programChange",o.programNumber=g,o;case 13:return o.type="channelAftertouch",o.amount=g,o;case 14:return o.type="pitchBend",o.value=g+(e.readUInt8()<<7)-8192,o;default:throw"Unrecognised MIDI event type: "+v}}}}function B(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}B.prototype.eof=function(){return this.pos>=this.bufferLen};B.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t};B.prototype.readInt8=function(){var t=this.readUInt8();return t&128?t-256:t};B.prototype.readUInt16=function(){var t=this.readUInt8(),e=this.readUInt8();return(t<<8)+e};B.prototype.readInt16=function(){var t=this.readUInt16();return t&32768?t-65536:t};B.prototype.readUInt24=function(){var t=this.readUInt8(),e=this.readUInt8(),n=this.readUInt8();return(t<<16)+(e<<8)+n};B.prototype.readInt24=function(){var t=this.readUInt24();return t&8388608?t-16777216:t};B.prototype.readUInt32=function(){var t=this.readUInt8(),e=this.readUInt8(),n=this.readUInt8(),r=this.readUInt8();return(t<<24)+(e<<16)+(n<<8)+r};B.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e};B.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)};B.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(e&128)t+=e&127,t<<=7;else return t+e}return t};B.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32(),n=this.readBytes(e);return{id:t,length:e,data:n}};var jf=Gf;function Yf(t,e){if(typeof t!="object")throw"Invalid MIDI data";e=e||{};var n=t.header||{},r=t.tracks||[],i,s=r.length,o=new _;for(Qf(o,n,s),i=0;i<s;i++)Xf(o,r[i],e);return o.buffer}function Qf(t,e,n){var r=e.format==null?1:e.format,i=128;e.timeDivision?i=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?i=-(e.framesPerSecond&255)<<8|e.ticksPerFrame&255:e.ticksPerBeat&&(i=e.ticksPerBeat&32767);var s=new _;s.writeUInt16(r),s.writeUInt16(n),s.writeUInt16(i),t.writeChunk("MThd",s.buffer)}function Xf(t,e,n){var r=new _,i,s=e.length,o=null;for(i=0;i<s;i++)(n.running===!1||!n.running&&!e[i].running)&&(o=null),o=Zf(r,e[i],o,n.useByte9ForNoteOff);t.writeChunk("MTrk",r.buffer)}function Zf(t,e,n,r){var i=e.type,s=e.deltaTime,o=e.text||"",a=e.data||[],l=null;switch(t.writeVarInt(s),i){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(o.length),t.writeString(o);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(o.length),t.writeString(o);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(o.length),t.writeString(o);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(o.length),t.writeString(o);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(o.length),t.writeString(o);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(o.length),t.writeString(o);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(o.length),t.writeString(o);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var c={24:0,25:32,29:64,30:96},p=e.hour&31|c[e.frameRate];t.writeUInt8(p),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var h=Math.floor(Math.log(e.denominator)/Math.LN2)&255;t.writeUInt8(h),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(a.length),t.writeBytes(a);break;case"unknownMeta":e.metatypeByte!=null&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(a.length),t.writeBytes(a));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(a.length),t.writeBytes(a);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(a.length),t.writeBytes(a);break;case"noteOff":var g=r!==!1&&e.byte9||r&&e.velocity==0?144:128;l=g|e.channel,l!==n&&t.writeUInt8(l),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":l=144|e.channel,l!==n&&t.writeUInt8(l),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":l=160|e.channel,l!==n&&t.writeUInt8(l),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":l=176|e.channel,l!==n&&t.writeUInt8(l),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":l=192|e.channel,l!==n&&t.writeUInt8(l),t.writeUInt8(e.programNumber);break;case"channelAftertouch":l=208|e.channel,l!==n&&t.writeUInt8(l),t.writeUInt8(e.amount);break;case"pitchBend":l=224|e.channel,l!==n&&t.writeUInt8(l);var v=8192+e.value,I=v&127,b=v>>7&127;t.writeUInt8(I),t.writeUInt8(b);break;default:throw"Unrecognized event type: "+i}return l}function _(){this.buffer=[]}_.prototype.writeUInt8=function(t){this.buffer.push(t&255)};_.prototype.writeInt8=_.prototype.writeUInt8;_.prototype.writeUInt16=function(t){var e=t>>8&255,n=t&255;this.writeUInt8(e),this.writeUInt8(n)};_.prototype.writeInt16=_.prototype.writeUInt16;_.prototype.writeUInt24=function(t){var e=t>>16&255,n=t>>8&255,r=t&255;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(r)};_.prototype.writeInt24=_.prototype.writeUInt24;_.prototype.writeUInt32=function(t){var e=t>>24&255,n=t>>16&255,r=t>>8&255,i=t&255;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(r),this.writeUInt8(i)};_.prototype.writeInt32=_.prototype.writeUInt32;_.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))};_.prototype.writeString=function(t){var e,n=t.length,r=[];for(e=0;e<n;e++)r.push(t.codePointAt(e));this.writeBytes(r)};_.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,n=[];for(n.push(e&127),e>>=7;e;){var r=e&127|128;n.push(r),e>>=7}this.writeBytes(n.reverse())}};_.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)};var th=Yf;cn.parseMidi=jf;cn.writeMidi=th;var Cr={},ln={},ye={};Object.defineProperty(ye,"__esModule",{value:!0});function xo(t,e,n){n===void 0&&(n="ticks");var r=0,i=t.length,s=i;if(i>0&&t[i-1][n]<=e)return i-1;for(;r<s;){var o=Math.floor(r+(s-r)/2),a=t[o],l=t[o+1];if(a[n]===e){for(var c=o;c<t.length;c++){var p=t[c];p[n]===e&&(o=c)}return o}else{if(a[n]<e&&l[n]>e)return o;a[n]>e?s=o:a[n]<e&&(r=o+1)}}return-1}ye.search=xo;function eh(t,e,n){if(n===void 0&&(n="ticks"),t.length){var r=xo(t,e[n],n);t.splice(r+1,0,e)}else t.push(e)}ye.insert=eh;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ye,n=new WeakMap;t.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var r=function(){function i(s){var o=this;this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",n.set(this,480),s&&(n.set(this,s.header.ticksPerBeat),s.tracks.forEach(function(a){return a.forEach(function(l){l.meta&&(l.type==="timeSignature"?o.timeSignatures.push({ticks:l.absoluteTime,timeSignature:[l.numerator,l.denominator]}):l.type==="setTempo"?o.tempos.push({bpm:6e7/l.microsecondsPerBeat,ticks:l.absoluteTime}):l.type==="keySignature"&&o.keySignatures.push({key:t.keySignatureKeys[l.key+7],scale:l.scale===0?"major":"minor",ticks:l.absoluteTime}))})}),s.tracks[0].forEach(function(a){a.meta&&(a.type==="trackName"?o.name=a.text:(a.type==="text"||a.type==="cuePoint"||a.type==="marker"||a.type==="lyrics")&&o.meta.push({text:a.text,ticks:a.absoluteTime,type:a.type}))}),this.update())}return i.prototype.update=function(){var s=this,o=0,a=0;this.tempos.sort(function(l,c){return l.ticks-c.ticks}),this.tempos.forEach(function(l,c){var p=c>0?s.tempos[c-1].bpm:s.tempos[0].bpm,h=l.ticks/s.ppq-a,g=60/p*h;l.time=g+o,o=l.time,a+=h}),this.timeSignatures.sort(function(l,c){return l.ticks-c.ticks}),this.timeSignatures.forEach(function(l,c){var p=c>0?s.timeSignatures[c-1]:s.timeSignatures[0],h=(l.ticks-p.ticks)/s.ppq,g=h/p.timeSignature[0]/(p.timeSignature[1]/4);p.measures=p.measures||0,l.measures=g+p.measures})},i.prototype.ticksToSeconds=function(s){var o=e.search(this.tempos,s);if(o!==-1){var a=this.tempos[o],l=a.time,c=(s-a.ticks)/this.ppq;return l+60/a.bpm*c}else{var p=s/this.ppq;return 60/120*p}},i.prototype.ticksToMeasures=function(s){var o=e.search(this.timeSignatures,s);if(o!==-1){var a=this.timeSignatures[o],l=(s-a.ticks)/this.ppq;return a.measures+l/(a.timeSignature[0]/a.timeSignature[1])/4}else return s/this.ppq/4},Object.defineProperty(i.prototype,"ppq",{get:function(){return n.get(this)},enumerable:!0,configurable:!0}),i.prototype.secondsToTicks=function(s){var o=e.search(this.tempos,s,"time");if(o!==-1){var a=this.tempos[o],l=a.time,c=s-l,p=c/(60/a.bpm);return Math.round(a.ticks+p*this.ppq)}else{var h=s/.5;return Math.round(h*this.ppq)}},i.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(s){return{bpm:s.bpm,ticks:s.ticks}}),timeSignatures:this.timeSignatures}},i.prototype.fromJSON=function(s){this.name=s.name,this.tempos=s.tempos.map(function(o){return Object.assign({},o)}),this.timeSignatures=s.timeSignatures.map(function(o){return Object.assign({},o)}),this.keySignatures=s.keySignatures.map(function(o){return Object.assign({},o)}),this.meta=s.meta.map(function(o){return Object.assign({},o)}),n.set(this,s.ppq),this.update()},i.prototype.setTempo=function(s){this.tempos=[{bpm:s,ticks:0}],this.update()},i}();t.Header=r})(ln);var be={exports:{}};be.exports=nh;be.exports.from=Eo;be.exports.depth=rh;be.exports.fromDepth=No;function nh(t){if(!Array.isArray(t))throw new TypeError("Expected value to be an array");return Eo(t)}function Eo(t){return Po(t,[])}function rh(t,e){if(!Array.isArray(t))throw new TypeError("Expected value to be an array");return No(t,e)}function No(t,e){if(typeof e!="number")throw new TypeError("Expected the depth to be a number");return Ao(t,[],e)}function Po(t,e){for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?Po(r,e):e.push(r)}return e}function Ao(t,e,n){n--;for(var r=0;r<t.length;r++){var i=t[r];n>-1&&Array.isArray(i)?Ao(i,e,n):e.push(i)}return e}var En=X&&X.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r},ih=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cr,"__esModule",{value:!0});var sh=cn,oh=ln,ah=ih(be.exports);function uh(t,e){return[{absoluteTime:t.ticks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOn",velocity:Math.floor(t.velocity*127)},{absoluteTime:t.ticks+t.durationTicks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOff",velocity:Math.floor(t.noteOffVelocity*127)}]}function ch(t){return ah.default(t.notes.map(function(e){return uh(e,t.channel)}))}function lh(t,e){return{absoluteTime:t.ticks,channel:e,controllerType:t.number,deltaTime:0,type:"controller",value:Math.floor(t.value*127)}}function fh(t){for(var e=[],n=0;n<127;n++)t.controlChanges.hasOwnProperty(n)&&t.controlChanges[n].forEach(function(r){e.push(lh(r,t.channel))});return e}function hh(t,e){return{absoluteTime:t.ticks,channel:e,deltaTime:0,type:"pitchBend",value:t.value}}function ph(t){var e=[];return t.pitchBends.forEach(function(n){e.push(hh(n,t.channel))}),e}function dh(t){return{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}}function gh(t){return{absoluteTime:0,deltaTime:0,meta:!0,text:t,type:"trackName"}}function mh(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:"setTempo"}}function Ih(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function vh(t){var e=oh.keySignatureKeys.indexOf(t.key);return{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:t.scale==="major"?0:1,type:"keySignature"}}function Th(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,text:t.text,type:t.type}}function yh(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:En([En([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map(function(n){return vh(n)}),t.header.meta.map(function(n){return Th(n)}),t.header.tempos.map(function(n){return mh(n)}),t.header.timeSignatures.map(function(n){return Ih(n)}))],t.tracks.map(function(n){return En([gh(n.name),dh(n)],ch(n),fh(n),ph(n))}))};return e.tracks=e.tracks.map(function(n){n=n.sort(function(i,s){return i.absoluteTime-s.absoluteTime});var r=0;return n.forEach(function(i){i.deltaTime=i.absoluteTime-r,r=i.absoluteTime,delete i.absoluteTime}),n.push({deltaTime:0,meta:!0,type:"endOfTrack"}),n}),new Uint8Array(sh.writeMidi(e))}Cr.encode=yh;var fn={},xr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},t.controlChangeIds=Object.keys(t.controlChangeNames).reduce(function(i,s){return i[t.controlChangeNames[s]]=s,i},{});var e=new WeakMap,n=new WeakMap,r=function(){function i(s,o){e.set(this,o),n.set(this,s.controllerType),this.ticks=s.absoluteTime,this.value=s.value}return Object.defineProperty(i.prototype,"number",{get:function(){return n.get(this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return t.controlChangeNames[this.number]?t.controlChangeNames[this.number]:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){var s=e.get(this);return s.ticksToSeconds(this.ticks)},set:function(s){var o=e.get(this);this.ticks=o.secondsToTicks(s)},enumerable:!0,configurable:!0}),i.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},i}();t.ControlChange=r})(xr);var Er={};Object.defineProperty(Er,"__esModule",{value:!0});var Be=xr;function bh(){return new Proxy({},{get:function(t,e){if(t[e])return t[e];if(Be.controlChangeIds.hasOwnProperty(e))return t[Be.controlChangeIds[e]]},set:function(t,e,n){return Be.controlChangeIds.hasOwnProperty(e)?t[Be.controlChangeIds[e]]=n:t[e]=n,!0}})}Er.createControlChanges=bh;var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});var Nn=new WeakMap,wh=function(){function t(e,n){Nn.set(this,n),this.ticks=e.absoluteTime,this.value=e.value}return Object.defineProperty(t.prototype,"time",{get:function(){var e=Nn.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var n=Nn.get(this);this.ticks=n.secondsToTicks(e)},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}();Nr.PitchBend=wh;var Pr={},we={};Object.defineProperty(we,"__esModule",{value:!0});we.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];we.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];we.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(Pr,"__esModule",{value:!0});var De=we,$i=new WeakMap,kh=function(){function t(e,n){if(this.number=0,$i.set(this,n),this.number=0,e){var r=e.find(function(i){return i.type==="programChange"});r&&(this.number=r.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?De.DrumKitByPatchID[this.number]:De.instrumentByPatchID[this.number]},set:function(e){var n=De.instrumentByPatchID.indexOf(e);n!==-1&&(this.number=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":De.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){var e=$i.get(this);return e.channel===9},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,name:this.name,number:this.number}},t.prototype.fromJSON=function(e){this.number=e.number},t}();Pr.Instrument=kh;var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});function Sh(t){var e=Math.floor(t/12)-1;return Oo(t)+e.toString()}function Oo(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=t%12;return e[n]}function _h(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return e.indexOf(t)}var Ch=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(n){var r=t.exec(n),i=r[1],s=r[2],o=e[i.toLowerCase()];return o+(parseInt(s,10)+1)*12}}(),qt=new WeakMap,xh=function(){function t(e,n,r){qt.set(this,r),this.midi=e.midi,this.velocity=e.velocity,this.noteOffVelocity=n.velocity,this.ticks=e.ticks,this.durationTicks=n.ticks-e.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){return Sh(this.midi)},set:function(e){this.midi=Ch(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(e){var n=e-this.octave;this.midi+=n*12},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return Oo(this.midi)},set:function(e){this.midi=12*(this.octave+1)+_h(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var e=qt.get(this);return e.ticksToSeconds(this.ticks+this.durationTicks)-e.ticksToSeconds(this.ticks)},set:function(e){var n=qt.get(this),r=n.secondsToTicks(this.time+e);this.durationTicks=r-this.ticks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){var e=qt.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var n=qt.get(this);this.ticks=n.secondsToTicks(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bars",{get:function(){var e=qt.get(this);return e.ticksToMeasures(this.ticks)},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}();Ar.Note=xh;Object.defineProperty(fn,"__esModule",{value:!0});var Pn=ye,Eh=xr,Nh=Er,Ph=Nr,Li=Pr,Ah=Ar,$e=new WeakMap,Oh=function(){function t(e,n){var r=this;if(this.name="",this.notes=[],this.controlChanges=Nh.createControlChanges(),this.pitchBends=[],$e.set(this,n),e){var i=e.find(function(g){return g.type==="trackName"});this.name=i?i.text:""}if(this.instrument=new Li.Instrument(e,this),this.channel=0,e){for(var s=e.filter(function(g){return g.type==="noteOn"}),o=e.filter(function(g){return g.type==="noteOff"}),a=function(){var g=s.shift();l.channel=g.channel;var v=o.findIndex(function(b){return b.noteNumber===g.noteNumber&&b.absoluteTime>=g.absoluteTime});if(v!==-1){var I=o.splice(v,1)[0];l.addNote({durationTicks:I.absoluteTime-g.absoluteTime,midi:g.noteNumber,noteOffVelocity:I.velocity/127,ticks:g.absoluteTime,velocity:g.velocity/127})}},l=this;s.length;)a();var c=e.filter(function(g){return g.type==="controller"});c.forEach(function(g){r.addCC({number:g.controllerType,ticks:g.absoluteTime,value:g.value/127})});var p=e.filter(function(g){return g.type==="pitchBend"});p.forEach(function(g){r.addPitchBend({ticks:g.absoluteTime,value:g.value/Math.pow(2,13)})});var h=e.find(function(g){return g.type==="endOfTrack"});this.endOfTrackTicks=h!==void 0?h.absoluteTime:void 0}}return t.prototype.addNote=function(e){var n=$e.get(this),r=new Ah.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},n);return Object.assign(r,e),Pn.insert(this.notes,r,"ticks"),this},t.prototype.addCC=function(e){var n=$e.get(this),r=new Eh.ControlChange({controllerType:e.number},n);return delete e.number,Object.assign(r,e),Array.isArray(this.controlChanges[r.number])||(this.controlChanges[r.number]=[]),Pn.insert(this.controlChanges[r.number],r,"ticks"),this},t.prototype.addPitchBend=function(e){var n=$e.get(this),r=new Ph.PitchBend({},n);return Object.assign(r,e),Pn.insert(this.pitchBends,r,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,n=0;n<this.notes.length-1;n++){var r=this.notes[n].time+this.notes[n].duration;e<r&&(e=r)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,n=0;n<this.notes.length-1;n++){var r=this.notes[n].ticks+this.notes[n].durationTicks;e<r&&(e=r)}return e},enumerable:!0,configurable:!0}),t.prototype.fromJSON=function(e){var n=this;this.name=e.name,this.channel=e.channel,this.instrument=new Li.Instrument(void 0,this),this.instrument.fromJSON(e.instrument),e.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=e.endOfTrackTicks);for(var r in e.controlChanges)e.controlChanges[r]&&e.controlChanges[r].forEach(function(i){n.addCC({number:i.number,ticks:i.ticks,value:i.value})});e.notes.forEach(function(i){n.addNote({durationTicks:i.durationTicks,midi:i.midi,ticks:i.ticks,velocity:i.velocity})})},t.prototype.toJSON=function(){for(var e={},n=0;n<127;n++)this.controlChanges.hasOwnProperty(n)&&(e[n]=this.controlChanges[n].map(function(i){return i.toJSON()}));var r={channel:this.channel,controlChanges:e,pitchBends:this.pitchBends.map(function(i){return i.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(i){return i.toJSON()})};return this.endOfTrackTicks!==void 0&&(r.endOfTrackTicks=this.endOfTrackTicks),r},t}();fn.Track=Oh;var Mh=X&&X.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(p){try{c(r.next(p))}catch(h){o(h)}}function l(p){try{c(r.throw(p))}catch(h){o(h)}}function c(p){p.done?s(p.value):i(p.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},Vh=X&&X.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(p){return l([c,p])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(p){c=[6,p],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(un,"__esModule",{value:!0});var Rh=cn,Fh=Cr,Hi=ln,An=fn,Uh=function(){function t(e){var n=this,r=null;e&&(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),r=Rh.parseMidi(e),r.tracks.forEach(function(i){var s=0;i.forEach(function(o){s+=o.deltaTime,o.absoluteTime=s})}),r.tracks=Lh(r.tracks)),this.header=new Hi.Header(r),this.tracks=[],e&&(this.tracks=r.tracks.map(function(i){return new An.Track(i,n.header)}),r.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return t.fromUrl=function(e){return Mh(this,void 0,void 0,function(){var n,r;return Vh(this,function(i){switch(i.label){case 0:return[4,fetch(e)];case 1:return n=i.sent(),n.ok?[4,n.arrayBuffer()]:[3,3];case 2:return r=i.sent(),[2,new t(r)];case 3:throw new Error("could not load "+e)}})})},Object.defineProperty(t.prototype,"name",{get:function(){return this.header.name},set:function(e){this.header.name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var e=this.tracks.map(function(n){return n.duration});return Math.max.apply(Math,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){var e=this.tracks.map(function(n){return n.durationTicks});return Math.max.apply(Math,e)},enumerable:!0,configurable:!0}),t.prototype.addTrack=function(){var e=new An.Track(void 0,this.header);return this.tracks.push(e),e},t.prototype.toArray=function(){return Fh.encode(this)},t.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(e){return e.toJSON()})}},t.prototype.fromJSON=function(e){var n=this;this.header=new Hi.Header,this.header.fromJSON(e.header),this.tracks=e.tracks.map(function(r){var i=new An.Track(void 0,n.header);return i.fromJSON(r),i})},t.prototype.clone=function(){var e=new t;return e.fromJSON(this.toJSON()),e},t}(),Bh=un.Midi=Uh,Dh=fn;un.Track=Dh.Track;var $h=ln;un.Header=$h.Header;function Lh(t){for(var e=[],n=0;n<t.length;n++)for(var r=e.length,i=new Map,s=Array(16).fill(0),o=0,a=t[n];o<a.length;o++){var l=a[o],c=r,p=l.channel;if(p!==void 0){l.type==="programChange"&&(s[p]=l.programNumber);var h=s[p],g=h+" "+p;i.has(g)?c=i.get(g):(c=r+i.size,i.set(g,c))}e[c]||e.push([]),e[c].push(l)}return e}class ht{static DEFAULT_PPQ=480;masterTrack;tracks;PPQ;tempos;timeSignatures;pluginContext;nextTrackRank=1;constructor(){this.tracks=[],this.PPQ=0,this.tempos=[],this.timeSignatures=[]}getMasterTrack(){return this.masterTrack||(this.masterTrack=new xt({type:_t.MASTER_TRACK,song:this,uuid:xt.generateTrackIdInternal()})),this.masterTrack}getTracks(){return this.tracks}getTrackById(e){return Ge(this.tracks,n=>n.getId()===e)}getTracksByIds(e){if(!this.tracks)return[];const n=new Set(e);return this.tracks.filter(r=>n.has(r.getId()))}getTrackIndex(e){return Wt(this.tracks,n=>n.getId()===e)}createTrack({type:e,index:n,rank:r,assignDefaultSamplerPlugin:i=!1}){this.checkAccess("createTrack"),r==null||r===null?r=this.getNextTrackRank():this.nextTrackRank=Math.max(r+1,this.nextTrackRank);const s=new xt({type:e,song:this,uuid:this.getNextTrackId(),rank:r==null||r===null?this.getNextTrackRank():r});return i&&e===_t.MIDI_TRACK&&s.setSamplerPlugin(s.createAudioPlugin(Te.DEFAULT_SYNTH_TFID)),n!=null?this.tracks.splice(n,0,s):this.tracks.push(s),s}cloneTrack(e){let n=this.getTrackIndex(e.getId());n<0&&(n=void 0);const r=this.createTrack({type:e.getType(),index:n});if(r.setVolume(e.getVolume()),r.setPan(e.getPan()),r.setSolo(e.getSolo()),r.setMuted(e.getMuted()),e.getType()===_t.MIDI_TRACK){const i=e.getInstrument();i&&r.setInstrument({program:i.getProgram(),isDrum:i.getIsDrum()});for(const o of e.getSuggestedInstruments())r.createSuggestedInstrument({program:o.getProgram(),isDrum:o.getIsDrum()});const s=e.getSamplerPlugin();s&&r.setSamplerPlugin(s.clone(r))}else e.getType(),_t.AUDIO_TRACK;for(const i of e.getAudioPlugins())r.addAudioPlugin(i.clone(r));for(const i of e.getClips()){const s=r.cloneClip(i);r.insertClip(s)}return e.hasAnyAutomation()&&r.setAutomation(e.getAutomation()),r}removeTrack(e){this.checkAccess("removeTrack");const n=this.getTrackById(e);return n?(this.tracks.splice(Wt(this.tracks,r=>r.getId()===e),1),n):null}getResolution(){return this.PPQ}getBeatsPerBar(){return this.getTimeSignatures()[0].getNumerator()}getTicksPerBar(){return this.getBeatsPerBar()*this.getResolution()}setResolution(e){this.PPQ=e}getTempoChanges(){return this.tempos}getTempoAtTick(e){return ht.getTempoAtTickImpl(e,this.tempos,n=>({getTicks:()=>n}),n=>n.getTicks())}static getTempoAtTickImpl(e,n,r,i){const s=x.le(n,r(e),(o,a)=>i(o)-i(a));return s<0||s>=n.length?null:n[s]}createTempoChange({ticks:e,bpm:n}){if(this.PPQ<=0)throw new Error("Song resolution must be provided before creating tempo changes.");if(this.tempos.length===0&&e!==0)throw new Error("The first tempo event must be at tick 0");const r=new re({ticks:e,bpm:n,time:this.tickToSeconds(e)}),i=x.ge(this.tempos,r,(s,o)=>s.getTicks()-o.getTicks());return i<0?this.tempos.push(r):this.tempos.splice(i,0,r),this.retimingTempoEvents(),r}overwriteTempoChanges(e){if(e.length===0)throw new Error("Cannot clear all the tempo events.");const n=Si(e);n.sort((i,s)=>i.getTicks()-s.getTicks());const r=n[0];if(r.getTicks()>0)throw new Error("The first tempo event needs to start from tick 0");this.tempos=[new re({ticks:0,time:0,bpm:r.getBpm()})];for(let i=1;i<n.length;i+=1){const s=n[i];this.createTempoChange({ticks:s.getTicks(),bpm:s.getBpm()})}}overwriteTimeSignatures(e){this.timeSignatures=Si(e)}updateTempo(e,n){e.setBpmInternal(n),this.retimingTempoEvents()}updateTempoAtTick(e,n){const r=this.getTempoAtTick(e);r?this.updateTempo(r,n):this.createTempoChange({ticks:e,bpm:n})}getTimeSignatures(){return this.timeSignatures}createTimeSignature({ticks:e,numerator:n,denominator:r}){const i=new Dn({ticks:e,numerator:n,denominator:r}),s=x.ge(this.timeSignatures,i,(o,a)=>o.getTicks()-a.getTicks());return s<0?this.timeSignatures.push(i):this.timeSignatures.splice(s,0,i),i}updateTimeSignatureAtTick(e,n,r){const i=this.getTimeSignatureAtTick(e);i?(i.setNumerator(n),i.setDenominator(r)):this.createTimeSignature({ticks:e,numerator:n,denominator:r})}getLastTick(){let e=0;for(const n of this.tracks)e=Math.max(e,n.getTrackEndTick());return e}getDuration(){return this.tickToSeconds(this.getLastTick())}getTicksPerBeat(){return this.getTicksPerBeatAtTick(0)}getTicksPerBeatAtTick(e){const n=this.getTimeSignatureAtTick(e);return n?this.getResolution()*(4/n.getDenominator()):0}getTimeSignatureAtTick(e){return ht.getTimeSignatureAtTickImpl(e,this.timeSignatures,n=>({getTicks:()=>n}),n=>n.getTicks())}static getTimeSignatureAtTickImpl(e,n,r,i){const s=x.le(n,r(e),(o,a)=>i(o)-i(a));return s<0||s>=n.length?null:n[s]}tickToSeconds(e){return ht.tickToSecondsImpl(e,this.getTempoChanges(),this.getResolution())}static tickToSecondsImpl(e,n,r){if(e===0)return 0;let i=x.lt(n,{getTicks:()=>e},(l,c)=>l.getTicks()-c.getTicks());i==-1&&(i=0);const s=n[i],o=e-s.getTicks(),a=ht.tempoBPMToTicksPerSecond(s.getBpm(),r);return s.getTime()+o/a}secondsToTick(e){if(e===0)return 0;let n=x.lt(this.getTempoChanges(),{getTime:()=>e},(o,a)=>o.getTime()-a.getTime());n==-1&&(n=0);const r=this.getTempoChanges()[n],i=e-r.getTime(),s=ht.tempoBPMToTicksPerSecond(r.getBpm(),this.getResolution());return Math.round(r.getTicks()+i*s)}static importMIDI(e,n,r=0,i=!1){const s=new Bh(n),o=r,a=ht.DEFAULT_PPQ/s.header.ppq;if(i){const l=[];for(const p of s.header.timeSignatures)l.push(new Dn({ticks:o+bt(p.ticks,a),numerator:p.timeSignature[0],denominator:p.timeSignature[1]}));e.overwriteTimeSignatures(l);const c=[];o>0&&c.push(new re({ticks:0,time:0,bpm:120}));for(const p of s.header.tempos)c.push(new re({ticks:o+bt(p.ticks,a),time:p.time,bpm:p.bpm}));e.overwriteTempoChanges(c)}for(const l of s.tracks){const c=e.createTrack({type:_t.MIDI_TRACK,assignDefaultSamplerPlugin:!0});c.setInstrument({program:l.instrument.number,isDrum:l.instrument.percussion});const p=c.createMIDIClip({clipStartTick:o});let h=Number.MAX_SAFE_INTEGER;for(const I of l.notes)p.createNote({pitch:I.midi,velocity:Math.round(I.velocity*127),startTick:o+bt(I.ticks,a),endTick:o+bt(I.ticks+I.durationTicks,a)}),h=Math.min(h,o+bt(I.ticks,a));const g=l.controlChanges[7];if(g)if(g.length===1)c.setVolume(g[0].value);else{const I=new J(Ze.VOLUME);c.getAutomation().addAutomation(I);const b=c.getAutomation().getAutomationValueByTarget(I);for(const K of g)b.addPoint(o+bt(K.ticks,a),K.value)}const v=l.controlChanges[10];if(v)if(v.length===1){const I=Math.round(v[0].value*127-64);c.setPan(I)}else{const I=new J(Ze.PAN);c.getAutomation().addAutomation(I);const b=c.getAutomation().getAutomationValueByTarget(I);for(const K of v)b.addPoint(o+bt(K.ticks,a),K.value)}h!==Number.MAX_SAFE_INTEGER&&p.adjustClipLeft(h)}}setPluginContextInternal(e){this.pluginContext={plugin:e,numTracksCreatedByPlugin:0}}clearPluginContextInternal(){this.pluginContext=void 0}getNextTrackId(){const e=this.pluginContext,n=e.plugin.generatedTrackIdsInternal;if(e.numTracksCreatedByPlugin===n.length)n.push(xt.generateTrackIdInternal());else if(e.numTracksCreatedByPlugin>n.length)throw new Error("Plugin generated track ids out of sync.");const r=n[e.numTracksCreatedByPlugin];return e.numTracksCreatedByPlugin+=1,r}getNextTrackRank(){const e=this.nextTrackRank;return this.nextTrackRank+=1,e}checkAccess(e){if(!this.pluginContext)throw new Error("Song needs to be accessed in a plugin context in order to use privileged methods.");if(!this.pluginContext.plugin.songAccess()[e])throw new Error(`Plugin ${this.pluginContext.plugin.constructor.id()} requires access ${e} in order to run.`)}static tempoBPMToTicksPerSecond(e,n){return e*n/60}retimingTempoEvents(){this.tempos.sort((e,n)=>e.getTicks()-n.getTicks());for(const e of this.tempos)e.setTimeInternal(this.tickToSeconds(e.getTicks()))}}function bt(t,e){return Math.round(t*e)}var A=(t=>(t[t.Slider=1]="Slider",t[t.Input=2]="Input",t[t.TrackSelector=3]="TrackSelector",t[t.Pitch=4]="Pitch",t[t.TrackPitchSelector=5]="TrackPitchSelector",t[t.InstrumentSelector=6]="InstrumentSelector",t[t.Select=7]="Select",t[t.Switch=8]="Switch",t[t.InputNumber=9]="InputNumber",t[t.MultiTrackSelector=10]="MultiTrackSelector",t[t.None=11]="None",t[t.FileSelector=12]="FileSelector",t[t.MultiSourceAudioSelector=13]="MultiSourceAudioSelector",t[t.AudioRecorder=14]="AudioRecorder",t[t.SelectList=15]="SelectList",t))(A||{});async function Hh(t){return t.arrayBuffer()}var Mo=(t=>(t[t.SelectedTrackIds=1]="SelectedTrackIds",t[t.SelectedClipInfos=2]="SelectedClipInfos",t[t.TickAtPlayhead=3]="TickAtPlayhead",t[t.EditingClipInfo=4]="EditingClipInfo",t[t.EditingNoteIds=5]="EditingNoteIds",t[t.TickAtPlayheadSnappedToBeat=6]="TickAtPlayheadSnappedToBeat",t))(Mo||{});exports.AudioPlugin=Te;exports.AutomationData=an;exports.AutomationTarget=J;exports.AutomationTargetType=Ze;exports.AutomationValue=Mt;exports.Clip=W;exports.ClipType=Gt;exports.DrumPitch=Co;exports.InjectSource=Mo;exports.Note=st;exports.Song=ht;exports.TempoEvent=re;exports.TickToSecondStepper=Bf;exports.TimeSignatureEvent=Dn;exports.Track=xt;exports.TrackType=_t;exports.TuneflowPipeline=Fc;exports.TuneflowPlugin=lr;exports.WidgetType=A;exports.areTuneflowIdsEqual=ko;exports.areTuneflowIdsEqualIgnoreVersion=So;exports.dbToVolumeValue=_o;exports.decodeAudioPluginTuneflowId=de;exports.gainToDb=Df;exports.gainToVolumeValue=Hf;exports.getAudioPluginTuneflowId=Wn;exports.getAudioPluginVersionlessTuneflowId=wo;exports.getFileContentFromFileSelector=Hh;exports.maybeToRaw=Kf;exports.midiNumberToPitch=Mf;exports.pitchToHz=zf;exports.pitchToMidiNumber=Ff;exports.remapRange=qf;exports.toVersionlessTfId=Uf;exports.volumeValueToDb=$f;exports.volumeValueToGain=Lf;
