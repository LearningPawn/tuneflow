"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var $i="1.13.4",fi=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},on=Array.prototype,tr=Object.prototype,hi=typeof Symbol<"u"?Symbol.prototype:null,Wa=on.push,ke=on.slice,Ie=tr.toString,ja=tr.hasOwnProperty,Li=typeof ArrayBuffer<"u",Ya=typeof DataView<"u",Qa=Array.isArray,pi=Object.keys,di=Object.create,gi=Li&&ArrayBuffer.isView,Xa=isNaN,Za=isFinite,Hi=!{toString:null}.propertyIsEnumerable("toString"),mi=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],tu=Math.pow(2,53)-1;function G(t,e){return e=e==null?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var s=Array(e+1);for(i=0;i<e;i++)s[i]=arguments[i];return s[e]=r,t.apply(this,s)}}function Lt(t){var e=typeof t;return e==="function"||e==="object"&&!!t}function eu(t){return t===null}function qi(t){return t===void 0}function Ki(t){return t===!0||t===!1||Ie.call(t)==="[object Boolean]"}function nu(t){return!!(t&&t.nodeType===1)}function F(t){var e="[object "+t+"]";return function(n){return Ie.call(n)===e}}const er=F("String"),zi=F("Number"),ru=F("Date"),iu=F("RegExp"),su=F("Error"),Gi=F("Symbol"),Ji=F("ArrayBuffer");var Wi=F("Function"),ou=fi.document&&fi.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof ou!="function"&&(Wi=function(t){return typeof t=="function"||!1});const $=Wi,ji=F("Object");var Yi=Ya&&ji(new DataView(new ArrayBuffer(8))),nr=typeof Map<"u"&&ji(new Map),au=F("DataView");function uu(t){return t!=null&&$(t.getInt8)&&Ji(t.buffer)}const Ge=Yi?uu:au,Ht=Qa||F("Array");function bt(t,e){return t!=null&&ja.call(t,e)}var Fn=F("Arguments");(function(){Fn(arguments)||(Fn=function(t){return bt(t,"callee")})})();const rr=Fn;function cu(t){return!Gi(t)&&Za(t)&&!isNaN(parseFloat(t))}function Qi(t){return zi(t)&&Xa(t)}function Xi(t){return function(){return t}}function Zi(t){return function(e){var n=t(e);return typeof n=="number"&&n>=0&&n<=tu}}function ts(t){return function(e){return e?.[t]}}const Je=ts("byteLength"),lu=Zi(Je);var fu=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function hu(t){return gi?gi(t)&&!Ge(t):lu(t)&&fu.test(Ie.call(t))}const es=Li?hu:Xi(!1),J=ts("length");function pu(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,t.push(i)}}}function ns(t,e){e=pu(e);var n=mi.length,r=t.constructor,i=$(r)&&r.prototype||tr,s="constructor";for(bt(t,s)&&!e.contains(s)&&e.push(s);n--;)s=mi[n],s in t&&t[s]!==i[s]&&!e.contains(s)&&e.push(s)}function N(t){if(!Lt(t))return[];if(pi)return pi(t);var e=[];for(var n in t)bt(t,n)&&e.push(n);return Hi&&ns(t,e),e}function du(t){if(t==null)return!0;var e=J(t);return typeof e=="number"&&(Ht(t)||er(t)||rr(t))?e===0:J(N(t))===0}function rs(t,e){var n=N(e),r=n.length;if(t==null)return!r;for(var i=Object(t),s=0;s<r;s++){var o=n[s];if(e[o]!==i[o]||!(o in i))return!1}return!0}function S(t){if(t instanceof S)return t;if(!(this instanceof S))return new S(t);this._wrapped=t}S.VERSION=$i;S.prototype.value=function(){return this._wrapped};S.prototype.valueOf=S.prototype.toJSON=S.prototype.value;S.prototype.toString=function(){return String(this._wrapped)};function Ii(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,Je(t))}var vi="[object DataView]";function Un(t,e,n,r){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var i=typeof t;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:is(t,e,n,r)}function is(t,e,n,r){t instanceof S&&(t=t._wrapped),e instanceof S&&(e=e._wrapped);var i=Ie.call(t);if(i!==Ie.call(e))return!1;if(Yi&&i=="[object Object]"&&Ge(t)){if(!Ge(e))return!1;i=vi}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return hi.valueOf.call(t)===hi.valueOf.call(e);case"[object ArrayBuffer]":case vi:return is(Ii(t),Ii(e),n,r)}var s=i==="[object Array]";if(!s&&es(t)){var o=Je(t);if(o!==Je(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;s=!0}if(!s){if(typeof t!="object"||typeof e!="object")return!1;var a=t.constructor,c=e.constructor;if(a!==c&&!($(a)&&a instanceof a&&$(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),s){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!Un(t[l],e[l],n,r))return!1}else{var g=N(t),h;if(l=g.length,N(e).length!==l)return!1;for(;l--;)if(h=g[l],!(bt(e,h)&&Un(t[h],e[h],n,r)))return!1}return n.pop(),r.pop(),!0}function gu(t,e){return Un(t,e)}function Se(t){if(!Lt(t))return[];var e=[];for(var n in t)e.push(n);return Hi&&ns(t,e),e}function ir(t){var e=J(t);return function(n){if(n==null)return!1;var r=Se(n);if(J(r))return!1;for(var i=0;i<e;i++)if(!$(n[t[i]]))return!1;return t!==as||!$(n[sr])}}var sr="forEach",ss="has",or=["clear","delete"],os=["get",ss,"set"],mu=or.concat(sr,os),as=or.concat(os),Iu=["add"].concat(or,sr,ss);const vu=nr?ir(mu):F("Map"),Tu=nr?ir(as):F("WeakMap"),yu=nr?ir(Iu):F("Set"),bu=F("WeakSet");function se(t){for(var e=N(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function wu(t){for(var e=N(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function us(t){for(var e={},n=N(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function Bn(t){var e=[];for(var n in t)$(t[n])&&e.push(n);return e.sort()}function ar(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||n==null)return n;for(var i=1;i<r;i++)for(var s=arguments[i],o=t(s),a=o.length,c=0;c<a;c++){var l=o[c];(!e||n[l]===void 0)&&(n[l]=s[l])}return n}}const cs=ar(Se),We=ar(N),ls=ar(Se,!0);function ku(){return function(){}}function fs(t){if(!Lt(t))return{};if(di)return di(t);var e=ku();e.prototype=t;var n=new e;return e.prototype=null,n}function Su(t,e){var n=fs(t);return e&&We(n,e),n}function _u(t){return Lt(t)?Ht(t)?t.slice():cs({},t):t}function Cu(t,e){return e(t),t}function hs(t){return Ht(t)?t:[t]}S.toPath=hs;function _e(t){return S.toPath(t)}function ur(t,e){for(var n=e.length,r=0;r<n;r++){if(t==null)return;t=t[e[r]]}return n?t:void 0}function ps(t,e,n){var r=ur(t,_e(e));return qi(r)?n:r}function xu(t,e){e=_e(e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(!bt(t,i))return!1;t=t[i]}return!!n}function cr(t){return t}function ve(t){return t=We({},t),function(e){return rs(e,t)}}function lr(t){return t=_e(t),function(e){return ur(e,t)}}function Ce(t,e,n){if(e===void 0)return t;switch(n??3){case 1:return function(r){return t.call(e,r)};case 3:return function(r,i,s){return t.call(e,r,i,s)};case 4:return function(r,i,s,o){return t.call(e,r,i,s,o)}}return function(){return t.apply(e,arguments)}}function ds(t,e,n){return t==null?cr:$(t)?Ce(t,e,n):Lt(t)&&!Ht(t)?ve(t):lr(t)}function fr(t,e){return ds(t,e,1/0)}S.iteratee=fr;function W(t,e,n){return S.iteratee!==fr?S.iteratee(t,e):ds(t,e,n)}function Eu(t,e,n){e=W(e,n);for(var r=N(t),i=r.length,s={},o=0;o<i;o++){var a=r[o];s[a]=e(t[a],a,t)}return s}function gs(){}function Nu(t){return t==null?gs:function(e){return ps(t,e)}}function Pu(t,e,n){var r=Array(Math.max(0,t));e=Ce(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function Dn(t,e){return e==null&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}const Te=Date.now||function(){return new Date().getTime()};function ms(t){var e=function(s){return t[s]},n="(?:"+N(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(s){return s=s==null?"":""+s,r.test(s)?s.replace(i,e):s}}const Is={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ou=ms(Is),Au=us(Is),Mu=ms(Au),Vu=S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Nn=/(.)^/,Ru={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Fu=/\\|'|\r|\n|\u2028|\u2029/g;function Uu(t){return"\\"+Ru[t]}var Bu=/^\s*(\w|\$)+\s*$/;function Du(t,e,n){!e&&n&&(e=n),e=ls({},e,S.templateSettings);var r=RegExp([(e.escape||Nn).source,(e.interpolate||Nn).source,(e.evaluate||Nn).source].join("|")+"|$","g"),i=0,s="__p+='";t.replace(r,function(l,g,h,p,m){return s+=t.slice(i,m).replace(Fu,Uu),i=m+l.length,g?s+=`'+
((__t=(`+g+`))==null?'':_.escape(__t))+
'`:h?s+=`'+
((__t=(`+h+`))==null?'':__t)+
'`:p&&(s+=`';
`+p+`
__p+='`),l}),s+=`';
`;var o=e.variable;if(o){if(!Bu.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var a;try{a=new Function(o,"_",s)}catch(l){throw l.source=s,l}var c=function(l){return a.call(this,l,S)};return c.source="function("+o+`){
`+s+"}",c}function $u(t,e,n){e=_e(e);var r=e.length;if(!r)return $(n)?n.call(t):n;for(var i=0;i<r;i++){var s=t?.[e[i]];s===void 0&&(s=n,i=r),t=$(s)?s.call(t):s}return t}var Lu=0;function Hu(t){var e=++Lu+"";return t?t+e:e}function qu(t){var e=S(t);return e._chain=!0,e}function vs(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var s=fs(t.prototype),o=t.apply(s,i);return Lt(o)?o:s}var oe=G(function(t,e){var n=oe.placeholder,r=function(){for(var i=0,s=e.length,o=Array(s),a=0;a<s;a++)o[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)o.push(arguments[i++]);return vs(t,r,this,this,o)};return r});oe.placeholder=S;const Ts=G(function(t,e,n){if(!$(t))throw new TypeError("Bind must be called on a function");var r=G(function(i){return vs(t,r,e,this,n.concat(i))});return r}),tt=Zi(J);function qt(t,e,n,r){if(r=r||[],!e&&e!==0)e=1/0;else if(e<=0)return r.concat(t);for(var i=r.length,s=0,o=J(t);s<o;s++){var a=t[s];if(tt(a)&&(Ht(a)||rr(a)))if(e>1)qt(a,e-1,n,r),i=r.length;else for(var c=0,l=a.length;c<l;)r[i++]=a[c++];else n||(r[i++]=a)}return r}const Ku=G(function(t,e){e=qt(e,!1,!1);var n=e.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=Ts(t[r],t)}return t});function zu(t,e){var n=function(r){var i=n.cache,s=""+(e?e.apply(this,arguments):r);return bt(i,s)||(i[s]=t.apply(this,arguments)),i[s]};return n.cache={},n}const ys=G(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),Gu=oe(ys,S,1);function Ju(t,e,n){var r,i,s,o,a=0;n||(n={});var c=function(){a=n.leading===!1?0:Te(),r=null,o=t.apply(i,s),r||(i=s=null)},l=function(){var g=Te();!a&&n.leading===!1&&(a=g);var h=e-(g-a);return i=this,s=arguments,h<=0||h>e?(r&&(clearTimeout(r),r=null),a=g,o=t.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(c,h)),o};return l.cancel=function(){clearTimeout(r),a=0,r=i=s=null},l}function Wu(t,e,n){var r,i,s,o,a,c=function(){var g=Te()-i;e>g?r=setTimeout(c,e-g):(r=null,n||(o=t.apply(a,s)),r||(s=a=null))},l=G(function(g){return a=this,s=g,i=Te(),r||(r=setTimeout(c,e),n&&(o=t.apply(a,s))),o});return l.cancel=function(){clearTimeout(r),r=s=a=null},l}function ju(t,e){return oe(e,t)}function hr(t){return function(){return!t.apply(this,arguments)}}function Yu(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function Qu(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function bs(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Xu=oe(bs,2);function ws(t,e,n){e=W(e,n);for(var r=N(t),i,s=0,o=r.length;s<o;s++)if(i=r[s],e(t[i],i,t))return i}function ks(t){return function(e,n,r){n=W(n,r);for(var i=J(e),s=t>0?0:i-1;s>=0&&s<i;s+=t)if(n(e[s],s,e))return s;return-1}}const re=ks(1),Ss=ks(-1);function _s(t,e,n,r){n=W(n,r,1);for(var i=n(e),s=0,o=J(t);s<o;){var a=Math.floor((s+o)/2);n(t[a])<i?s=a+1:o=a}return s}function Cs(t,e,n){return function(r,i,s){var o=0,a=J(r);if(typeof s=="number")t>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=e(ke.call(r,o,a),Qi),s>=0?s+o:-1;for(s=t>0?o:a-1;s>=0&&s<a;s+=t)if(r[s]===i)return s;return-1}}const xs=Cs(1,re,_s),Zu=Cs(-1,Ss);function je(t,e,n){var r=tt(t)?re:ws,i=r(t,e,n);if(i!==void 0&&i!==-1)return t[i]}function tc(t,e){return je(t,ve(e))}function pt(t,e,n){e=Ce(e,n);var r,i;if(tt(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var s=N(t);for(r=0,i=s.length;r<i;r++)e(t[s[r]],s[r],t)}return t}function Bt(t,e,n){e=W(e,n);for(var r=!tt(t)&&N(t),i=(r||t).length,s=Array(i),o=0;o<i;o++){var a=r?r[o]:o;s[o]=e(t[a],a,t)}return s}function Es(t){var e=function(n,r,i,s){var o=!tt(n)&&N(n),a=(o||n).length,c=t>0?0:a-1;for(s||(i=n[o?o[c]:c],c+=t);c>=0&&c<a;c+=t){var l=o?o[c]:c;i=r(i,n[l],l,n)}return i};return function(n,r,i,s){var o=arguments.length>=3;return e(n,Ce(r,s,4),i,o)}}const Pn=Es(1),Ti=Es(-1);function ie(t,e,n){var r=[];return e=W(e,n),pt(t,function(i,s,o){e(i,s,o)&&r.push(i)}),r}function ec(t,e,n){return ie(t,hr(W(e)),n)}function yi(t,e,n){e=W(e,n);for(var r=!tt(t)&&N(t),i=(r||t).length,s=0;s<i;s++){var o=r?r[s]:s;if(!e(t[o],o,t))return!1}return!0}function bi(t,e,n){e=W(e,n);for(var r=!tt(t)&&N(t),i=(r||t).length,s=0;s<i;s++){var o=r?r[s]:s;if(e(t[o],o,t))return!0}return!1}function ht(t,e,n,r){return tt(t)||(t=se(t)),(typeof n!="number"||r)&&(n=0),xs(t,e,n)>=0}const nc=G(function(t,e,n){var r,i;return $(e)?i=e:(e=_e(e),r=e.slice(0,-1),e=e[e.length-1]),Bt(t,function(s){var o=i;if(!o){if(r&&r.length&&(s=ur(s,r)),s==null)return;o=s[e]}return o==null?o:o.apply(s,n)})});function pr(t,e){return Bt(t,lr(e))}function rc(t,e){return ie(t,ve(e))}function Ns(t,e,n){var r=-1/0,i=-1/0,s,o;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=tt(t)?t:se(t);for(var a=0,c=t.length;a<c;a++)s=t[a],s!=null&&s>r&&(r=s)}else e=W(e,n),pt(t,function(l,g,h){o=e(l,g,h),(o>i||o===-1/0&&r===-1/0)&&(r=l,i=o)});return r}function ic(t,e,n){var r=1/0,i=1/0,s,o;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=tt(t)?t:se(t);for(var a=0,c=t.length;a<c;a++)s=t[a],s!=null&&s<r&&(r=s)}else e=W(e,n),pt(t,function(l,g,h){o=e(l,g,h),(o<i||o===1/0&&r===1/0)&&(r=l,i=o)});return r}var sc=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ps(t){return t?Ht(t)?ke.call(t):er(t)?t.match(sc):tt(t)?Bt(t,cr):se(t):[]}function Os(t,e,n){if(e==null||n)return tt(t)||(t=se(t)),t[Dn(t.length-1)];var r=Ps(t),i=J(r);e=Math.max(Math.min(e,i),0);for(var s=i-1,o=0;o<e;o++){var a=Dn(o,s),c=r[o];r[o]=r[a],r[a]=c}return r.slice(0,e)}function oc(t){return Os(t,1/0)}function ac(t,e,n){var r=0;return e=W(e,n),pr(Bt(t,function(i,s,o){return{value:i,index:r++,criteria:e(i,s,o)}}).sort(function(i,s){var o=i.criteria,a=s.criteria;if(o!==a){if(o>a||o===void 0)return 1;if(o<a||a===void 0)return-1}return i.index-s.index}),"value")}function an(t,e){return function(n,r,i){var s=e?[[],[]]:{};return r=W(r,i),pt(n,function(o,a){var c=r(o,a,n);t(s,o,c)}),s}}const uc=an(function(t,e,n){bt(t,n)?t[n].push(e):t[n]=[e]}),cc=an(function(t,e,n){t[n]=e}),lc=an(function(t,e,n){bt(t,n)?t[n]++:t[n]=1}),fc=an(function(t,e,n){t[n?0:1].push(e)},!0);function hc(t){return t==null?0:tt(t)?t.length:N(t).length}function pc(t,e,n){return e in n}const As=G(function(t,e){var n={},r=e[0];if(t==null)return n;$(r)?(e.length>1&&(r=Ce(r,e[1])),e=Se(t)):(r=pc,e=qt(e,!1,!1),t=Object(t));for(var i=0,s=e.length;i<s;i++){var o=e[i],a=t[o];r(a,o,t)&&(n[o]=a)}return n}),dc=G(function(t,e){var n=e[0],r;return $(n)?(n=hr(n),e.length>1&&(r=e[1])):(e=Bt(qt(e,!1,!1),String),n=function(i,s){return!ht(e,s)}),As(t,n,r)});function Ms(t,e,n){return ke.call(t,0,Math.max(0,t.length-(e==null||n?1:e)))}function On(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[0]:Ms(t,t.length-e)}function Ke(t,e,n){return ke.call(t,e==null||n?1:e)}function gc(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[t.length-1]:Ke(t,Math.max(0,t.length-e))}function mc(t){return ie(t,Boolean)}function Ic(t,e){return qt(t,e,!1)}const Vs=G(function(t,e){return e=qt(e,!0,!0),ie(t,function(n){return!ht(e,n)})}),vc=G(function(t,e){return Vs(t,e)});function $n(t,e,n,r){Ki(e)||(r=n,n=e,e=!1),n!=null&&(n=W(n,r));for(var i=[],s=[],o=0,a=J(t);o<a;o++){var c=t[o],l=n?n(c,o,t):c;e&&!n?((!o||s!==l)&&i.push(c),s=l):n?ht(s,l)||(s.push(l),i.push(c)):ht(i,c)||i.push(c)}return i}const Tc=G(function(t){return $n(qt(t,!0,!0))});function yc(t){for(var e=[],n=arguments.length,r=0,i=J(t);r<i;r++){var s=t[r];if(!ht(e,s)){var o;for(o=1;o<n&&ht(arguments[o],s);o++);o===n&&e.push(s)}}return e}function Ln(t){for(var e=t&&Ns(t,J).length||0,n=Array(e),r=0;r<e;r++)n[r]=pr(t,r);return n}const bc=G(Ln);function wc(t,e){for(var n={},r=0,i=J(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function kc(t,e,n){e==null&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),s=0;s<r;s++,t+=n)i[s]=t;return i}function Sc(t,e){if(e==null||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(ke.call(t,r,r+=e));return n}function dr(t,e){return t._chain?S(e).chain():e}function Rs(t){return pt(Bn(t),function(e){var n=S[e]=t[e];S.prototype[e]=function(){var r=[this._wrapped];return Wa.apply(r,arguments),dr(this,n.apply(S,r))}}),S}pt(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=on[t];S.prototype[t]=function(){var n=this._wrapped;return n!=null&&(e.apply(n,arguments),(t==="shift"||t==="splice")&&n.length===0&&delete n[0]),dr(this,n)}});pt(["concat","join","slice"],function(t){var e=on[t];S.prototype[t]=function(){var n=this._wrapped;return n!=null&&(n=e.apply(n,arguments)),dr(this,n)}});const _c=Object.freeze(Object.defineProperty({__proto__:null,VERSION:$i,restArguments:G,isObject:Lt,isNull:eu,isUndefined:qi,isBoolean:Ki,isElement:nu,isString:er,isNumber:zi,isDate:ru,isRegExp:iu,isError:su,isSymbol:Gi,isArrayBuffer:Ji,isDataView:Ge,isArray:Ht,isFunction:$,isArguments:rr,isFinite:cu,isNaN:Qi,isTypedArray:es,isEmpty:du,isMatch:rs,isEqual:gu,isMap:vu,isWeakMap:Tu,isSet:yu,isWeakSet:bu,keys:N,allKeys:Se,values:se,pairs:wu,invert:us,functions:Bn,methods:Bn,extend:cs,extendOwn:We,assign:We,defaults:ls,create:Su,clone:_u,tap:Cu,get:ps,has:xu,mapObject:Eu,identity:cr,constant:Xi,noop:gs,toPath:hs,property:lr,propertyOf:Nu,matcher:ve,matches:ve,times:Pu,random:Dn,now:Te,escape:Ou,unescape:Mu,templateSettings:Vu,template:Du,result:$u,uniqueId:Hu,chain:qu,iteratee:fr,partial:oe,bind:Ts,bindAll:Ku,memoize:zu,delay:ys,defer:Gu,throttle:Ju,debounce:Wu,wrap:ju,negate:hr,compose:Yu,after:Qu,before:bs,once:Xu,findKey:ws,findIndex:re,findLastIndex:Ss,sortedIndex:_s,indexOf:xs,lastIndexOf:Zu,find:je,detect:je,findWhere:tc,each:pt,forEach:pt,map:Bt,collect:Bt,reduce:Pn,foldl:Pn,inject:Pn,reduceRight:Ti,foldr:Ti,filter:ie,select:ie,reject:ec,every:yi,all:yi,some:bi,any:bi,contains:ht,includes:ht,include:ht,invoke:nc,pluck:pr,where:rc,max:Ns,min:ic,shuffle:oc,sample:Os,sortBy:ac,groupBy:uc,indexBy:cc,countBy:lc,partition:fc,toArray:Ps,size:hc,pick:As,omit:dc,first:On,head:On,take:On,initial:Ms,last:gc,rest:Ke,tail:Ke,drop:Ke,compact:mc,flatten:Ic,without:vc,uniq:$n,unique:$n,union:Tc,intersection:yc,difference:Vs,unzip:Ln,transpose:Ln,zip:bc,object:wc,range:kc,chunk:Sc,mixin:Rs,default:S},Symbol.toStringTag,{value:"Module"}));var M=Rs(_c);M._=M;let un=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");class gr{instanceIdInternal=gr.generatePluginIdInternal();enabledInternal=!0;paramsResultInternal={};generatedTrackIdsInternal=[];isRollbackable=!1;songCacheInternal;progress=null;isExecuting=!1;static providerId(){throw new Error("providerId() should be overwritten.")}static pluginId(){throw new Error("pluginId() should be overwritten.")}static providerDisplayName(){throw new Error("providerDisplayName() should be overwritten.")}static pluginDisplayName(){throw new Error("pluginDisplayName() should be overwritten.")}static pluginDescription(){return null}static allowReset(){return!0}async init(e,n){}params(){return{}}songAccess(){return{}}allowManualApplyAdjust(){return!1}async run(e,n,r){}static async create(e,n){const r=new this;return r.resetInternal(),await r.init(e,n),r}get instanceId(){return this.instanceIdInternal}getParam(e,n){return e[n]}hasAllParamsSet(){for(const e of N(this.params()))if(!this.isParamProvided(e))return!1;return!0}isParamProvided(e){if(this.params()[e].optional)return!0;const n=this.paramsResultInternal[e];if(n==null)return!1;const i=this.params()[e].widget.type;switch(i){case V.Input:case V.Pitch:case V.Slider:case V.TrackSelector:case V.Select:case V.SelectList:case V.Switch:case V.InputNumber:case V.FileSelector:return!0;case V.MultiTrackSelector:return n.length>0;case V.TrackPitchSelector:return n.track!==void 0&&n.track!==null&&n.pitch!==void 0&&n.pitch!==null;case V.InstrumentSelector:return n.program!==void 0&&n.program!==null&&n.isDrum!==void 0&&n.isDrum!==null;case V.MultiSourceAudioSelector:return n!=null&&n.audioInfo!==void 0&&n.audioInfo!==null;case V.None:return n!=null;default:throw new Error(`Param nullness check needs to be implemented for widget type ${i}. Either use default nullness check or define custom logic.`)}}static id(){return`${this.providerId()}^_^${this.pluginId()}`}static getPrefixedArtifactId(e){return`${this.id()}.${e}`}setProgress(e){this.progress=e}getProgress(){return this.progress}getIsExecuting(){return this.isExecuting}setParamsInternal(e){this.paramsResultInternal=e,this.maybeSyncEnabledWithParamsReadiness()}getParamsInternal(){return this.paramsResultInternal}resetParamsInternal(){for(const e of N(this.params())){const n=this.params()[e];this.paramsResultInternal[e]=n.defaultValue}this.maybeSyncEnabledWithParamsReadiness()}resetInternal(){this.resetParamsInternal(),this.allowManualApplyAdjust()&&(this.enabledInternal=!1)}setEnabledInternal(e){this.enabledInternal=e}maybeSyncEnabledWithParamsReadiness(){this.allowManualApplyAdjust()&&!this.hasAllParamsSet()&&this.setEnabledInternal(!1)}static generatePluginIdInternal(){return un(10)}}class Cc{plugins=[];threwErrorInLastRun=!1;maxNumPluginsToKeep=50;originalSong;cloneSongFnInternal;readApisInternal;activePluginIndex=-1;addAsOrReplaceActivePlugin(e){let n;return this.activePluginIndex<=-1?n=0:this.plugins[this.activePluginIndex].isRollbackable?n=this.activePluginIndex+1:n=this.activePluginIndex,this.plugins.length>0&&this.plugins.splice(n,this.plugins.length-n),this.addPluginAt(e,n),this.getPluginIndexByPluginInstanceId(e.instanceId)}getPlugins(){return this.plugins}resetCache(){for(const e of this.plugins)delete e.songCacheInternal}setOriginalSong(e){this.originalSong=e}hasOriginalSong(){return!!this.originalSong}async run(e=0){if(!this.originalSong)return this.threwErrorInLastRun=!0,null;e=Math.max(0,e),this.setActivePluginIndex(e),this.threwErrorInLastRun=!1;const n=this.getIndexOfLatestPluginWithCacheBeforeIndex(e),r=await this.cloneCachedSongAtPluginIndex(n);for(let i=e;i<this.plugins.length;i+=1)delete this.plugins[i].songCacheInternal;for(let i=0;i<this.plugins.length;i+=1)this.plugins[i].isRollbackable=i<=n;for(let i=n>=0?n+1:0;i<this.plugins.length;i+=1){const s=this.plugins[i];if(!s.enabledInternal||!s.hasAllParamsSet())return r;r.setPluginContextInternal(s);try{s.isExecuting=!0,s.setProgress(null),await s.run(r,s.getParamsInternal(),this.readApisInternal),r.clearPluginContextInternal(),s.isExecuting=!1}catch{this.threwErrorInLastRun=!0,r.clearPluginContextInternal(),s.isExecuting=!1;const a=this.getIndexOfLatestPluginWithCacheBeforeIndex(i);return a>=0?await this.cloneSong(this.plugins[a].songCacheInternal):await this.cloneSong(this.originalSong)}s.songCacheInternal=await this.cloneSong(r),s.isRollbackable=!0}return r}restoreCachedPlugin(e){return this.setActivePluginIndex(e),this.cloneCachedSongAtPluginIndex(e)}async cloneSong(e){if(!this.cloneSongFnInternal)throw new Error("Pipeline is not provided with a clone song function.");return this.cloneSongFnInternal(e)}getActivePluginIndex(){return this.activePluginIndex}setActivePluginIndex(e){this.activePluginIndex=e}async cloneCachedSongAtPluginIndex(e){if(e>=0)return await this.cloneSong(this.plugins[e].songCacheInternal);if(!this.originalSong)throw new Error("Original song is not avaiable to clone.");return await this.cloneSong(this.originalSong)}reset(){this.plugins.splice(0,this.plugins.length),this.originalSong=void 0,this.activePluginIndex=-1,this.threwErrorInLastRun=!1}isPluginFunctioning(e){return!!e.songCacheInternal}getPluginIndexByPluginInstanceId(e){return re(this.plugins,n=>n.instanceId===e)}getThrewErrorInLastRun(){return this.threwErrorInLastRun}getPluginCache(e){return e.songCacheInternal}setMaxNumPluginsToKeep(e){this.maxNumPluginsToKeep=e,this.maintainPluginListSize()}getIndexOfLatestPluginWithCacheBeforeIndex(e){for(let n=e-1;n>=0;n-=1)if(this.getPluginCache(this.plugins[n]))return n;return-1}maintainPluginListSize(){for(;this.plugins.length>this.maxNumPluginsToKeep&&this.plugins.length>0;)this.plugins.shift()}addPluginAt(e,n){this.plugins.splice(n,0,e),this.maintainPluginListSize()}}var at=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xc(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function Ec(t,e,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=t[o],c=n!==void 0?n(a,e):a-e;c>=0?(s=o,i=o-1):r=o+1}return s}function Nc(t,e,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=t[o],c=n!==void 0?n(a,e):a-e;c>0?(s=o,i=o-1):r=o+1}return s}function Pc(t,e,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=t[o],c=n!==void 0?n(a,e):a-e;c<0?(s=o,r=o+1):i=o-1}return s}function Oc(t,e,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=t[o],c=n!==void 0?n(a,e):a-e;c<=0?(s=o,r=o+1):i=o-1}return s}function Ac(t,e,n,r,i){for(;r<=i;){var s=r+i>>>1,o=t[s],a=n!==void 0?n(o,e):o-e;if(a===0)return s;a<=0?r=s+1:i=s-1}return-1}function ce(t,e,n,r,i,s){return typeof n=="function"?s(t,e,n,r===void 0?0:r|0,i===void 0?t.length-1:i|0):s(t,e,void 0,n===void 0?0:n|0,r===void 0?t.length-1:r|0)}var R={ge:function(t,e,n,r,i){return ce(t,e,n,r,i,Ec)},gt:function(t,e,n,r,i){return ce(t,e,n,r,i,Nc)},lt:function(t,e,n,r,i){return ce(t,e,n,r,i,Pc)},le:function(t,e,n,r,i){return ce(t,e,n,r,i,Oc)},eq:function(t,e,n,r,i){return ce(t,e,n,r,i,Ac)}},Hn={exports:{}};(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",c="[object Date]",l="[object Error]",g="[object Function]",h="[object GeneratorFunction]",p="[object Map]",m="[object Number]",I="[object Object]",y="[object Promise]",T="[object RegExp]",k="[object Set]",w="[object String]",j="[object Symbol]",b="[object WeakMap]",P="[object ArrayBuffer]",ot="[object DataView]",Kt="[object Float32Array]",Ar="[object Float64Array]",Mr="[object Int8Array]",Vr="[object Int16Array]",Rr="[object Int32Array]",Fr="[object Uint8Array]",Ur="[object Uint8ClampedArray]",Br="[object Uint16Array]",Dr="[object Uint32Array]",So=/[\\^$.*+?()[\]{}|]/g,_o=/\w*$/,Co=/^\[object .+?Constructor\]$/,xo=/^(?:0|[1-9]\d*)$/,C={};C[s]=C[o]=C[P]=C[ot]=C[a]=C[c]=C[Kt]=C[Ar]=C[Mr]=C[Vr]=C[Rr]=C[p]=C[m]=C[I]=C[T]=C[k]=C[w]=C[j]=C[Fr]=C[Ur]=C[Br]=C[Dr]=!0,C[l]=C[g]=C[b]=!1;var Eo=typeof at=="object"&&at&&at.Object===Object&&at,No=typeof self=="object"&&self&&self.Object===Object&&self,ut=Eo||No||Function("return this")(),$r=e&&!e.nodeType&&e,Lr=$r&&!0&&t&&!t.nodeType&&t,Po=Lr&&Lr.exports===$r;function Oo(u,f){return u.set(f[0],f[1]),u}function Ao(u,f){return u.add(f),u}function Mo(u,f){for(var d=-1,v=u?u.length:0;++d<v&&f(u[d],d,u)!==!1;);return u}function Vo(u,f){for(var d=-1,v=f.length,A=u.length;++d<v;)u[A+d]=f[d];return u}function Hr(u,f,d,v){var A=-1,U=u?u.length:0;for(v&&U&&(d=u[++A]);++A<U;)d=f(d,u[A],A,u);return d}function Ro(u,f){for(var d=-1,v=Array(u);++d<u;)v[d]=f(d);return v}function Fo(u,f){return u?.[f]}function qr(u){var f=!1;if(u!=null&&typeof u.toString!="function")try{f=!!(u+"")}catch{}return f}function Kr(u){var f=-1,d=Array(u.size);return u.forEach(function(v,A){d[++f]=[A,v]}),d}function vn(u,f){return function(d){return u(f(d))}}function zr(u){var f=-1,d=Array(u.size);return u.forEach(function(v){d[++f]=v}),d}var Uo=Array.prototype,Bo=Function.prototype,Ee=Object.prototype,Tn=ut["__core-js_shared__"],Gr=function(){var u=/[^.]+$/.exec(Tn&&Tn.keys&&Tn.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Jr=Bo.toString,dt=Ee.hasOwnProperty,Ne=Ee.toString,Do=RegExp("^"+Jr.call(dt).replace(So,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wr=Po?ut.Buffer:void 0,jr=ut.Symbol,Yr=ut.Uint8Array,$o=vn(Object.getPrototypeOf,Object),Lo=Object.create,Ho=Ee.propertyIsEnumerable,qo=Uo.splice,Qr=Object.getOwnPropertySymbols,Ko=Wr?Wr.isBuffer:void 0,zo=vn(Object.keys,Object),yn=Jt(ut,"DataView"),ae=Jt(ut,"Map"),bn=Jt(ut,"Promise"),wn=Jt(ut,"Set"),kn=Jt(ut,"WeakMap"),ue=Jt(Object,"create"),Go=St(yn),Jo=St(ae),Wo=St(bn),jo=St(wn),Yo=St(kn),Xr=jr?jr.prototype:void 0,Zr=Xr?Xr.valueOf:void 0;function wt(u){var f=-1,d=u?u.length:0;for(this.clear();++f<d;){var v=u[f];this.set(v[0],v[1])}}function Qo(){this.__data__=ue?ue(null):{}}function Xo(u){return this.has(u)&&delete this.__data__[u]}function Zo(u){var f=this.__data__;if(ue){var d=f[u];return d===r?void 0:d}return dt.call(f,u)?f[u]:void 0}function ta(u){var f=this.__data__;return ue?f[u]!==void 0:dt.call(f,u)}function ea(u,f){var d=this.__data__;return d[u]=ue&&f===void 0?r:f,this}wt.prototype.clear=Qo,wt.prototype.delete=Xo,wt.prototype.get=Zo,wt.prototype.has=ta,wt.prototype.set=ea;function ct(u){var f=-1,d=u?u.length:0;for(this.clear();++f<d;){var v=u[f];this.set(v[0],v[1])}}function na(){this.__data__=[]}function ra(u){var f=this.__data__,d=Pe(f,u);if(d<0)return!1;var v=f.length-1;return d==v?f.pop():qo.call(f,d,1),!0}function ia(u){var f=this.__data__,d=Pe(f,u);return d<0?void 0:f[d][1]}function sa(u){return Pe(this.__data__,u)>-1}function oa(u,f){var d=this.__data__,v=Pe(d,u);return v<0?d.push([u,f]):d[v][1]=f,this}ct.prototype.clear=na,ct.prototype.delete=ra,ct.prototype.get=ia,ct.prototype.has=sa,ct.prototype.set=oa;function zt(u){var f=-1,d=u?u.length:0;for(this.clear();++f<d;){var v=u[f];this.set(v[0],v[1])}}function aa(){this.__data__={hash:new wt,map:new(ae||ct),string:new wt}}function ua(u){return Oe(this,u).delete(u)}function ca(u){return Oe(this,u).get(u)}function la(u){return Oe(this,u).has(u)}function fa(u,f){return Oe(this,u).set(u,f),this}zt.prototype.clear=aa,zt.prototype.delete=ua,zt.prototype.get=ca,zt.prototype.has=la,zt.prototype.set=fa;function Gt(u){this.__data__=new ct(u)}function ha(){this.__data__=new ct}function pa(u){return this.__data__.delete(u)}function da(u){return this.__data__.get(u)}function ga(u){return this.__data__.has(u)}function ma(u,f){var d=this.__data__;if(d instanceof ct){var v=d.__data__;if(!ae||v.length<n-1)return v.push([u,f]),this;d=this.__data__=new zt(v)}return d.set(u,f),this}Gt.prototype.clear=ha,Gt.prototype.delete=pa,Gt.prototype.get=da,Gt.prototype.has=ga,Gt.prototype.set=ma;function Ia(u,f){var d=Cn(u)||La(u)?Ro(u.length,String):[],v=d.length,A=!!v;for(var U in u)(f||dt.call(u,U))&&!(A&&(U=="length"||Ua(U,v)))&&d.push(U);return d}function ti(u,f,d){var v=u[f];(!(dt.call(u,f)&&ii(v,d))||d===void 0&&!(f in u))&&(u[f]=d)}function Pe(u,f){for(var d=u.length;d--;)if(ii(u[d][0],f))return d;return-1}function va(u,f){return u&&ei(f,xn(f),u)}function Sn(u,f,d,v,A,U,et){var q;if(v&&(q=U?v(u,A,U,et):v(u)),q!==void 0)return q;if(!Ae(u))return u;var ai=Cn(u);if(ai){if(q=Va(u),!f)return Oa(u,q)}else{var Wt=kt(u),ui=Wt==g||Wt==h;if(qa(u))return Sa(u,f);if(Wt==I||Wt==s||ui&&!U){if(qr(u))return U?u:{};if(q=Ra(ui?{}:u),!f)return Aa(u,va(q,u))}else{if(!C[Wt])return U?u:{};q=Fa(u,Wt,Sn,f)}}et||(et=new Gt);var ci=et.get(u);if(ci)return ci;if(et.set(u,q),!ai)var li=d?Ma(u):xn(u);return Mo(li||u,function(En,Me){li&&(Me=En,En=u[Me]),ti(q,Me,Sn(En,f,d,v,Me,u,et))}),q}function Ta(u){return Ae(u)?Lo(u):{}}function ya(u,f,d){var v=f(u);return Cn(u)?v:Vo(v,d(u))}function ba(u){return Ne.call(u)}function wa(u){if(!Ae(u)||Da(u))return!1;var f=oi(u)||qr(u)?Do:Co;return f.test(St(u))}function ka(u){if(!ri(u))return zo(u);var f=[];for(var d in Object(u))dt.call(u,d)&&d!="constructor"&&f.push(d);return f}function Sa(u,f){if(f)return u.slice();var d=new u.constructor(u.length);return u.copy(d),d}function _n(u){var f=new u.constructor(u.byteLength);return new Yr(f).set(new Yr(u)),f}function _a(u,f){var d=f?_n(u.buffer):u.buffer;return new u.constructor(d,u.byteOffset,u.byteLength)}function Ca(u,f,d){var v=f?d(Kr(u),!0):Kr(u);return Hr(v,Oo,new u.constructor)}function xa(u){var f=new u.constructor(u.source,_o.exec(u));return f.lastIndex=u.lastIndex,f}function Ea(u,f,d){var v=f?d(zr(u),!0):zr(u);return Hr(v,Ao,new u.constructor)}function Na(u){return Zr?Object(Zr.call(u)):{}}function Pa(u,f){var d=f?_n(u.buffer):u.buffer;return new u.constructor(d,u.byteOffset,u.length)}function Oa(u,f){var d=-1,v=u.length;for(f||(f=Array(v));++d<v;)f[d]=u[d];return f}function ei(u,f,d,v){d||(d={});for(var A=-1,U=f.length;++A<U;){var et=f[A],q=v?v(d[et],u[et],et,d,u):void 0;ti(d,et,q===void 0?u[et]:q)}return d}function Aa(u,f){return ei(u,ni(u),f)}function Ma(u){return ya(u,xn,ni)}function Oe(u,f){var d=u.__data__;return Ba(f)?d[typeof f=="string"?"string":"hash"]:d.map}function Jt(u,f){var d=Fo(u,f);return wa(d)?d:void 0}var ni=Qr?vn(Qr,Object):Ga,kt=ba;(yn&&kt(new yn(new ArrayBuffer(1)))!=ot||ae&&kt(new ae)!=p||bn&&kt(bn.resolve())!=y||wn&&kt(new wn)!=k||kn&&kt(new kn)!=b)&&(kt=function(u){var f=Ne.call(u),d=f==I?u.constructor:void 0,v=d?St(d):void 0;if(v)switch(v){case Go:return ot;case Jo:return p;case Wo:return y;case jo:return k;case Yo:return b}return f});function Va(u){var f=u.length,d=u.constructor(f);return f&&typeof u[0]=="string"&&dt.call(u,"index")&&(d.index=u.index,d.input=u.input),d}function Ra(u){return typeof u.constructor=="function"&&!ri(u)?Ta($o(u)):{}}function Fa(u,f,d,v){var A=u.constructor;switch(f){case P:return _n(u);case a:case c:return new A(+u);case ot:return _a(u,v);case Kt:case Ar:case Mr:case Vr:case Rr:case Fr:case Ur:case Br:case Dr:return Pa(u,v);case p:return Ca(u,v,d);case m:case w:return new A(u);case T:return xa(u);case k:return Ea(u,v,d);case j:return Na(u)}}function Ua(u,f){return f=f??i,!!f&&(typeof u=="number"||xo.test(u))&&u>-1&&u%1==0&&u<f}function Ba(u){var f=typeof u;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?u!=="__proto__":u===null}function Da(u){return!!Gr&&Gr in u}function ri(u){var f=u&&u.constructor,d=typeof f=="function"&&f.prototype||Ee;return u===d}function St(u){if(u!=null){try{return Jr.call(u)}catch{}try{return u+""}catch{}}return""}function $a(u){return Sn(u,!0,!0)}function ii(u,f){return u===f||u!==u&&f!==f}function La(u){return Ha(u)&&dt.call(u,"callee")&&(!Ho.call(u,"callee")||Ne.call(u)==s)}var Cn=Array.isArray;function si(u){return u!=null&&Ka(u.length)&&!oi(u)}function Ha(u){return za(u)&&si(u)}var qa=Ko||Ja;function oi(u){var f=Ae(u)?Ne.call(u):"";return f==g||f==h}function Ka(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=i}function Ae(u){var f=typeof u;return!!u&&(f=="object"||f=="function")}function za(u){return!!u&&typeof u=="object"}function xn(u){return si(u)?Ia(u):ka(u)}function Ga(){return[]}function Ja(){return!1}t.exports=$a})(Hn,Hn.exports);const wi=Hn.exports;class fe{ticks;bpm;time;constructor({ticks:e,bpm:n,time:r}){this.ticks=e,this.bpm=n,this.time=r}getTicks(){return this.ticks}getBpm(){return this.bpm}setBpmInternal(e){this.bpm=e}getTime(){return this.time}setTimeInternal(e){this.time=e}}class qn{ticks;numerator;denominator;constructor({ticks:e,numerator:n,denominator:r}){this.ticks=e,this.numerator=n,this.denominator=r}getTicks(){return this.ticks}setTicks(e){this.ticks=e}getNumerator(){return this.numerator}setNumerator(e){this.numerator=e}getDenominator(){return this.denominator}setDenominator(e){this.denominator=e}}function Mc(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}function mr(t){if(E(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=st(r)?Fc(r):mr(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(st(t))return t;if(Z(t))return t}}const Vc=/;(?![^(]*\))/g,Rc=/:(.+)/;function Fc(t){const e={};return t.split(Vc).forEach(n=>{if(n){const r=n.split(Rc);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ir(t){let e="";if(st(t))e=t;else if(E(t))for(let n=0;n<t.length;n++){const r=Ir(t[n]);r&&(e+=r+" ")}else if(Z(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Y=process.env.NODE_ENV!=="production"?Object.freeze({}):{};process.env.NODE_ENV!=="production"&&Object.freeze([]);const vr=()=>{},Uc=()=>!1,Bc=/^on[^a-z]/,Dc=t=>Bc.test(t),it=Object.assign,$c=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Lc=Object.prototype.hasOwnProperty,x=(t,e)=>Lc.call(t,e),E=Array.isArray,ee=t=>cn(t)==="[object Map]",Hc=t=>cn(t)==="[object Set]",L=t=>typeof t=="function",st=t=>typeof t=="string",Tr=t=>typeof t=="symbol",Z=t=>t!==null&&typeof t=="object",qc=t=>Z(t)&&L(t.then)&&L(t.catch),Kc=Object.prototype.toString,cn=t=>Kc.call(t),Fs=t=>cn(t).slice(8,-1),zc=t=>cn(t)==="[object Object]",yr=t=>st(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Gc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Sh=Gc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ye=(t,e)=>!Object.is(t,e),Jc=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})};let ki;const Wc=()=>ki||(ki=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Si(t,...e){}let jc;function Yc(t,e=jc){e&&e.active&&e.effects.push(t)}const Kn=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Us=t=>(t.w&Tt)>0,Bs=t=>(t.n&Tt)>0,Qc=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Tt},Xc=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];Us(i)&&!Bs(i)?i.delete(t):e[n++]=i,i.w&=~Tt,i.n&=~Tt}e.length=n}},zn=new WeakMap;let he=0,Tt=1;const Gn=30;let K;const At=Symbol(process.env.NODE_ENV!=="production"?"iterate":""),Jn=Symbol(process.env.NODE_ENV!=="production"?"Map key iterate":"");class Zc{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Yc(this,r)}run(){if(!this.active)return this.fn();let e=K,n=Mt;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=K,K=this,Mt=!0,Tt=1<<++he,he<=Gn?Qc(this):_i(this),this.fn()}finally{he<=Gn&&Xc(this),Tt=1<<--he,K=this.parent,Mt=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){K===this?this.deferStop=!0:this.active&&(_i(this),this.onStop&&this.onStop(),this.active=!1)}}function _i(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Mt=!0;const Ds=[];function $s(){Ds.push(Mt),Mt=!1}function Ls(){const t=Ds.pop();Mt=t===void 0?!0:t}function nt(t,e,n){if(Mt&&K){let r=zn.get(t);r||zn.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=Kn());const s=process.env.NODE_ENV!=="production"?{effect:K,target:t,type:e,key:n}:void 0;tl(i,s)}}function tl(t,e){let n=!1;he<=Gn?Bs(t)||(t.n|=Tt,n=!Us(t)):n=!t.has(K),n&&(t.add(K),K.deps.push(t),process.env.NODE_ENV!=="production"&&K.onTrack&&K.onTrack(Object.assign({effect:K},e)))}function yt(t,e,n,r,i,s){const o=zn.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&E(t))o.forEach((l,g)=>{(g==="length"||g>=r)&&a.push(l)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":E(t)?yr(n)&&a.push(o.get("length")):(a.push(o.get(At)),ee(t)&&a.push(o.get(Jn)));break;case"delete":E(t)||(a.push(o.get(At)),ee(t)&&a.push(o.get(Jn)));break;case"set":ee(t)&&a.push(o.get(At));break}const c=process.env.NODE_ENV!=="production"?{target:t,type:e,key:n,newValue:r,oldValue:i,oldTarget:s}:void 0;if(a.length===1)a[0]&&(process.env.NODE_ENV!=="production"?Ve(a[0],c):Ve(a[0]));else{const l=[];for(const g of a)g&&l.push(...g);process.env.NODE_ENV!=="production"?Ve(Kn(l),c):Ve(Kn(l))}}function Ve(t,e){const n=E(t)?t:[...t];for(const r of n)r.computed&&Ci(r,e);for(const r of n)r.computed||Ci(r,e)}function Ci(t,e){(t!==K||t.allowRecurse)&&(process.env.NODE_ENV!=="production"&&t.onTrigger&&t.onTrigger(it({effect:t},e)),t.scheduler?t.scheduler():t.run())}const el=Mc("__proto__,__v_isRef,__isVue"),Hs=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Tr)),nl=br(),rl=br(!0),il=br(!0,!0),xi=sl();function sl(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=_(this);for(let s=0,o=this.length;s<o;s++)nt(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(_)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){$s();const r=_(this)[e].apply(this,n);return Ls(),r}}),t}function br(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?Js:Gs:e?bl:zs).get(r))return r;const o=E(r);if(!t&&o&&x(xi,i))return Reflect.get(xi,i,s);const a=Reflect.get(r,i,s);return(Tr(i)?Hs.has(i):el(i))||(t||nt(r,"get",i),e)?a:D(a)?o&&yr(i)?a:a.value:Z(a)?t?js(a):Ws(a):a}}const ol=al();function al(t=!1){return function(n,r,i,s){let o=n[r];if(Dt(o)&&D(o)&&!D(i))return!1;if(!t&&!Dt(i)&&(Wn(i)||(i=_(i),o=_(o)),!E(n)&&D(o)&&!D(i)))return o.value=i,!0;const a=E(n)&&yr(r)?Number(r)<n.length:x(n,r),c=Reflect.set(n,r,i,s);return n===_(s)&&(a?Ye(i,o)&&yt(n,"set",r,i,o):yt(n,"add",r,i)),c}}function ul(t,e){const n=x(t,e),r=t[e],i=Reflect.deleteProperty(t,e);return i&&n&&yt(t,"delete",e,void 0,r),i}function cl(t,e){const n=Reflect.has(t,e);return(!Tr(e)||!Hs.has(e))&&nt(t,"has",e),n}function ll(t){return nt(t,"iterate",E(t)?"length":At),Reflect.ownKeys(t)}const fl={get:nl,set:ol,deleteProperty:ul,has:cl,ownKeys:ll},qs={get:rl,set(t,e){return process.env.NODE_ENV!=="production"&&Si(`Set operation on key "${String(e)}" failed: target is readonly.`,t),!0},deleteProperty(t,e){return process.env.NODE_ENV!=="production"&&Si(`Delete operation on key "${String(e)}" failed: target is readonly.`,t),!0}},hl=it({},qs,{get:il}),wr=t=>t,ln=t=>Reflect.getPrototypeOf(t);function Re(t,e,n=!1,r=!1){t=t.__v_raw;const i=_(t),s=_(e);n||(e!==s&&nt(i,"get",e),nt(i,"get",s));const{has:o}=ln(i),a=r?wr:n?Cr:_r;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function Fe(t,e=!1){const n=this.__v_raw,r=_(n),i=_(t);return e||(t!==i&&nt(r,"has",t),nt(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Ue(t,e=!1){return t=t.__v_raw,!e&&nt(_(t),"iterate",At),Reflect.get(t,"size",t)}function Ei(t){t=_(t);const e=_(this);return ln(e).has.call(e,t)||(e.add(t),yt(e,"add",t,t)),this}function Ni(t,e){e=_(e);const n=_(this),{has:r,get:i}=ln(n);let s=r.call(n,t);s?process.env.NODE_ENV!=="production"&&Ks(n,r,t):(t=_(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Ye(e,o)&&yt(n,"set",t,e,o):yt(n,"add",t,e),this}function Pi(t){const e=_(this),{has:n,get:r}=ln(e);let i=n.call(e,t);i?process.env.NODE_ENV!=="production"&&Ks(e,n,t):(t=_(t),i=n.call(e,t));const s=r?r.call(e,t):void 0,o=e.delete(t);return i&&yt(e,"delete",t,void 0,s),o}function Oi(){const t=_(this),e=t.size!==0,n=process.env.NODE_ENV!=="production"?ee(t)?new Map(t):new Set(t):void 0,r=t.clear();return e&&yt(t,"clear",void 0,void 0,n),r}function Be(t,e){return function(r,i){const s=this,o=s.__v_raw,a=_(o),c=e?wr:t?Cr:_r;return!t&&nt(a,"iterate",At),o.forEach((l,g)=>r.call(i,c(l),c(g),s))}}function De(t,e,n){return function(...r){const i=this.__v_raw,s=_(i),o=ee(s),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=i[t](...r),g=n?wr:e?Cr:_r;return!e&&nt(s,"iterate",c?Jn:At),{next(){const{value:h,done:p}=l.next();return p?{value:h,done:p}:{value:a?[g(h[0]),g(h[1])]:g(h),done:p}},[Symbol.iterator](){return this}}}}function gt(t){return function(...e){if(process.env.NODE_ENV!=="production"){const n=e[0]?`on key "${e[0]}" `:""}return t==="delete"?!1:this}}function pl(){const t={get(s){return Re(this,s)},get size(){return Ue(this)},has:Fe,add:Ei,set:Ni,delete:Pi,clear:Oi,forEach:Be(!1,!1)},e={get(s){return Re(this,s,!1,!0)},get size(){return Ue(this)},has:Fe,add:Ei,set:Ni,delete:Pi,clear:Oi,forEach:Be(!1,!0)},n={get(s){return Re(this,s,!0)},get size(){return Ue(this,!0)},has(s){return Fe.call(this,s,!0)},add:gt("add"),set:gt("set"),delete:gt("delete"),clear:gt("clear"),forEach:Be(!0,!1)},r={get(s){return Re(this,s,!0,!0)},get size(){return Ue(this,!0)},has(s){return Fe.call(this,s,!0)},add:gt("add"),set:gt("set"),delete:gt("delete"),clear:gt("clear"),forEach:Be(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=De(s,!1,!1),n[s]=De(s,!0,!1),e[s]=De(s,!1,!0),r[s]=De(s,!0,!0)}),[t,n,e,r]}const[dl,gl,ml,Il]=pl();function kr(t,e){const n=e?t?Il:ml:t?gl:dl;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(x(n,i)&&i in r?n:r,i,s)}const vl={get:kr(!1,!1)},Tl={get:kr(!0,!1)},yl={get:kr(!0,!0)};function Ks(t,e,n){const r=_(n);if(r!==n&&e.call(t,r)){const i=Fs(t)}}const zs=new WeakMap,bl=new WeakMap,Gs=new WeakMap,Js=new WeakMap;function wl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kl(t){return t.__v_skip||!Object.isExtensible(t)?0:wl(Fs(t))}function Ws(t){return Dt(t)?t:Sr(t,!1,fl,vl,zs)}function js(t){return Sr(t,!0,qs,Tl,Gs)}function $e(t){return Sr(t,!0,hl,yl,Js)}function Sr(t,e,n,r,i){if(!Z(t))return process.env.NODE_ENV,t;if(t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=kl(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Vt(t){return Dt(t)?Vt(t.__v_raw):!!(t&&t.__v_isReactive)}function Dt(t){return!!(t&&t.__v_isReadonly)}function Wn(t){return!!(t&&t.__v_isShallow)}function Qe(t){return Vt(t)||Dt(t)}function _(t){const e=t&&t.__v_raw;return e?_(e):t}function Sl(t){return Jc(t,"__v_skip",!0),t}const _r=t=>Z(t)?Ws(t):t,Cr=t=>Z(t)?js(t):t;function D(t){return!!(t&&t.__v_isRef===!0)}function _l(t){return D(t)?t.value:t}const Cl={get:(t,e,n)=>_l(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return D(i)&&!D(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function xl(t){return Vt(t)?t:new Proxy(t,Cl)}const Rt=[];function El(t){Rt.push(t)}function Nl(){Rt.pop()}function z(t,...e){$s();const n=Rt.length?Rt[Rt.length-1].component:null,r=n&&n.appContext.config.warnHandler,i=Pl();if(r)Ft(r,n,11,[t+e.join(""),n&&n.proxy,i.map(({vnode:s})=>`at <${fo(n,s.type)}>`).join(`
`),i]);else{const s=[`[Vue warn]: ${t}`,...e];i.length&&s.push(`
`,...Ol(i))}Ls()}function Pl(){let t=Rt[Rt.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const r=t.component&&t.component.parent;t=r&&r.vnode}return e}function Ol(t){const e=[];return t.forEach((n,r)=>{e.push(...r===0?[]:[`
`],...Al(n))}),e}function Al({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",r=t.component?t.component.parent==null:!1,i=` at <${fo(t.component,t.type,r)}`,s=">"+n;return t.props?[i,...Ml(t.props),s]:[i+s]}function Ml(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(r=>{e.push(...Ys(r,t[r]))}),n.length>3&&e.push(" ..."),e}function Ys(t,e,n){return st(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:D(e)?(e=Ys(t,_(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):L(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=_(e),n?e:[`${t}=`,e])}const Qs={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function Ft(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){Xs(s,e,n)}return i}function jn(t,e,n,r){if(L(t)){const s=Ft(t,e,n,r);return s&&qc(s)&&s.catch(o=>{Xs(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(jn(t[s],e,n,r));return i}function Xs(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=process.env.NODE_ENV!=="production"?Qs[n]:n;for(;s;){const l=s.ec;if(l){for(let g=0;g<l.length;g++)if(l[g](t,o,a)===!1)return}s=s.parent}const c=e.appContext.config.errorHandler;if(c){Ft(c,null,10,[t,o,a]);return}}Vl(t,n,i,r)}function Vl(t,e,n,r=!0){if(process.env.NODE_ENV!=="production"){const i=Qs[e];if(n&&El(n),z(`Unhandled error${i?` during execution of ${i}`:""}`),n&&Nl(),r)throw t}}let Xe=!1,Yn=!1;const rt=[];let It=0;const pe=[];let Yt=null,Ct=0;const de=[];let lt=null,xt=0;const Zs=Promise.resolve();let xr=null,Qn=null;const Rl=100;function Fl(t){const e=xr||Zs;return t?e.then(this?t.bind(this):t):e}function Ul(t){let e=It+1,n=rt.length;for(;e<n;){const r=e+n>>>1;ye(rt[r])<t?e=r+1:n=r}return e}function to(t){(!rt.length||!rt.includes(t,Xe&&t.allowRecurse?It+1:It))&&t!==Qn&&(t.id==null?rt.push(t):rt.splice(Ul(t.id),0,t),eo())}function eo(){!Xe&&!Yn&&(Yn=!0,xr=Zs.then(io))}function no(t,e,n,r){E(t)?n.push(...t):(!e||!e.includes(t,t.allowRecurse?r+1:r))&&n.push(t),eo()}function Bl(t){no(t,Yt,pe,Ct)}function ro(t){no(t,lt,de,xt)}function Er(t,e=null){if(pe.length){for(Qn=e,Yt=[...new Set(pe)],pe.length=0,process.env.NODE_ENV!=="production"&&(t=t||new Map),Ct=0;Ct<Yt.length;Ct++)process.env.NODE_ENV!=="production"&&Nr(t,Yt[Ct])||Yt[Ct]();Yt=null,Ct=0,Qn=null,Er(t,e)}}function Dl(t){if(Er(),de.length){const e=[...new Set(de)];if(de.length=0,lt){lt.push(...e);return}for(lt=e,process.env.NODE_ENV!=="production"&&(t=t||new Map),lt.sort((n,r)=>ye(n)-ye(r)),xt=0;xt<lt.length;xt++)process.env.NODE_ENV!=="production"&&Nr(t,lt[xt])||lt[xt]();lt=null,xt=0}}const ye=t=>t.id==null?1/0:t.id;function io(t){Yn=!1,Xe=!0,process.env.NODE_ENV!=="production"&&(t=t||new Map),Er(t),rt.sort((n,r)=>ye(n)-ye(r));const e=process.env.NODE_ENV!=="production"?n=>Nr(t,n):vr;try{for(It=0;It<rt.length;It++){const n=rt[It];if(n&&n.active!==!1){if(process.env.NODE_ENV!=="production"&&e(n))continue;Ft(n,null,14)}}}finally{It=0,rt.length=0,Dl(t),Xe=!1,xr=null,(rt.length||pe.length||de.length)&&io(t)}}function Nr(t,e){if(!t.has(e))t.set(e,1);else{const n=t.get(e);if(n>Rl){const r=e.ownerInstance,i=r&&lo(r.type);return z(`Maximum recursive updates exceeded${i?` in component <${i}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else t.set(e,n+1)}}const le=new Set;process.env.NODE_ENV!=="production"&&(Wc().__VUE_HMR_RUNTIME__={createRecord:An($l),rerender:An(Ll),reload:An(Hl)});const Ze=new Map;function $l(t,e){return Ze.has(t)?!1:(Ze.set(t,{initialDef:ge(e),instances:new Set}),!0)}function ge(t){return ho(t)?t.__vccOpts:t}function Ll(t,e){const n=Ze.get(t);!n||(n.initialDef.render=e,[...n.instances].forEach(r=>{e&&(r.render=e,ge(r.type).render=e),r.renderCache=[],r.update()}))}function Hl(t,e){const n=Ze.get(t);if(!n)return;e=ge(e),Ai(n.initialDef,e);const r=[...n.instances];for(const i of r){const s=ge(i.type);le.has(s)||(s!==n.initialDef&&Ai(s,e),le.add(s)),i.appContext.optionsCache.delete(i.type),i.ceReload?(le.add(s),i.ceReload(e.styles),le.delete(s)):i.parent?(to(i.parent.update),i.parent.type.__asyncLoader&&i.parent.ceReload&&i.parent.ceReload(e.styles)):i.appContext.reload?i.appContext.reload():typeof window<"u"&&window.location.reload()}ro(()=>{for(const i of r)le.delete(ge(i.type))})}function Ai(t,e){it(t,e);for(const n in t)n!=="__file"&&!(n in e)&&delete t[n]}function An(t){return(e,n)=>{try{return t(e,n)}catch{}}}let Pt=null,ql=null;const Kl=t=>t.__isSuspense;function zl(t,e){e&&e.pendingBranch?E(t)?e.effects.push(...t):e.effects.push(t):ro(t)}const Mi={};function Gl(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=Y){process.env.NODE_ENV!=="production"&&!e&&(n!==void 0&&z('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),r!==void 0&&z('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const a=w=>{z("Invalid watch source: ",w,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},c=ne;let l,g=!1,h=!1;if(D(t)?(l=()=>t.value,g=Wn(t)):Vt(t)?(l=()=>t,r=!0):E(t)?(h=!0,g=t.some(w=>Vt(w)||Wn(w)),l=()=>t.map(w=>{if(D(w))return w.value;if(Vt(w))return Qt(w);if(L(w))return Ft(w,c,2);process.env.NODE_ENV!=="production"&&a(w)})):L(t)?e?l=()=>Ft(t,c,2):l=()=>{if(!(c&&c.isUnmounted))return p&&p(),jn(t,c,3,[m])}:(l=vr,process.env.NODE_ENV!=="production"&&a(t)),e&&r){const w=l;l=()=>Qt(w())}let p,m=w=>{p=k.onStop=()=>{Ft(w,c,4)}},I=h?[]:Mi;const y=()=>{if(!!k.active)if(e){const w=k.run();(r||g||(h?w.some((j,b)=>Ye(j,I[b])):Ye(w,I)))&&(p&&p(),jn(e,c,3,[w,I===Mi?void 0:I,m]),I=w)}else k.run()};y.allowRecurse=!!e;let T;i==="sync"?T=y:i==="post"?T=()=>Fi(y,c&&c.suspense):T=()=>Bl(y);const k=new Zc(l,T);return process.env.NODE_ENV!=="production"&&(k.onTrack=s,k.onTrigger=o),e?n?y():I=k.run():i==="post"?Fi(k.run.bind(k),c&&c.suspense):k.run(),()=>{k.stop(),c&&c.scope&&$c(c.scope.effects,k)}}function Jl(t,e,n){const r=this.proxy,i=st(t)?t.includes(".")?Wl(r,t):()=>r[t]:t.bind(r,r);let s;L(e)?s=e:(s=e.handler,n=e);const o=ne;Ui(this);const a=Gl(i,s.bind(r),n);return o?Ui(o):gf(),a}function Wl(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Qt(t,e){if(!Z(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),D(t))Qt(t.value,e);else if(E(t))for(let n=0;n<t.length;n++)Qt(t[n],e);else if(Hc(t)||ee(t))t.forEach(n=>{Qt(n,e)});else if(zc(t))for(const n in t)Qt(t[n],e);return t}const jl=Symbol(),Xn=t=>t?mf(t)?If(t)||t.proxy:Xn(t.parent):null,tn=it(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>process.env.NODE_ENV!=="production"?$e(t.props):t.props,$attrs:t=>process.env.NODE_ENV!=="production"?$e(t.attrs):t.attrs,$slots:t=>process.env.NODE_ENV!=="production"?$e(t.slots):t.slots,$refs:t=>process.env.NODE_ENV!=="production"?$e(t.refs):t.refs,$parent:t=>Xn(t.parent),$root:t=>Xn(t.root),$emit:t=>t.emit,$options:t=>__VUE_OPTIONS_API__?Zl(t):t.type,$forceUpdate:t=>t.f||(t.f=()=>to(t.update)),$nextTick:t=>t.n||(t.n=Fl.bind(t.proxy)),$watch:t=>__VUE_OPTIONS_API__?Jl.bind(t):vr}),Yl=t=>t==="_"||t==="$",Ql={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:c}=t;if(process.env.NODE_ENV!=="production"&&e==="__isVue")return!0;if(process.env.NODE_ENV!=="production"&&r!==Y&&r.__isScriptSetup&&x(r,e))return r[e];let l;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(r!==Y&&x(r,e))return o[e]=1,r[e];if(i!==Y&&x(i,e))return o[e]=2,i[e];if((l=t.propsOptions[0])&&x(l,e))return o[e]=3,s[e];if(n!==Y&&x(n,e))return o[e]=4,n[e];(!__VUE_OPTIONS_API__||Xl)&&(o[e]=0)}}const g=tn[e];let h,p;if(g)return e==="$attrs"&&(nt(t,"get",e),process.env.NODE_ENV!=="production"&&void 0),g(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Y&&x(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,x(p,e))return p[e];process.env.NODE_ENV!=="production"&&Pt&&(!st(e)||e.indexOf("__v")!==0)&&(i!==Y&&Yl(e[0])&&x(i,e)?z(`Property ${JSON.stringify(e)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):t===Pt&&z(`Property ${JSON.stringify(e)} was accessed during render but is not defined on instance.`))},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return i!==Y&&x(i,e)?(i[e]=n,!0):r!==Y&&x(r,e)?(r[e]=n,!0):x(t.props,e)?(process.env.NODE_ENV!=="production"&&z(`Attempting to mutate prop "${e}". Props are readonly.`,t),!1):e[0]==="$"&&e.slice(1)in t?(process.env.NODE_ENV!=="production"&&z(`Attempting to mutate public property "${e}". Properties starting with $ are reserved and readonly.`,t),!1):(process.env.NODE_ENV!=="production"&&e in t.appContext.config.globalProperties?Object.defineProperty(s,e,{enumerable:!0,configurable:!0,value:n}):s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==Y&&x(t,o)||e!==Y&&x(e,o)||(a=s[0])&&x(a,o)||x(r,o)||x(tn,o)||x(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:x(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};process.env.NODE_ENV!=="production"&&(Ql.ownKeys=t=>(z("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(t)));let Xl=!0;function Zl(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let c;return a?c=a:!i.length&&!n&&!r?c=e:(c={},i.length&&i.forEach(l=>en(c,l,o,!0)),en(c,e,o)),s.set(e,c),c}function en(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&en(t,s,n,!0),i&&i.forEach(o=>en(t,o,n,!0));for(const o in e)if(r&&o==="expose")process.env.NODE_ENV!=="production"&&z('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const a=tf[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const tf={data:Vi,props:Et,emits:Et,methods:Et,computed:Et,beforeCreate:B,created:B,beforeMount:B,mounted:B,beforeUpdate:B,updated:B,beforeDestroy:B,beforeUnmount:B,destroyed:B,unmounted:B,activated:B,deactivated:B,errorCaptured:B,serverPrefetch:B,components:Et,directives:Et,watch:nf,provide:Vi,inject:ef};function Vi(t,e){return e?t?function(){return it(L(t)?t.call(this,this):t,L(e)?e.call(this,this):e)}:e:t}function ef(t,e){return Et(Ri(t),Ri(e))}function Ri(t){if(E(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function B(t,e){return t?[...new Set([].concat(t,e))]:e}function Et(t,e){return t?it(it(Object.create(null),t),e):e}function nf(t,e){if(!t)return e;if(!e)return t;const n=it(Object.create(null),t);for(const r in e)n[r]=B(t[r],e[r]);return n}function rf(){return{app:null,config:{isNativeTag:Uc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}const Fi=zl,sf=t=>t.__isTeleport,so=Symbol(process.env.NODE_ENV!=="production"?"Fragment":void 0),of=Symbol(process.env.NODE_ENV!=="production"?"Text":void 0),af=Symbol(process.env.NODE_ENV!=="production"?"Comment":void 0);Symbol(process.env.NODE_ENV!=="production"?"Static":void 0);let Xt=null;function uf(t){return t?t.__v_isVNode===!0:!1}const cf=(...t)=>uo(...t),oo="__vInternal",ao=({key:t})=>t??null,ze=({ref:t,ref_key:e,ref_for:n})=>t!=null?st(t)||D(t)||L(t)?{i:Pt,r:t,k:e,f:!!n}:t:null;function lf(t,e=null,n=null,r=0,i=null,s=t===so?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ao(e),ref:e&&ze(e),scopeId:ql,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(Pr(c,n),s&128&&t.normalize(c)):n&&(c.shapeFlag|=st(n)?8:16),process.env.NODE_ENV!=="production"&&c.key!==c.key&&z("VNode created with invalid key (NaN). VNode type:",c.type),!o&&Xt&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Xt.push(c),c}const ff=process.env.NODE_ENV!=="production"?cf:uo;function uo(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===jl)&&(process.env.NODE_ENV!=="production"&&!t&&z(`Invalid vnode type when creating vnode: ${t}.`),t=af),uf(t)){const a=nn(t,e,!0);return n&&Pr(a,n),!s&&Xt&&(a.shapeFlag&6?Xt[Xt.indexOf(t)]=a:Xt.push(a)),a.patchFlag|=-2,a}if(ho(t)&&(t=t.__vccOpts),e){e=hf(e);let{class:a,style:c}=e;a&&!st(a)&&(e.class=Ir(a)),Z(c)&&(Qe(c)&&!E(c)&&(c=it({},c)),e.style=mr(c))}const o=st(t)?1:Kl(t)?128:sf(t)?64:Z(t)?4:L(t)?2:0;return process.env.NODE_ENV!=="production"&&o&4&&Qe(t)&&(t=_(t),z("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,t)),lf(t,e,n,r,i,o,s,!0)}function hf(t){return t?Qe(t)||oo in t?it({},t):t:null}function nn(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?df(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&ao(a),ref:e&&e.ref?n&&i?E(i)?i.concat(ze(e)):[i,ze(e)]:ze(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:process.env.NODE_ENV!=="production"&&s===-1&&E(o)?o.map(co):o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==so?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&nn(t.ssContent),ssFallback:t.ssFallback&&nn(t.ssFallback),el:t.el,anchor:t.anchor}}function co(t){const e=nn(t);return E(t.children)&&(e.children=t.children.map(co)),e}function pf(t=" ",e=0){return ff(of,null,t,e)}function Pr(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(E(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Pr(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(oo in e)?e._ctx=Pt:i===3&&Pt&&(Pt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else L(e)?(e={default:e,_ctx:Pt},n=32):(e=String(e),r&64?(n=16,e=[pf(e)]):n=8);t.children=e,t.shapeFlag|=n}function df(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Ir([e.class,r.class]));else if(i==="style")e.style=mr([e.style,r.style]);else if(Dc(i)){const s=e[i],o=r[i];o&&s!==o&&!(E(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}rf();let ne=null;const Ui=t=>{ne=t,t.scope.on()},gf=()=>{ne&&ne.scope.off(),ne=null};function mf(t){return t.vnode.shapeFlag&4}function If(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(xl(Sl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in tn)return tn[n](t)}}))}const vf=/(?:^|[-_])(\w)/g,Tf=t=>t.replace(vf,e=>e.toUpperCase()).replace(/[-_]/g,"");function lo(t,e=!0){return L(t)?t.displayName||t.name:t.name||e&&t.__name}function fo(t,e,n=!1){let r=lo(e);if(!r&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(r=i[1])}if(!r&&t&&t.parent){const i=s=>{for(const o in s)if(s[o]===e)return o};r=i(t.components||t.parent.type.components)||i(t.appContext.components)}return r?Tf(r):n?"App":"Anonymous"}function ho(t){return L(t)&&"__vccOpts"in t}Symbol(process.env.NODE_ENV!=="production"?"ssrContext":"");function Mn(t){return!!(t&&t.__v_isShallow)}function yf(){if(process.env.NODE_ENV==="production"||typeof window>"u")return;const t={style:"color:#3ba776"},e={style:"color:#0b1bc9"},n={style:"color:#b62e24"},r={style:"color:#9d288c"},i={header(h){return Z(h)?h.__isVue?["div",t,"VueInstance"]:D(h)?["div",{},["span",t,g(h)],"<",a(h.value),">"]:Vt(h)?["div",{},["span",t,Mn(h)?"ShallowReactive":"Reactive"],"<",a(h),`>${Dt(h)?" (readonly)":""}`]:Dt(h)?["div",{},["span",t,Mn(h)?"ShallowReadonly":"Readonly"],"<",a(h),">"]:null:null},hasBody(h){return h&&h.__isVue},body(h){if(h&&h.__isVue)return["div",{},...s(h.$)]}};function s(h){const p=[];h.type.props&&h.props&&p.push(o("props",_(h.props))),h.setupState!==Y&&p.push(o("setup",h.setupState)),h.data!==Y&&p.push(o("data",_(h.data)));const m=c(h,"computed");m&&p.push(o("computed",m));const I=c(h,"inject");return I&&p.push(o("injected",I)),p.push(["div",{},["span",{style:r.style+";opacity:0.66"},"$ (internal): "],["object",{object:h}]]),p}function o(h,p){return p=it({},p),Object.keys(p).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},h],["div",{style:"padding-left:1.25em"},...Object.keys(p).map(m=>["div",{},["span",r,m+": "],a(p[m],!1)])]]:["span",{}]}function a(h,p=!0){return typeof h=="number"?["span",e,h]:typeof h=="string"?["span",n,JSON.stringify(h)]:typeof h=="boolean"?["span",r,h]:Z(h)?["object",{object:p?_(h):h}]:["span",n,String(h)]}function c(h,p){const m=h.type;if(L(m))return;const I={};for(const y in h.ctx)l(m,y,p)&&(I[y]=h.ctx[y]);return I}function l(h,p,m){const I=h[m];if(E(I)&&I.includes(p)||Z(I)&&p in I||h.extends&&l(h.extends,p,m)||h.mixins&&h.mixins.some(y=>l(y,p,m)))return!0}function g(h){return Mn(h)?"ShallowRef":h.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(i):window.devtoolsFormatters=[i]}function bf(){yf()}process.env.NODE_ENV!=="production"&&bf();function wf(t){const e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=t%12;return e[n]}function kf(t){const e=Math.floor(t/12)-2;return wf(t)+e.toString()}const Sf=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,_f={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};function Cf(t){const e=Sf.exec(t);if(!e)return-1;const n=e[1],r=e[2];return _f[n.toLowerCase()]+(parseInt(r,10)+2)*12}function Zn(t,e,n,r){return`${t} // ${e} // ${n} // ${r}`}function po(t,e,n){return`${t} // ${e} // ${n}`}function xf(t){const e=be(t);return po(e.manufacturerName,e.pluginFormatName,e.name)}function be(t){const e=t.split(" // ");if(e.length<4)throw new Error("Invalid audio plugin tuneflow id.");return{name:e[2],manufacturerName:e[0],pluginFormatName:e[1],pluginVersion:e[3]}}function go(t,e){return t===e}function mo(t,e){const n=be(t),r=be(e);if(M.keys(n).length!==M.keys(r).length)return!1;for(const i of M.keys(n))if(i!=="pluginVersion"&&n[i]!==r[i])return!1;return!0}class Ef{tempoInfos=[];currentTempoIndex=0;ticksPerSecondAtTempoTick={};constructor(e,n){for(const r of e)this.tempoInfos.push({ticks:r.getTicks(),time:r.getTime()}),this.ticksPerSecondAtTempoTick[r.getTicks()]=r.getBpm()*n/60}secondsToTick(e){let n=this.tempoInfos[this.currentTempoIndex];for(;this.tempoInfos[this.currentTempoIndex+1]&&this.tempoInfos[this.currentTempoIndex+1].time<=e;)this.currentTempoIndex+=1,n=this.tempoInfos[this.currentTempoIndex];for(;n.time>e&&this.currentTempoIndex>0;)this.currentTempoIndex-=1,n=this.tempoInfos[this.currentTempoIndex];n.time>e&&(n=this.tempoInfos[0]);const r=e-n.time,i=this.ticksPerSecondAtTempoTick[n.ticks];return Math.round(n.ticks+r*i)}tickToSeconds(e){let n=this.tempoInfos[this.currentTempoIndex];for(;this.tempoInfos[this.currentTempoIndex+1]&&this.tempoInfos[this.currentTempoIndex+1].ticks<=e;)this.currentTempoIndex+=1,n=this.tempoInfos[this.currentTempoIndex];for(;n.ticks>e&&this.currentTempoIndex>0;)this.currentTempoIndex-=1,n=this.tempoInfos[this.currentTempoIndex];n.ticks>e&&(n=this.tempoInfos[0]);const r=e-n.ticks,i=this.ticksPerSecondAtTempoTick[n.ticks];return n.time+r/i}}function Io(t){return t>-100?Math.exp((t-6)*(1/20)):0}function Nf(t){return t<=0?-100:20*Math.log10(t)}function Pf(t){return t>0?20*Math.log(t)+6:-100}function Of(t){return t>0?Math.pow(10,(20*Math.log(t)+6)*(1/20)):0}function Af(t){return t>0?Math.exp((20*Math.log10(t)-6)*(1/20)):0}function Mf(t,e,n,r,i){return(t-e)/(n-e)*(i-r)+r}function Vf(t){return 440*Math.pow(2,(t-69)/12)}function Rf(t){return Qe(t)||D(t)?_(t):t}var vo=(t=>(t[t.BassDrum2=35]="BassDrum2",t[t.BassDrum1=36]="BassDrum1",t[t.SideStick=37]="SideStick",t[t.SnareDrum1=38]="SnareDrum1",t[t.HandClap=39]="HandClap",t[t.SnareDrum2=40]="SnareDrum2",t[t.LowTom2=41]="LowTom2",t[t.ClosedHiHat=42]="ClosedHiHat",t[t.LowTom1=43]="LowTom1",t[t.PedalHiHat=44]="PedalHiHat",t[t.MidTom2=45]="MidTom2",t[t.OpenHiHat=46]="OpenHiHat",t[t.MidTom1=47]="MidTom1",t[t.HighTom2=48]="HighTom2",t[t.CrashCymbal1=49]="CrashCymbal1",t[t.HighTom1=50]="HighTom1",t[t.RideCymbal1=51]="RideCymbal1",t[t.ChineseCymbal=52]="ChineseCymbal",t[t.RideBell=53]="RideBell",t[t.Tambourine=54]="Tambourine",t[t.SplashCymbal=55]="SplashCymbal",t[t.Cowbell=56]="Cowbell",t[t.CrashCymbal2=57]="CrashCymbal2",t[t.VibraSlap=58]="VibraSlap",t[t.RideCymbal2=59]="RideCymbal2",t[t.HighBongo=60]="HighBongo",t[t.LowBongo=61]="LowBongo",t[t.MuteHighConga=62]="MuteHighConga",t[t.OpenHighConga=63]="OpenHighConga",t[t.LowConga=64]="LowConga",t[t.HighTimbale=65]="HighTimbale",t[t.LowTimbale=66]="LowTimbale",t[t.HighAgogo=67]="HighAgogo",t[t.LowAgogo=68]="LowAgogo",t[t.Cabasa=69]="Cabasa",t[t.Maracas=70]="Maracas",t[t.ShortWhistle=71]="ShortWhistle",t[t.LongWhistle=72]="LongWhistle",t[t.ShortGuiro=73]="ShortGuiro",t[t.LongGuiro=74]="LongGuiro",t[t.Claves=75]="Claves",t[t.HighWoodBlock=76]="HighWoodBlock",t[t.LowWoodBlock=77]="LowWoodBlock",t[t.MuteCuica=78]="MuteCuica",t[t.OpenCuica=79]="OpenCuica",t[t.MuteTriangle=80]="MuteTriangle",t[t.OpenTriangle=81]="OpenTriangle",t[t.Shaker=82]="Shaker",t))(vo||{});class xe{name;manufacturerName;pluginFormatName;pluginVersion;isEnabled=!0;localInstanceIdInternal;base64StatesInternal;constructor(e,n,r,i){this.name=e,this.manufacturerName=n,this.pluginFormatName=r,this.pluginVersion=i,this.localInstanceIdInternal=xe.generateAudioPluginInstanceIdInternal()}getTuneflowId(){return Zn(this.manufacturerName,this.pluginFormatName,this.name,this.pluginVersion)}clone(e){const n=e.createAudioPlugin(this.getTuneflowId());return n.setIsEnabled(this.isEnabled),n}matchesTfId(e){return go(e,this.getTuneflowId())}matchesTfIdIgnoreVersion(e){return mo(e,this.getTuneflowId())}getInstanceId(){return this.localInstanceIdInternal}toJSON(){return{name:this.name,manufacturerName:this.manufacturerName,pluginFormatName:this.pluginFormatName,pluginVersion:this.pluginVersion,isEnabled:this.isEnabled}}setIsEnabled(e){this.isEnabled=e}getIsEnabled(){return this.isEnabled}setBase64States(e){this.base64StatesInternal=e}getBase64States(){return this.base64StatesInternal}static generateAudioPluginInstanceIdInternal(){return un(10)}static DEFAULT_SYNTH_TFID=Zn("TuneFlow","VST3","TFSynth","1.0.0")}class ft{pitch;velocity;startTick;endTick;idInternal;clipInternal;constructor({pitch:e,velocity:n,startTick:r,endTick:i,id:s,clip:o}){this.pitch=e,this.velocity=n,this.startTick=r,this.endTick=i,this.idInternal=s,this.clipInternal=o}getPitch(){return this.pitch}setPitch(e){if(!ft.isValidPitch(e))throw new Error(`Invalid pitch ${e}`);this.pitch=e}getVelocity(){return this.velocity}setVelocity(e){this.velocity=Math.max(Math.min(e,127),0)}getStartTick(){return this.startTick}getEndTick(){return this.endTick}setStartTick(e){this.startTick=e}setEndTick(e){this.endTick=e}equals(e){return this.startTick===e.getStartTick()&&this.endTick===e.getEndTick()&&this.pitch===e.getPitch()&&this.velocity===e.getVelocity()}deleteFromParent(){!this.clipInternal||this.clipInternal.deleteNote(this)}moveNote(e){if(e===0)return;const n=this.clipInternal;n&&n.deleteNote(this),this.startTick=Math.max(0,this.startTick+e),this.endTick=this.endTick+e,!!this.isRangeValid()&&n&&n.orderedInsertNote(n.getRawNotes(),this)}adjustLeft(e){if(e===0)return;const n=this.clipInternal;n&&n.deleteNote(this),this.startTick+=e,!!this.isRangeValid()&&n&&n.orderedInsertNote(n.getRawNotes(),this)}adjustLeftTo(e){this.adjustLeft(e-this.startTick)}adjustRight(e){this.endTick+=e,this.isRangeValid()||this.deleteFromParent()}adjustRightTo(e){this.adjustRight(e-this.endTick)}isRangeValid(){return ft.isNoteRangeValid(this.startTick,this.endTick)}static isValidPitch(e){return e>=0&&e<=127&&Number.isInteger(e)}static isNoteRangeValid(e,n){return n>=0&&e<=n&&Number.isInteger(e)&&Number.isInteger(n)}static isNoteVelocityValid(e){return e>=0&&e<=127&&Number.isInteger(e)}getClip(){return this.clipInternal}adjustPitch(e){this.pitch=this.pitch+e,ft.isValidPitch(this.pitch)||this.deleteFromParent()}getId(){return this.idInternal}}var Zt=(t=>(t[t.MIDI_CLIP=1]="MIDI_CLIP",t[t.AUDIO_CLIP=2]="AUDIO_CLIP",t))(Zt||{});class X{song;track;id;notes;clipStartTick=0;clipEndTick=0;nextNoteIdInternal=1;type;audioClipData;constructor({song:e,type:n,clipStartTick:r,id:i=X.generateClipIdInternal(),track:s=void 0,clipEndTick:o=void 0,audioClipData:a=void 0}){if(this.song=e,this.track=s,this.id=i,this.type=n,this.notes=[],n===2){if(!a)throw new Error("Audio clip data must be provided for audio clips.");this.audioClipData={audioFilePath:a.audioFilePath,startTick:a.startTick,duration:a.duration},r=M.isNumber(r)?Math.max(r,a.startTick):a.startTick;const c=this.getAudioEndTick();(!M.isNumber(o)||c<o)&&(o=c),this.clipStartTick=r,this.clipEndTick=o}else if(n===1){if(this.clipStartTick=r,!M.isNumber(o))throw new Error("clip end tick must be provided when creating MIDI clip.");this.clipEndTick=o}}getId(){return this.id}getType(){return this.type}getAudioClipData(){return this.audioClipData}setAudioFile(e,n,r){this.audioClipData?(this.audioClipData.audioFilePath=e,this.audioClipData.startTick=n,this.audioClipData.duration=r):this.audioClipData={audioFilePath:e,startTick:n,duration:r}}getNotes(){return X.getNotesInRange(this.notes,this.clipStartTick,this.clipEndTick)}getRawNotes(){return this.notes}getDuration(){return this.song.tickToSeconds(this.clipEndTick)-this.song.tickToSeconds(this.clipStartTick)}getAudioDuration(){if(!(this.type!==2||!this.audioClipData))return this.audioClipData.duration}getClipStartTick(){return this.clipStartTick}getClipEndTick(){return this.clipEndTick}getTrack(){return this.track}createNote({pitch:e,velocity:n,startTick:r,endTick:i,updateClipRange:s=!0,resolveClipConflict:o=!0}){if(this.type!==1||!ft.isValidPitch(e)||!ft.isNoteRangeValid(r,i)||!ft.isNoteVelocityValid(n))return null;const a=new ft({pitch:e,velocity:n,startTick:r,endTick:i,id:this.getNextNoteIdInternal()});return r<this.clipStartTick&&s&&this.adjustClipLeft(r,o),i>this.clipEndTick&&s&&this.adjustClipRight(i,o),this.orderedInsertNote(this.notes,a),a}getNoteIndexInternal(e){const n=R.lt(this.notes,e,(r,i)=>r.getStartTick()-i.getStartTick());for(let r=Math.max(0,n);r<this.notes.length;r+=1){const i=this.notes[r];if(i&&i===e)return r;if(i&&i.getStartTick()>e.getStartTick())break}return-1}deleteNote(e){const n=this.getNoteIndexInternal(e);n>=0&&this.deleteNoteAt(n)}deleteNoteAt(e){const n=this.notes[e];n&&(n.clipInternal=null,this.notes.splice(e,1))}orderedInsertNote(e,n){if(this.type!==1||n.getClip()===this)return;const r=R.ge(e,n,(i,s)=>i.getStartTick()-s.getStartTick());r<0?e.push(n):e.splice(r,0,n),n.clipInternal=this}adjustClipLeft(e,n=!0){e=Math.max(0,e),this.type===2&&this.audioClipData&&(e=Math.max(e,this.audioClipData.startTick)),e>this.clipEndTick?this.deleteFromParent(!0):(n&&this.track&&this.track.resolveClipConflictInternal(this.getId(),Math.min(this.clipStartTick,e),this.clipEndTick),this.clipStartTick=e)}adjustClipRight(e,n=!0){if(this.type===2){const r=this.getAudioEndTick();M.isNumber(r)&&(e=Math.min(e,r))}e<this.clipStartTick||e<0?this.deleteFromParent(!0):(n&&this.track&&this.track.resolveClipConflictInternal(this.getId(),this.clipStartTick,Math.max(this.clipEndTick,e)),this.clipEndTick=e)}moveClip(e,n){const r=Math.max(0,this.clipStartTick+e),i=this.clipEndTick+e;if(i<0){this.deleteFromParent(!0);return}if(this.track&&this.track.resolveClipConflictInternal(this.getId(),r,i),this.track){const a=this.track.getClipIndex(this);this.track.deleteClipAt(a,!1)}const s=this.clipStartTick,o=this.clipEndTick;if(this.type===1){this.clipStartTick=r,this.clipEndTick=i;for(const a of this.notes)a.setStartTick(a.getStartTick()+e),a.setEndTick(a.getEndTick()+e)}else if(this.type===2){if(!this.audioClipData)throw new Error("Cannot move audio clip without audio data");const a=this.song,c=a.tickToSeconds(this.audioClipData.startTick),l=a.tickToSeconds(s),h=a.tickToSeconds(o)-l,p=l-c,m=a.tickToSeconds(this.clipStartTick+e),I=m-p,y=m+h;if(this.clipStartTick=r,this.clipEndTick=a.secondsToTick(y),this.audioClipData.startTick=a.secondsToTick(I),this.clipEndTick<0){this.deleteFromParent(!0);return}}this.track&&(this.track.orderedInsertClipInternal(this),n&&this.track.getAutomation().moveAllPointsWithinRange(s,o,e,0))}moveClipTo(e,n){const r=e-this.getClipStartTick();this.moveClip(r,n)}deleteFromParent(e){this.track&&(this.track.deleteClip(this,e),this.track=void 0)}getNotesByIds(e){const n=new Set(e),r=[];for(const i of this.notes)n.has(i.getId())&&r.push(i);return r}getAudioEndTick(){if(this.type!==2||!this.audioClipData)return;const e=this.getAudioDuration();if(!M.isNumber(e))return;const n=this.song.tickToSeconds(this.audioClipData.startTick);return this.song.secondsToTick(n+e)}static getNotesInRange(e,n,r){return X.getNotesInRangeImpl(e,n,r,i=>({getStartTick:()=>i}),i=>i.getStartTick(),i=>i.getEndTick())}static getNotesInRangeImpl(e,n,r,i,s,o){let a=Math.max(0,R.lt(e,i(n),(l,g)=>s(l)-s(g)));for(;e[a]&&!X.isNoteInClip(s(e[a]),o(e[a]),n,r);)a+=1;if(a>=e.length)return[];let c=Math.min(e.length-1,R.gt(e,i(r),(l,g)=>s(l)-s(g)));for(;e[c]&&!X.isNoteInClip(s(e[c]),o(e[c]),n,r);)c-=1;return c<0?[]:c<a?[]:e.slice(a,c+1)}static isNoteInClip(e,n,r,i){return(e>=r||r===0&&e<=0)&&e<i&&n>e}static getNotePlayableRange(e,n,r,i){if(!X.isNoteInClip(e,n,r,i))return null;const s=Math.max(e,r),o=Math.min(n,i);return s>o?null:{startTick:s,endTick:o}}trimConflictPartInternal(e,n){const r=Math.max(e,this.getClipStartTick()),i=Math.min(n,this.getClipEndTick());if(!(r>i)&&!(r>this.getClipEndTick()||i<this.getClipStartTick())){if(i>=this.getClipEndTick()&&r<=this.getClipStartTick()){this.deleteFromParent(!0);return}if(i<this.getClipEndTick()&&r>this.getClipStartTick()){const s=i+1,o=this.getClipEndTick();if(this.adjustClipRight(r-1,!1),this.track){if(this.type===1){const a=this.track.createMIDIClip({clipStartTick:s,clipEndTick:o}),c=X.getNotesInRange(this.notes,s,o);for(const l of c)a.createNote({pitch:l.getPitch(),velocity:l.getVelocity(),startTick:l.getStartTick(),endTick:l.getEndTick(),updateClipRange:!1,resolveClipConflict:!1})}else if(this.type===2){const a=this.audioClipData;this.track.createAudioClip({clipStartTick:s,clipEndTick:o,audioClipData:{audioFilePath:a.audioFilePath,startTick:a.startTick,duration:a.duration}})}}return}r>this.getClipStartTick()&&r<=this.getClipEndTick()?this.adjustClipRight(r-1,!1):i<this.getClipEndTick()&&i>=this.getClipStartTick()&&this.adjustClipLeft(i+1,!1)}}getNextNoteIdInternal(){const e=this.nextNoteIdInternal;return this.nextNoteIdInternal>=2147483647?this.nextNoteIdInternal=1:this.nextNoteIdInternal+=1,e}static generateClipIdInternal(){return un(10)}}var rn=(t=>(t[t.UNDEFINED=0]="UNDEFINED",t[t.VOLUME=1]="VOLUME",t[t.PAN=2]="PAN",t[t.AUDIO_PLUGIN=3]="AUDIO_PLUGIN",t))(rn||{});class Q{type;pluginInstanceId;paramId;constructor(e,n,r){this.type=e,this.pluginInstanceId=n,this.paramId=r}getType(){return this.type}setType(e){this.type=e}getPluginInstanceId(){return this.pluginInstanceId}setPluginInstanceId(e){this.pluginInstanceId=e}getParamId(){return this.paramId}setParamId(e){this.paramId=e}equals(e){return Q.areAutomationTargetsEqual(this.getType(),e.getType(),this.getPluginInstanceId(),e.getPluginInstanceId(),this.getParamId(),e.getParamId())}clone(){return new Q(this.type,this.pluginInstanceId,this.paramId)}toTfAutomationTargetId(){return Q.encodeAutomationTarget(this.type,this.pluginInstanceId,this.paramId)}static fromTfAutomationTargetId(e){return Q.decodeAutomationTarget(e)}static encodeAutomationTarget(e,n,r){return e===3?`${e}^^${n}^^${r}`:`${e}`}static decodeAutomationTarget(e){const n=e.split("^^");if(n.length===0)throw new Error(`Invalid automation target id: ${e}`);const r=Number(n[0]);return n.length>2?new Q(r,n[1],n[2]):new Q(r)}static areAutomationTargetsEqual(e,n,r,i,s,o){return Q.encodeAutomationTarget(e,r,s)===Q.encodeAutomationTarget(n,i,o)}}class Ut{points=[];disabled=!1;nextPointIdInternal=1;getDisabled(){return this.disabled}setDisabled(e){this.disabled=e}getPoints(){return this.points}getPointsInRange(e,n){return Ut.getPointsInRangeImpl(this.points,e,n)}static getPointsInRangeImpl(e,n,r){const i=R.ge(e,{tick:n},(o,a)=>o.tick-a.tick),s=[];for(let o=i;o<e.length;o+=1){const a=e[o];if(a.tick>r)break;s.push(a)}return s}addPoint(e,n,r=!1){const i={tick:e,value:Math.max(0,Math.min(1,n)),id:this.getNextPointIdInternal()};return Ut.orderedInsertPointInternal(this.points,i,r),i}removePoints(e){const n=new Set(e);for(let r=this.points.length-1;r>=0;r-=1){const i=this.points[r];n.has(i.id)&&this.points.splice(r,1)}}removePointsInRange(e,n){const r=R.ge(this.points,{tick:e},(s,o)=>s.tick-o.tick);if(r>=this.points.length)return;let i=r;for(;i+1<this.points.length&&this.points[i+1].tick<=n;)i+=1;this.points.splice(r,i-r+1)}movePointsInRange(e,n,r,i,s=!0){const o=this.getPointsInRange(e,n);this.movePoints(o.map(a=>a.id),r,i,s)}moveAllPoints(e,n,r=!0){this.movePoints(this.points.map(i=>i.id),e,n,r)}movePoints(e,n,r,i=!0){if(e.length===0)return;const s=new Set(e);let o,a;const c=[];for(let l=0;l<this.points.length;l+=1){const g=this.points[l];!s.has(g.id)||(c.push(g),o===void 0&&(o=l),a=l)}if(!(o===void 0||a===void 0)){if(i){if(n<0){const l=Math.max(0,this.points[o].tick+n),g=R.gt(this.points,{tick:l},(h,p)=>h.tick-p.tick);g<o&&this.points.splice(g,o-g)}else if(n>0){const l=this.points[a].tick+n,g=R.lt(this.points,{tick:l},(h,p)=>h.tick-p.tick);g>a&&this.points.splice(a+1,g-a)}}for(const l of c)l.tick=Math.max(0,l.tick+n),l.value=Math.max(0,Math.min(1,l.value+r));Math.abs(n)>0&&this.points.sort((l,g)=>l.tick-g.tick)}}clone(){const e=new Ut;e.setDisabled(this.disabled);for(const n of this.points)e.addPoint(n.tick,n.value,!1);return e}getNextPointIdInternal(){const e=this.nextPointIdInternal;return this.nextPointIdInternal>=2147483647?this.nextPointIdInternal=1:this.nextPointIdInternal+=1,e}static orderedInsertPointInternal(e,n,r=!1){const i=R.ge(e,n,(s,o)=>s.tick-o.tick);for(;r&&e[i]&&e[i].tick===n.tick;)e.splice(i,1);e.splice(i,0,n)}}class fn{targets=[];targetValues={};getAutomationTargets(){return this.targets}getAutomationTargetValues(){return this.targetValues}getOrCreateAutomationValueById(e){return this.targetValues[e]||(this.targetValues[e]=new Ut),this.targetValues[e]}getAutomationValueById(e){return this.targetValues[e]}getAutomationValueByTarget(e){const n=e.toTfAutomationTargetId();return this.getAutomationValueById(n)}addAutomation(e,n=0){M.isNumber(n)||(n=0),this.targets.splice(n,0,e);const r=e.toTfAutomationTargetId();this.getAutomationValueById(r)||(this.targetValues[r]=new Ut)}removeAutomation(e){for(let r=this.targets.length-1;r>=0;r-=1)this.targets[r].equals(e)&&this.targets.splice(r,1);const n=e.toTfAutomationTargetId();delete this.targetValues[n]}removeAutomationOfPlugin(e){for(let n=this.targets.length-1;n>=0;n-=1){const r=this.targets[n];r.getPluginInstanceId()===e&&this.removeAutomation(r)}for(const n of M.keys(this.targetValues)){const r=Q.decodeAutomationTarget(n);r.getPluginInstanceId()===e&&this.removeAutomation(r)}}removeAllPointsWithinRange(e,n){for(const r of M.keys(this.targetValues))this.targetValues[r].removePointsInRange(e,n)}moveAllPointsWithinRange(e,n,r,i){for(const s of M.keys(this.targetValues))this.targetValues[s].movePointsInRange(e,n,r,i,!1)}clone(){const e=new fn;for(const n of this.targets)e.addAutomation(n.clone());for(const n of M.keys(this.targetValues)){const r=this.targetValues[n];e.targetValues[n]=r.clone()}return e}}var Nt=(t=>(t[t.MIDI_TRACK=1]="MIDI_TRACK",t[t.AUDIO_TRACK=2]="AUDIO_TRACK",t[t.MASTER_TRACK=3]="MASTER_TRACK",t))(Nt||{});class Ot{insturment;clips;suggestedInstruments;uuid;volume;solo;muted;rank;pan;samplerPlugin;audioPlugins=[];song;automation;type;constructor({type:e,song:n,uuid:r=Ot.generateTrackIdInternal(),clips:i=[],instrument:s,suggestedInstruments:o=[],volume:a=Io(0),solo:c=!1,muted:l=!1,rank:g=0,pan:h=0}){this.song=n,this.type=e,s?this.insturment=s:e===1&&(this.insturment=new me({program:0,isDrum:!1})),this.clips=[...i],this.suggestedInstruments=[...o],this.uuid=r,this.volume=a,this.solo=c,this.muted=l,this.rank=g,this.pan=h,this.automation=new fn}getType(){return this.type}getSong(){return this.song}getInstrument(){return this.insturment}setInstrument({program:e,isDrum:n}){this.type===1&&(this.insturment=new me({program:e,isDrum:n}))}getSuggestedInstruments(){return this.suggestedInstruments}createSuggestedInstrument({program:e,isDrum:n}){if(this.type!==1)return;const r=new me({program:e,isDrum:n});return this.suggestedInstruments.push(r),r}clearSuggestedInstruments(){this.suggestedInstruments=[]}getId(){return this.uuid}setId(e){this.uuid=e}getVolume(){return this.volume}setVolume(e){this.volume=e}setPan(e){this.pan=e}getPan(){return this.pan}getSolo(){return this.solo}setSolo(e){this.solo=e,e&&this.muted&&(this.muted=!1)}getMuted(){return this.muted}setMuted(e){this.muted=e}getRank(){return this.rank}createAudioPlugin(e){const n=be(e);return new xe(n.name,n.manufacturerName,n.pluginFormatName,n.pluginVersion)}getSamplerPlugin(){return this.samplerPlugin}setSamplerPlugin(e,n=!0){if(this.type!==1)return;const r=!this.samplerPlugin&&!!e||!e&&!!this.samplerPlugin||!!e&&!!this.samplerPlugin&&!e.matchesTfId(this.samplerPlugin.getTuneflowId()),i=this.samplerPlugin;this.samplerPlugin=e,r&&i&&n&&this.automation.removeAutomationOfPlugin(i.getInstanceId())}getAudioPlugins(){return this.audioPlugins}addAudioPlugin(e){this.audioPlugins.push(e)}getTrackStartTick(){return!this.clips||this.clips.length===0?0:this.clips[0].getClipStartTick()}getTrackEndTick(){return!this.clips||this.clips.length===0?0:this.clips[this.clips.length-1].getClipEndTick()}getClipById(e){for(const n of this.clips)if(n.getId()===e)return n;return null}getClips(){return this.clips}getClipsOverlappingWith(e,n){const r=[],i=R.lt(this.clips,{getClipStartTick:()=>e},(s,o)=>s.getClipStartTick()-o.getClipStartTick());for(let s=Math.max(i,0);s<this.clips.length;s+=1){const o=this.clips[s];if(!(o.getClipEndTick()<e)){if(o.getClipStartTick()>n)break;r.push(o)}}return r}createMIDIClip({clipStartTick:e,clipEndTick:n=void 0,insertClip:r=!0}){if(!M.isNumber(e))throw new Error("clipStartTick must be specified when creating a clip.");const i=n??e+1;if(i<e)throw new Error(`clipEndTick must be greater or equal to clipStartTick, got clipStartTick: ${e}, clipEndTick: ${n}`);const s=new X({id:X.generateClipIdInternal(),type:Zt.MIDI_CLIP,song:this.song,track:void 0,clipStartTick:e,clipEndTick:i});return r&&this.insertClip(s),s}createAudioClip({clipStartTick:e,audioClipData:n,clipEndTick:r,insertClip:i=!0}){if(!M.isNumber(e))throw new Error("clipStartTick must be specified when creating a clip.");const s=new X({id:X.generateClipIdInternal(),type:Zt.AUDIO_CLIP,song:this.song,track:void 0,clipStartTick:e,clipEndTick:r,audioClipData:n});return i&&this.insertClip(s),s}insertClip(e){if(e.getTrack()!==this)e.getTrack()&&e.deleteFromParent(!1),e.track=this;else return;this.resolveClipConflictInternal(e.getId(),e.getClipStartTick(),e.getClipEndTick()),this.orderedInsertClipInternal(e)}cloneClip(e){if(e.getType()===Zt.MIDI_CLIP){const n=this.createMIDIClip({clipStartTick:e.getClipStartTick(),clipEndTick:e.getClipEndTick(),insertClip:!1});for(const r of e.getRawNotes())n.createNote({pitch:r.getPitch(),velocity:r.getVelocity(),startTick:r.getStartTick(),endTick:r.getEndTick(),updateClipRange:!1,resolveClipConflict:!1});return n}else{if(e.getType()===Zt.AUDIO_CLIP)return this.createAudioClip({clipStartTick:e.getClipStartTick(),clipEndTick:e.getClipEndTick(),audioClipData:e.getAudioClipData(),insertClip:!1});throw new Error(`Unsupported clip type ${e.getType()}`)}}getClipIndex(e){const n=R.le(this.clips,e,(r,i)=>r.getClipStartTick()-i.getClipStartTick());return this.clips.indexOf(e,n)}deleteClip(e,n){const r=this.getClipIndex(e);this.deleteClipAt(r,n)}deleteClipAt(e,n){if(!(e<0)){if(n){const r=this.clips[e];if(!r)return;this.automation.removeAllPointsWithinRange(r.getClipStartTick(),r.getClipEndTick())}this.clips.splice(e,1)}}deleteFromParent(){this.song.removeTrack(this.getId())}getAutomation(){return this.automation}setAutomation(e){this.automation=e.clone()}hasAnyAutomation(){return this.automation.getAutomationTargets().length>0&&!M.isEmpty(this.automation.getAutomationTargetValues())}static generateTrackIdInternal(){return un()}resolveClipConflictInternal(e,n,r){const i=this.getClipsOverlappingWith(n,r);for(const s of i)s.getId()!==e&&s.trimConflictPartInternal(n,r)}orderedInsertClipInternal(e){const n=R.ge(this.clips,e,(r,i)=>r.getClipStartTick()-i.getClipStartTick());this.clips.splice(n,0,e)}}class me{program;isDrum;constructor({program:e,isDrum:n}){this.program=e,this.isDrum=n}getProgram(){return this.program}getIsDrum(){return this.isDrum}clone(){return new me({program:this.program,isDrum:this.isDrum})}}var To={},hn={};function Ff(t){var e=new H(t),n=e.readChunk();if(n.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+n.id+"'";for(var r=Uf(n.data),i=[],s=0;!e.eof()&&s<r.numTracks;s++){var o=e.readChunk();if(o.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+o.id+"'";var a=Bf(o.data);i.push(a)}return{header:r,tracks:i}}function Uf(t){var e=new H(t),n=e.readUInt16(),r=e.readUInt16(),i={format:n,numTracks:r},s=e.readUInt16();return s&32768?(i.framesPerSecond=256-(s>>8),i.ticksPerFrame=s&255):i.ticksPerBeat=s,i}function Bf(t){for(var e=new H(t),n=[];!e.eof();){var r=s();n.push(r)}return n;var i;function s(){var o={};o.deltaTime=e.readVarInt();var a=e.readUInt8();if((a&240)===240)if(a===255){o.meta=!0;var c=e.readUInt8(),l=e.readVarInt();switch(c){case 0:if(o.type="sequenceNumber",l!==2)throw"Expected length for sequenceNumber event is 2, got "+l;return o.number=e.readUInt16(),o;case 1:return o.type="text",o.text=e.readString(l),o;case 2:return o.type="copyrightNotice",o.text=e.readString(l),o;case 3:return o.type="trackName",o.text=e.readString(l),o;case 4:return o.type="instrumentName",o.text=e.readString(l),o;case 5:return o.type="lyrics",o.text=e.readString(l),o;case 6:return o.type="marker",o.text=e.readString(l),o;case 7:return o.type="cuePoint",o.text=e.readString(l),o;case 32:if(o.type="channelPrefix",l!=1)throw"Expected length for channelPrefix event is 1, got "+l;return o.channel=e.readUInt8(),o;case 33:if(o.type="portPrefix",l!=1)throw"Expected length for portPrefix event is 1, got "+l;return o.port=e.readUInt8(),o;case 47:if(o.type="endOfTrack",l!=0)throw"Expected length for endOfTrack event is 0, got "+l;return o;case 81:if(o.type="setTempo",l!=3)throw"Expected length for setTempo event is 3, got "+l;return o.microsecondsPerBeat=e.readUInt24(),o;case 84:if(o.type="smpteOffset",l!=5)throw"Expected length for smpteOffset event is 5, got "+l;var g=e.readUInt8(),h={0:24,32:25,64:29,96:30};return o.frameRate=h[g&96],o.hour=g&31,o.min=e.readUInt8(),o.sec=e.readUInt8(),o.frame=e.readUInt8(),o.subFrame=e.readUInt8(),o;case 88:if(o.type="timeSignature",l!=2&&l!=4)throw"Expected length for timeSignature event is 4 or 2, got "+l;return o.numerator=e.readUInt8(),o.denominator=1<<e.readUInt8(),l===4?(o.metronome=e.readUInt8(),o.thirtyseconds=e.readUInt8()):(o.metronome=36,o.thirtyseconds=8),o;case 89:if(o.type="keySignature",l!=2)throw"Expected length for keySignature event is 2, got "+l;return o.key=e.readInt8(),o.scale=e.readUInt8(),o;case 127:return o.type="sequencerSpecific",o.data=e.readBytes(l),o;default:return o.type="unknownMeta",o.data=e.readBytes(l),o.metatypeByte=c,o}}else if(a==240){o.type="sysEx";var l=e.readVarInt();return o.data=e.readBytes(l),o}else if(a==247){o.type="endSysEx";var l=e.readVarInt();return o.data=e.readBytes(l),o}else throw"Unrecognised MIDI event type byte: "+a;else{var p;if((a&128)===0){if(i===null)throw"Running status byte encountered before status byte";p=a,a=i,o.running=!0}else p=e.readUInt8(),i=a;var m=a>>4;switch(o.channel=a&15,m){case 8:return o.type="noteOff",o.noteNumber=p,o.velocity=e.readUInt8(),o;case 9:var I=e.readUInt8();return o.type=I===0?"noteOff":"noteOn",o.noteNumber=p,o.velocity=I,I===0&&(o.byte9=!0),o;case 10:return o.type="noteAftertouch",o.noteNumber=p,o.amount=e.readUInt8(),o;case 11:return o.type="controller",o.controllerType=p,o.value=e.readUInt8(),o;case 12:return o.type="programChange",o.programNumber=p,o;case 13:return o.type="channelAftertouch",o.amount=p,o;case 14:return o.type="pitchBend",o.value=p+(e.readUInt8()<<7)-8192,o;default:throw"Unrecognised MIDI event type: "+m}}}}function H(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}H.prototype.eof=function(){return this.pos>=this.bufferLen};H.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t};H.prototype.readInt8=function(){var t=this.readUInt8();return t&128?t-256:t};H.prototype.readUInt16=function(){var t=this.readUInt8(),e=this.readUInt8();return(t<<8)+e};H.prototype.readInt16=function(){var t=this.readUInt16();return t&32768?t-65536:t};H.prototype.readUInt24=function(){var t=this.readUInt8(),e=this.readUInt8(),n=this.readUInt8();return(t<<16)+(e<<8)+n};H.prototype.readInt24=function(){var t=this.readUInt24();return t&8388608?t-16777216:t};H.prototype.readUInt32=function(){var t=this.readUInt8(),e=this.readUInt8(),n=this.readUInt8(),r=this.readUInt8();return(t<<24)+(e<<16)+(n<<8)+r};H.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e};H.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)};H.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(e&128)t+=e&127,t<<=7;else return t+e}return t};H.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32(),n=this.readBytes(e);return{id:t,length:e,data:n}};var Df=Ff;function $f(t,e){if(typeof t!="object")throw"Invalid MIDI data";e=e||{};var n=t.header||{},r=t.tracks||[],i,s=r.length,o=new O;for(Lf(o,n,s),i=0;i<s;i++)Hf(o,r[i],e);return o.buffer}function Lf(t,e,n){var r=e.format==null?1:e.format,i=128;e.timeDivision?i=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?i=-(e.framesPerSecond&255)<<8|e.ticksPerFrame&255:e.ticksPerBeat&&(i=e.ticksPerBeat&32767);var s=new O;s.writeUInt16(r),s.writeUInt16(n),s.writeUInt16(i),t.writeChunk("MThd",s.buffer)}function Hf(t,e,n){var r=new O,i,s=e.length,o=null;for(i=0;i<s;i++)(n.running===!1||!n.running&&!e[i].running)&&(o=null),o=qf(r,e[i],o,n.useByte9ForNoteOff);t.writeChunk("MTrk",r.buffer)}function qf(t,e,n,r){var i=e.type,s=e.deltaTime,o=e.text||"",a=e.data||[],c=null;switch(t.writeVarInt(s),i){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(o.length),t.writeString(o);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(o.length),t.writeString(o);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(o.length),t.writeString(o);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(o.length),t.writeString(o);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(o.length),t.writeString(o);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(o.length),t.writeString(o);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(o.length),t.writeString(o);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var l={24:0,25:32,29:64,30:96},g=e.hour&31|l[e.frameRate];t.writeUInt8(g),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var h=Math.floor(Math.log(e.denominator)/Math.LN2)&255;t.writeUInt8(h),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(a.length),t.writeBytes(a);break;case"unknownMeta":e.metatypeByte!=null&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(a.length),t.writeBytes(a));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(a.length),t.writeBytes(a);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(a.length),t.writeBytes(a);break;case"noteOff":var p=r!==!1&&e.byte9||r&&e.velocity==0?144:128;c=p|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":c=144|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":c=160|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":c=176|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":c=192|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.programNumber);break;case"channelAftertouch":c=208|e.channel,c!==n&&t.writeUInt8(c),t.writeUInt8(e.amount);break;case"pitchBend":c=224|e.channel,c!==n&&t.writeUInt8(c);var m=8192+e.value,I=m&127,y=m>>7&127;t.writeUInt8(I),t.writeUInt8(y);break;default:throw"Unrecognized event type: "+i}return c}function O(){this.buffer=[]}O.prototype.writeUInt8=function(t){this.buffer.push(t&255)};O.prototype.writeInt8=O.prototype.writeUInt8;O.prototype.writeUInt16=function(t){var e=t>>8&255,n=t&255;this.writeUInt8(e),this.writeUInt8(n)};O.prototype.writeInt16=O.prototype.writeUInt16;O.prototype.writeUInt24=function(t){var e=t>>16&255,n=t>>8&255,r=t&255;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(r)};O.prototype.writeInt24=O.prototype.writeUInt24;O.prototype.writeUInt32=function(t){var e=t>>24&255,n=t>>16&255,r=t>>8&255,i=t&255;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(r),this.writeUInt8(i)};O.prototype.writeInt32=O.prototype.writeUInt32;O.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))};O.prototype.writeString=function(t){var e,n=t.length,r=[];for(e=0;e<n;e++)r.push(t.codePointAt(e));this.writeBytes(r)};O.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,n=[];for(n.push(e&127),e>>=7;e;){var r=e&127|128;n.push(r),e>>=7}this.writeBytes(n.reverse())}};O.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)};var Kf=$f;hn.parseMidi=Df;hn.writeMidi=Kf;var sn={},$t={};Object.defineProperty($t,"__esModule",{value:!0});$t.insert=$t.search=void 0;function yo(t,e,n){n===void 0&&(n="ticks");var r=0,i=t.length,s=i;if(i>0&&t[i-1][n]<=e)return i-1;for(;r<s;){var o=Math.floor(r+(s-r)/2),a=t[o],c=t[o+1];if(a[n]===e){for(var l=o;l<t.length;l++){var g=t[l];g[n]===e&&(o=l)}return o}else{if(a[n]<e&&c[n]>e)return o;a[n]>e?s=o:a[n]<e&&(r=o+1)}}return-1}$t.search=yo;function zf(t,e,n){if(n===void 0&&(n="ticks"),t.length){var r=yo(t,e[n],n);t.splice(r+1,0,e)}else t.push(e)}$t.insert=zf;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.keySignatureKeys=void 0;var e=$t,n=new WeakMap;t.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var r=function(){function i(s){var o=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",n.set(this,480),s){n.set(this,s.header.ticksPerBeat),s.tracks.forEach(function(c){c.forEach(function(l){l.meta&&(l.type==="timeSignature"?o.timeSignatures.push({ticks:l.absoluteTime,timeSignature:[l.numerator,l.denominator]}):l.type==="setTempo"?o.tempos.push({bpm:6e7/l.microsecondsPerBeat,ticks:l.absoluteTime}):l.type==="keySignature"&&o.keySignatures.push({key:t.keySignatureKeys[l.key+7],scale:l.scale===0?"major":"minor",ticks:l.absoluteTime}))})});var a=0;s.tracks[0].forEach(function(c){a+=c.deltaTime,c.meta&&(c.type==="trackName"?o.name=c.text:(c.type==="text"||c.type==="cuePoint"||c.type==="marker"||c.type==="lyrics")&&o.meta.push({text:c.text,ticks:a,type:c.type}))}),this.update()}}return i.prototype.update=function(){var s=this,o=0,a=0;this.tempos.sort(function(c,l){return c.ticks-l.ticks}),this.tempos.forEach(function(c,l){var g=l>0?s.tempos[l-1].bpm:s.tempos[0].bpm,h=c.ticks/s.ppq-a,p=60/g*h;c.time=p+o,o=c.time,a+=h}),this.timeSignatures.sort(function(c,l){return c.ticks-l.ticks}),this.timeSignatures.forEach(function(c,l){var g=l>0?s.timeSignatures[l-1]:s.timeSignatures[0],h=(c.ticks-g.ticks)/s.ppq,p=h/g.timeSignature[0]/(g.timeSignature[1]/4);g.measures=g.measures||0,c.measures=p+g.measures})},i.prototype.ticksToSeconds=function(s){var o=(0,e.search)(this.tempos,s);if(o!==-1){var a=this.tempos[o],c=a.time,l=(s-a.ticks)/this.ppq;return c+60/a.bpm*l}else{var g=s/this.ppq;return 60/120*g}},i.prototype.ticksToMeasures=function(s){var o=(0,e.search)(this.timeSignatures,s);if(o!==-1){var a=this.timeSignatures[o],c=(s-a.ticks)/this.ppq;return a.measures+c/(a.timeSignature[0]/a.timeSignature[1])/4}else return s/this.ppq/4},Object.defineProperty(i.prototype,"ppq",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),i.prototype.secondsToTicks=function(s){var o=(0,e.search)(this.tempos,s,"time");if(o!==-1){var a=this.tempos[o],c=a.time,l=s-c,g=l/(60/a.bpm);return Math.round(a.ticks+g*this.ppq)}else{var h=s/.5;return Math.round(h*this.ppq)}},i.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(s){return{bpm:s.bpm,ticks:s.ticks}}),timeSignatures:this.timeSignatures}},i.prototype.fromJSON=function(s){this.name=s.name,this.tempos=s.tempos.map(function(o){return Object.assign({},o)}),this.timeSignatures=s.timeSignatures.map(function(o){return Object.assign({},o)}),this.keySignatures=s.keySignatures.map(function(o){return Object.assign({},o)}),this.meta=s.meta.map(function(o){return Object.assign({},o)}),n.set(this,s.ppq),this.update()},i.prototype.setTempo=function(s){this.tempos=[{bpm:s,ticks:0}],this.update()},i}();t.Header=r})(sn);var we={},Or={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ControlChange=t.controlChangeIds=t.controlChangeNames=void 0,t.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},t.controlChangeIds=Object.keys(t.controlChangeNames).reduce(function(i,s){return i[t.controlChangeNames[s]]=s,i},{});var e=new WeakMap,n=new WeakMap,r=function(){function i(s,o){e.set(this,o),n.set(this,s.controllerType),this.ticks=s.absoluteTime,this.value=s.value}return Object.defineProperty(i.prototype,"number",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return t.controlChangeNames[this.number]?t.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){var s=e.get(this);return s.ticksToSeconds(this.ticks)},set:function(s){var o=e.get(this);this.ticks=o.secondsToTicks(s)},enumerable:!1,configurable:!0}),i.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},i}();t.ControlChange=r})(Or);var pn={};Object.defineProperty(pn,"__esModule",{value:!0});pn.createControlChanges=void 0;var Le=Or;function Gf(){return new Proxy({},{get:function(t,e){if(t[e])return t[e];if(Le.controlChangeIds.hasOwnProperty(e))return t[Le.controlChangeIds[e]]},set:function(t,e,n){return Le.controlChangeIds.hasOwnProperty(e)?t[Le.controlChangeIds[e]]=n:t[e]=n,!0}})}pn.createControlChanges=Gf;var dn={};Object.defineProperty(dn,"__esModule",{value:!0});dn.PitchBend=void 0;var Vn=new WeakMap,Jf=function(){function t(e,n){Vn.set(this,n),this.ticks=e.absoluteTime,this.value=e.value}return Object.defineProperty(t.prototype,"time",{get:function(){var e=Vn.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var n=Vn.get(this);this.ticks=n.secondsToTicks(e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}();dn.PitchBend=Jf;var gn={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.DrumKitByPatchID=vt.InstrumentFamilyByID=vt.instrumentByPatchID=void 0;vt.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];vt.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];vt.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(gn,"__esModule",{value:!0});gn.Instrument=void 0;var He=vt,Bi=new WeakMap,Wf=function(){function t(e,n){if(this.number=0,Bi.set(this,n),this.number=0,e){var r=e.find(function(i){return i.type==="programChange"});r&&(this.number=r.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?He.DrumKitByPatchID[this.number]:He.instrumentByPatchID[this.number]},set:function(e){var n=He.instrumentByPatchID.indexOf(e);n!==-1&&(this.number=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":He.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){var e=Bi.get(this);return e.channel===9},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(e){this.number=e.number},t}();gn.Instrument=Wf;var mn={};Object.defineProperty(mn,"__esModule",{value:!0});mn.Note=void 0;function jf(t){var e=Math.floor(t/12)-1;return bo(t)+e.toString()}function bo(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=t%12;return e[n]}function Yf(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return e.indexOf(t)}var Qf=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(n){var r=t.exec(n),i=r[1],s=r[2],o=e[i.toLowerCase()];return o+(parseInt(s,10)+1)*12}}(),jt=new WeakMap,Xf=function(){function t(e,n,r){jt.set(this,r),this.midi=e.midi,this.velocity=e.velocity,this.noteOffVelocity=n.velocity,this.ticks=e.ticks,this.durationTicks=n.ticks-e.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){return jf(this.midi)},set:function(e){this.midi=Qf(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(e){var n=e-this.octave;this.midi+=n*12},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return bo(this.midi)},set:function(e){this.midi=12*(this.octave+1)+Yf(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var e=jt.get(this);return e.ticksToSeconds(this.ticks+this.durationTicks)-e.ticksToSeconds(this.ticks)},set:function(e){var n=jt.get(this),r=n.secondsToTicks(this.time+e);this.durationTicks=r-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){var e=jt.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var n=jt.get(this);this.ticks=n.secondsToTicks(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bars",{get:function(){var e=jt.get(this);return e.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}();mn.Note=Xf;Object.defineProperty(we,"__esModule",{value:!0});we.Track=void 0;var Rn=$t,Zf=Or,th=pn,eh=dn,Di=gn,nh=mn,qe=new WeakMap,rh=function(){function t(e,n){var r=this;if(this.name="",this.notes=[],this.controlChanges=(0,th.createControlChanges)(),this.pitchBends=[],qe.set(this,n),e){var i=e.find(function(p){return p.type==="trackName"});this.name=i?i.text:""}if(this.instrument=new Di.Instrument(e,this),this.channel=0,e){for(var s=e.filter(function(p){return p.type==="noteOn"}),o=e.filter(function(p){return p.type==="noteOff"}),a=function(){var p=s.shift();c.channel=p.channel;var m=o.findIndex(function(y){return y.noteNumber===p.noteNumber&&y.absoluteTime>=p.absoluteTime});if(m!==-1){var I=o.splice(m,1)[0];c.addNote({durationTicks:I.absoluteTime-p.absoluteTime,midi:p.noteNumber,noteOffVelocity:I.velocity/127,ticks:p.absoluteTime,velocity:p.velocity/127})}},c=this;s.length;)a();var l=e.filter(function(p){return p.type==="controller"});l.forEach(function(p){r.addCC({number:p.controllerType,ticks:p.absoluteTime,value:p.value/127})});var g=e.filter(function(p){return p.type==="pitchBend"});g.forEach(function(p){r.addPitchBend({ticks:p.absoluteTime,value:p.value/Math.pow(2,13)})});var h=e.find(function(p){return p.type==="endOfTrack"});this.endOfTrackTicks=h!==void 0?h.absoluteTime:void 0}}return t.prototype.addNote=function(e){var n=qe.get(this),r=new nh.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},n);return Object.assign(r,e),(0,Rn.insert)(this.notes,r,"ticks"),this},t.prototype.addCC=function(e){var n=qe.get(this),r=new Zf.ControlChange({controllerType:e.number},n);return delete e.number,Object.assign(r,e),Array.isArray(this.controlChanges[r.number])||(this.controlChanges[r.number]=[]),(0,Rn.insert)(this.controlChanges[r.number],r,"ticks"),this},t.prototype.addPitchBend=function(e){var n=qe.get(this),r=new eh.PitchBend({},n);return Object.assign(r,e),(0,Rn.insert)(this.pitchBends,r,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,n=0;n<this.notes.length-1;n++){var r=this.notes[n].time+this.notes[n].duration;e<r&&(e=r)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,n=0;n<this.notes.length-1;n++){var r=this.notes[n].ticks+this.notes[n].durationTicks;e<r&&(e=r)}return e},enumerable:!1,configurable:!0}),t.prototype.fromJSON=function(e){var n=this;this.name=e.name,this.channel=e.channel,this.instrument=new Di.Instrument(void 0,this),this.instrument.fromJSON(e.instrument),e.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=e.endOfTrackTicks);for(var r in e.controlChanges)e.controlChanges[r]&&e.controlChanges[r].forEach(function(i){n.addCC({number:i.number,ticks:i.ticks,value:i.value})});e.notes.forEach(function(i){n.addNote({durationTicks:i.durationTicks,midi:i.midi,ticks:i.ticks,velocity:i.velocity})})},t.prototype.toJSON=function(){for(var e={},n=0;n<127;n++)this.controlChanges.hasOwnProperty(n)&&(e[n]=this.controlChanges[n].map(function(i){return i.toJSON()}));var r={channel:this.channel,controlChanges:e,pitchBends:this.pitchBends.map(function(i){return i.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(i){return i.toJSON()})};return this.endOfTrackTicks!==void 0&&(r.endOfTrackTicks=this.endOfTrackTicks),r},t}();we.Track=rh;var In={};function ih(t){var e=[];return wo(t,e),e}function wo(t,e){for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?wo(r,e):e.push(r)}}const sh=Object.freeze(Object.defineProperty({__proto__:null,flatten:ih},Symbol.toStringTag,{value:"Module"})),oh=xc(sh);var mt=at&&at.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(In,"__esModule",{value:!0});In.encode=void 0;var ah=hn,uh=sn,ch=oh;function lh(t,e){return[{absoluteTime:t.ticks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOn",velocity:Math.floor(t.velocity*127)},{absoluteTime:t.ticks+t.durationTicks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOff",velocity:Math.floor(t.noteOffVelocity*127)}]}function fh(t){return(0,ch.flatten)(t.notes.map(function(e){return lh(e,t.channel)}))}function hh(t,e){return{absoluteTime:t.ticks,channel:e,controllerType:t.number,deltaTime:0,type:"controller",value:Math.floor(t.value*127)}}function ph(t){for(var e=[],n=0;n<127;n++)t.controlChanges.hasOwnProperty(n)&&t.controlChanges[n].forEach(function(r){e.push(hh(r,t.channel))});return e}function dh(t,e){return{absoluteTime:t.ticks,channel:e,deltaTime:0,type:"pitchBend",value:t.value}}function gh(t){var e=[];return t.pitchBends.forEach(function(n){e.push(dh(n,t.channel))}),e}function mh(t){return{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}}function Ih(t){return{absoluteTime:0,deltaTime:0,meta:!0,text:t,type:"trackName"}}function vh(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:"setTempo"}}function Th(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function yh(t){var e=uh.keySignatureKeys.indexOf(t.key);return{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:t.scale==="major"?0:1,type:"keySignature"}}function bh(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,text:t.text,type:t.type}}function wh(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:mt([mt(mt(mt(mt([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map(function(n){return yh(n)}),!0),t.header.meta.map(function(n){return bh(n)}),!0),t.header.tempos.map(function(n){return vh(n)}),!0),t.header.timeSignatures.map(function(n){return Th(n)}),!0)],t.tracks.map(function(n){return mt(mt(mt([Ih(n.name),mh(n)],fh(n),!0),ph(n),!0),gh(n),!0)}),!0)};return e.tracks=e.tracks.map(function(n){n=n.sort(function(i,s){return i.absoluteTime-s.absoluteTime});var r=0;return n.forEach(function(i){i.deltaTime=i.absoluteTime-r,r=i.absoluteTime,delete i.absoluteTime}),n.push({deltaTime:0,meta:!0,type:"endOfTrack"}),n}),new Uint8Array((0,ah.writeMidi)(e))}In.encode=wh;(function(t){var e=at&&at.__awaiter||function(h,p,m,I){function y(T){return T instanceof m?T:new m(function(k){k(T)})}return new(m||(m=Promise))(function(T,k){function w(P){try{b(I.next(P))}catch(ot){k(ot)}}function j(P){try{b(I.throw(P))}catch(ot){k(ot)}}function b(P){P.done?T(P.value):y(P.value).then(w,j)}b((I=I.apply(h,p||[])).next())})},n=at&&at.__generator||function(h,p){var m={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},I,y,T,k;return k={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function w(b){return function(P){return j([b,P])}}function j(b){if(I)throw new TypeError("Generator is already executing.");for(;m;)try{if(I=1,y&&(T=b[0]&2?y.return:b[0]?y.throw||((T=y.return)&&T.call(y),0):y.next)&&!(T=T.call(y,b[1])).done)return T;switch(y=0,T&&(b=[b[0]&2,T.value]),b[0]){case 0:case 1:T=b;break;case 4:return m.label++,{value:b[1],done:!1};case 5:m.label++,y=b[1],b=[0];continue;case 7:b=m.ops.pop(),m.trys.pop();continue;default:if(T=m.trys,!(T=T.length>0&&T[T.length-1])&&(b[0]===6||b[0]===2)){m=0;continue}if(b[0]===3&&(!T||b[1]>T[0]&&b[1]<T[3])){m.label=b[1];break}if(b[0]===6&&m.label<T[1]){m.label=T[1],T=b;break}if(T&&m.label<T[2]){m.label=T[2],m.ops.push(b);break}T[2]&&m.ops.pop(),m.trys.pop();continue}b=p.call(h,m)}catch(P){b=[6,P],y=0}finally{I=T=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.Track=t.Midi=void 0;var r=hn,i=sn,s=we,o=In,a=function(){function h(p){var m=this,I=null;if(p){var y=p instanceof ArrayBuffer?new Uint8Array(p):p;I=(0,r.parseMidi)(y),I.tracks.forEach(function(T){var k=0;T.forEach(function(w){k+=w.deltaTime,w.absoluteTime=k})}),I.tracks=g(I.tracks)}this.header=new i.Header(I),this.tracks=[],p&&(this.tracks=I.tracks.map(function(T){return new s.Track(T,m.header)}),I.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return h.fromUrl=function(p){return e(this,void 0,void 0,function(){var m,I;return n(this,function(y){switch(y.label){case 0:return[4,fetch(p)];case 1:return m=y.sent(),m.ok?[4,m.arrayBuffer()]:[3,3];case 2:return I=y.sent(),[2,new h(I)];case 3:throw new Error("Could not load '".concat(p,"'"))}})})},Object.defineProperty(h.prototype,"name",{get:function(){return this.header.name},set:function(p){this.header.name=p},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"duration",{get:function(){var p=this.tracks.map(function(m){return m.duration});return Math.max.apply(Math,p)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"durationTicks",{get:function(){var p=this.tracks.map(function(m){return m.durationTicks});return Math.max.apply(Math,p)},enumerable:!1,configurable:!0}),h.prototype.addTrack=function(){var p=new s.Track(void 0,this.header);return this.tracks.push(p),p},h.prototype.toArray=function(){return(0,o.encode)(this)},h.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(p){return p.toJSON()})}},h.prototype.fromJSON=function(p){var m=this;this.header=new i.Header,this.header.fromJSON(p.header),this.tracks=p.tracks.map(function(I){var y=new s.Track(void 0,m.header);return y.fromJSON(I),y})},h.prototype.clone=function(){var p=new h;return p.fromJSON(this.toJSON()),p},h}();t.Midi=a;var c=we;Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return c.Track}});var l=sn;Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return l.Header}});function g(h){for(var p=[],m=0;m<h.length;m++)for(var I=p.length,y=new Map,T=Array(16).fill(0),k=0,w=h[m];k<w.length;k++){var j=w[k],b=I,P=j.channel;if(P!==void 0){j.type==="programChange"&&(T[P]=j.programNumber);var ot=T[P],Kt="".concat(ot," ").concat(P);y.has(Kt)?b=y.get(Kt):(b=I+y.size,y.set(Kt,b))}p[b]||p.push([]),p[b].push(j)}return p}})(To);class te{static DEFAULT_PPQ=480;masterTrack;tracks;PPQ;tempos;timeSignatures;pluginContext;nextTrackRank=1;constructor(){this.tracks=[],this.PPQ=0,this.tempos=[],this.timeSignatures=[]}getMasterTrack(){return this.masterTrack||(this.masterTrack=new Ot({type:Nt.MASTER_TRACK,song:this,uuid:Ot.generateTrackIdInternal()})),this.masterTrack}getTracks(){return this.tracks}getTrackById(e){return je(this.tracks,n=>n.getId()===e)}getTracksByIds(e){if(!this.tracks)return[];const n=new Set(e);return this.tracks.filter(r=>n.has(r.getId()))}getTrackIndex(e){return re(this.tracks,n=>n.getId()===e)}createTrack({type:e,index:n,rank:r,assignDefaultSamplerPlugin:i=!1}){this.checkAccess("createTrack"),r==null||r===null?r=this.getNextTrackRank():this.nextTrackRank=Math.max(r+1,this.nextTrackRank);const s=new Ot({type:e,song:this,uuid:this.getNextTrackId(),rank:r==null||r===null?this.getNextTrackRank():r});return i&&e===Nt.MIDI_TRACK&&s.setSamplerPlugin(s.createAudioPlugin(xe.DEFAULT_SYNTH_TFID)),n!=null?this.tracks.splice(n,0,s):this.tracks.push(s),s}cloneTrack(e){let n=this.getTrackIndex(e.getId());n<0&&(n=void 0);const r=this.createTrack({type:e.getType(),index:n});if(r.setVolume(e.getVolume()),r.setPan(e.getPan()),r.setSolo(e.getSolo()),r.setMuted(e.getMuted()),e.getType()===Nt.MIDI_TRACK){const i=e.getInstrument();i&&r.setInstrument({program:i.getProgram(),isDrum:i.getIsDrum()});for(const o of e.getSuggestedInstruments())r.createSuggestedInstrument({program:o.getProgram(),isDrum:o.getIsDrum()});const s=e.getSamplerPlugin();s&&r.setSamplerPlugin(s.clone(r))}else e.getType(),Nt.AUDIO_TRACK;for(const i of e.getAudioPlugins())r.addAudioPlugin(i.clone(r));for(const i of e.getClips()){const s=r.cloneClip(i);r.insertClip(s)}return e.hasAnyAutomation()&&r.setAutomation(e.getAutomation()),r}removeTrack(e){this.checkAccess("removeTrack");const n=this.getTrackById(e);return n?(this.tracks.splice(re(this.tracks,r=>r.getId()===e),1),n):null}getResolution(){return this.PPQ}getBeatsPerBar(){return this.getTimeSignatures()[0].getNumerator()}getTicksPerBar(){return this.getBeatsPerBar()*this.getResolution()}setResolution(e){this.PPQ=e}getTempoChanges(){return this.tempos}createTempoChange({ticks:e,bpm:n}){if(this.PPQ<=0)throw new Error("Song resolution must be provided before creating tempo changes.");if(this.tempos.length===0&&e!==0)throw new Error("The first tempo event must be at tick 0");const r=new fe({ticks:e,bpm:n,time:this.tickToSeconds(e)}),i=R.ge(this.tempos,r,(s,o)=>s.getTicks()-o.getTicks());return i<0?this.tempos.push(r):this.tempos.splice(i,0,r),this.retimingTempoEvents(),r}overwriteTempoChanges(e){if(e.length===0)throw new Error("Cannot clear all the tempo events.");const n=wi(e);n.sort((i,s)=>i.getTicks()-s.getTicks());const r=n[0];if(r.getTicks()>0)throw new Error("The first tempo event needs to start from tick 0");this.tempos=[new fe({ticks:0,time:0,bpm:r.getBpm()})];for(let i=1;i<n.length;i+=1){const s=n[i];this.createTempoChange({ticks:s.getTicks(),bpm:s.getBpm()})}}overwriteTimeSignatures(e){this.timeSignatures=wi(e)}updateTempo(e,n){e.setBpmInternal(n),this.retimingTempoEvents()}getTimeSignatures(){return this.timeSignatures}createTimeSignature({ticks:e,numerator:n,denominator:r}){const i=new qn({ticks:e,numerator:n,denominator:r}),s=R.ge(this.timeSignatures,i,(o,a)=>o.getTicks()-a.getTicks());return s<0?this.timeSignatures.push(i):this.timeSignatures.splice(s,0,i),i}getLastTick(){let e=0;for(const n of this.tracks)e=Math.max(e,n.getTrackEndTick());return e}getDuration(){return this.tickToSeconds(this.getLastTick())}getTicksPerBeat(){return this.getResolution()*(4/this.getTimeSignatures()[0].getDenominator())}tickToSeconds(e){return te.tickToSecondsImpl(e,this.getTempoChanges(),this.getResolution())}static tickToSecondsImpl(e,n,r){if(e===0)return 0;let i=R.lt(n,{getTicks:()=>e},(c,l)=>c.getTicks()-l.getTicks());i==-1&&(i=0);const s=n[i],o=e-s.getTicks(),a=te.tempoBPMToTicksPerSecond(s.getBpm(),r);return s.getTime()+o/a}secondsToTick(e){if(e===0)return 0;let n=R.lt(this.getTempoChanges(),{getTime:()=>e},(o,a)=>o.getTime()-a.getTime());n==-1&&(n=0);const r=this.getTempoChanges()[n],i=e-r.getTime(),s=te.tempoBPMToTicksPerSecond(r.getBpm(),this.getResolution());return Math.round(r.getTicks()+i*s)}static importMIDI(e,n,r=0,i=!1){const s=new To.Midi(n),o=r,a=te.DEFAULT_PPQ/s.header.ppq;if(i){const c=[];for(const g of s.header.timeSignatures)c.push(new qn({ticks:o+_t(g.ticks,a),numerator:g.timeSignature[0],denominator:g.timeSignature[1]}));e.overwriteTimeSignatures(c);const l=[];o>0&&l.push(new fe({ticks:0,time:0,bpm:120}));for(const g of s.header.tempos)l.push(new fe({ticks:o+_t(g.ticks,a),time:g.time,bpm:g.bpm}));e.overwriteTempoChanges(l)}for(const c of s.tracks){const l=e.createTrack({type:Nt.MIDI_TRACK,assignDefaultSamplerPlugin:!0});l.setInstrument({program:c.instrument.number,isDrum:c.instrument.percussion});const g=l.createMIDIClip({clipStartTick:o});let h=Number.MAX_SAFE_INTEGER;for(const I of c.notes)g.createNote({pitch:I.midi,velocity:Math.round(I.velocity*127),startTick:o+_t(I.ticks,a),endTick:o+_t(I.ticks+I.durationTicks,a)}),h=Math.min(h,o+_t(I.ticks,a));const p=c.controlChanges[7];if(p)if(p.length===1)l.setVolume(p[0].value);else{const I=new Q(rn.VOLUME);l.getAutomation().addAutomation(I);const y=l.getAutomation().getAutomationValueByTarget(I);for(const T of p)y.addPoint(o+_t(T.ticks,a),T.value)}const m=c.controlChanges[10];if(m)if(m.length===1){const I=Math.round(m[0].value*127-64);l.setPan(I)}else{const I=new Q(rn.PAN);l.getAutomation().addAutomation(I);const y=l.getAutomation().getAutomationValueByTarget(I);for(const T of m)y.addPoint(o+_t(T.ticks,a),T.value)}h!==Number.MAX_SAFE_INTEGER&&g.adjustClipLeft(h)}}setPluginContextInternal(e){this.pluginContext={plugin:e,numTracksCreatedByPlugin:0}}clearPluginContextInternal(){this.pluginContext=void 0}getNextTrackId(){const e=this.pluginContext,n=e.plugin.generatedTrackIdsInternal;if(e.numTracksCreatedByPlugin===n.length)n.push(Ot.generateTrackIdInternal());else if(e.numTracksCreatedByPlugin>n.length)throw new Error("Plugin generated track ids out of sync.");const r=n[e.numTracksCreatedByPlugin];return e.numTracksCreatedByPlugin+=1,r}getNextTrackRank(){const e=this.nextTrackRank;return this.nextTrackRank+=1,e}checkAccess(e){if(!this.pluginContext)throw new Error("Song needs to be accessed in a plugin context in order to use privileged methods.");if(!this.pluginContext.plugin.songAccess()[e])throw new Error(`Plugin ${this.pluginContext.plugin.constructor.id()} requires access ${e} in order to run.`)}static tempoBPMToTicksPerSecond(e,n){return e*n/60}retimingTempoEvents(){this.tempos.sort((e,n)=>e.getTicks()-n.getTicks());for(const e of this.tempos)e.setTimeInternal(this.tickToSeconds(e.getTicks()))}}function _t(t,e){return Math.round(t*e)}var V=(t=>(t[t.Slider=1]="Slider",t[t.Input=2]="Input",t[t.TrackSelector=3]="TrackSelector",t[t.Pitch=4]="Pitch",t[t.TrackPitchSelector=5]="TrackPitchSelector",t[t.InstrumentSelector=6]="InstrumentSelector",t[t.Select=7]="Select",t[t.Switch=8]="Switch",t[t.InputNumber=9]="InputNumber",t[t.MultiTrackSelector=10]="MultiTrackSelector",t[t.None=11]="None",t[t.FileSelector=12]="FileSelector",t[t.MultiSourceAudioSelector=13]="MultiSourceAudioSelector",t[t.AudioRecorder=14]="AudioRecorder",t[t.SelectList=15]="SelectList",t))(V||{});async function kh(t){return t.arrayBuffer()}var ko=(t=>(t[t.SelectedTrackIds=1]="SelectedTrackIds",t[t.SelectedClipInfos=2]="SelectedClipInfos",t[t.TickAtPlayhead=3]="TickAtPlayhead",t[t.EditingClipInfo=4]="EditingClipInfo",t[t.EditingNoteIds=5]="EditingNoteIds",t[t.TickAtPlayheadSnappedToBeat=6]="TickAtPlayheadSnappedToBeat",t))(ko||{});exports.AudioPlugin=xe;exports.AutomationData=fn;exports.AutomationTarget=Q;exports.AutomationTargetType=rn;exports.AutomationValue=Ut;exports.Clip=X;exports.ClipType=Zt;exports.DrumPitch=vo;exports.InjectSource=ko;exports.Note=ft;exports.Song=te;exports.TempoEvent=fe;exports.TickToSecondStepper=Ef;exports.TimeSignatureEvent=qn;exports.Track=Ot;exports.TrackType=Nt;exports.TuneflowPipeline=Cc;exports.TuneflowPlugin=gr;exports.WidgetType=V;exports.areTuneflowIdsEqual=go;exports.areTuneflowIdsEqualIgnoreVersion=mo;exports.dbToVolumeValue=Io;exports.decodeAudioPluginTuneflowId=be;exports.gainToDb=Nf;exports.gainToVolumeValue=Af;exports.getAudioPluginTuneflowId=Zn;exports.getAudioPluginVersionlessTuneflowId=po;exports.getFileContentFromFileSelector=kh;exports.maybeToRaw=Rf;exports.midiNumberToPitch=kf;exports.pitchToHz=Vf;exports.pitchToMidiNumber=Cf;exports.remapRange=Mf;exports.toVersionlessTfId=xf;exports.volumeValueToDb=Pf;exports.volumeValueToGain=Of;
